function tableToGrid(n,t){jQuery(n).each(function(){var n,i;if(!this.grid){jQuery(this).width("99%");var c=jQuery(this).width(),l=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),a=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),s=l.length>0,v=!s&&a.length>0,h=s||v,r=[],f=[];jQuery("th",jQuery(this)).each(function(){r.length===0&&h?(r.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),f.push("__selection__")):(r.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),f.push(jQuery(this).html()))});var u=[],o=[],e=[];for(jQuery("tbody > tr",jQuery(this)).each(function(){var t={},n=0;jQuery("td",jQuery(this)).each(function(){if(n===0&&h){var i=jQuery("input",jQuery(this)),f=i.attr("value");o.push(f||u.length),i.is(":checked")&&e.push(f),t[r[n].name]=i.attr("value")}else t[r[n].name]=jQuery(this).html();n++}),n>0&&u.push(t)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:c,colNames:f,colModel:r,multiselect:s},t||{})),n=0;n<u.length;n++)i=null,o.length>0&&(i=o[n],i&&i.replace&&(i=encodeURIComponent(i).replace(/[.\-%]/g,"_"))),i===null&&(i=n+1),jQuery(this).jqGrid("addRowData",i,u[n]);for(n=0;n<e.length;n++)jQuery(this).jqGrid("setSelection",e[n])}})}(function(n){"use strict";n.jgrid=n.jgrid||{},n.extend(n.jgrid,{version:"4.3.2",htmlDecode:function(n){return n&&(n=="&nbsp;"||n=="&#160;"||n.length===1&&n.charCodeAt(0)===160)?"":n?String(n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},format:function(t){var i=n.makeArray(arguments).slice(1);return t===undefined&&(t=""),t.replace(/\{(\d+)\}/g,function(n,t){return i[t]})},getCellIndex:function(t){var i=n(t);return i.is("tr")?-1:(i=(!i.is("td")&&!i.is("th")?i.closest("td,th"):i)[0],n.browser.msie)?n.inArray(i,i.parentNode.cells):i.cellIndex},stripHtml:function(n){n=n+"";var t=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return n?(n=n.replace(t,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stripPref:function(t,i){var r=n.type(t);return(r=="string"||r=="number")&&(t=String(t),i=t!==""?String(i).replace(String(t),""):i),i},stringToDoc:function(n){var t,i;if(typeof n!="string")return n;try{i=new DOMParser,t=i.parseFromString(n,"text/xml")}catch(r){t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(n)}return t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null},parse:function(t){var i=t;return i.substr(0,9)=="while(1);"&&(i=i.substr(9)),i.substr(0,2)=="/*"&&(i=i.substr(2,i.length-4)),i||(i="{}"),n.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(i):eval("("+i+")")},parseDate:function(t,i){var r={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},u,s,f,c=/[\\\/:_;.,\t\T\s-]/,e;if(i&&i!==null&&i!==undefined){i=n.trim(i),i=i.split(c),n.jgrid.formatter.date.masks[t]!==undefined&&(t=n.jgrid.formatter.date.masks[t]),t=t.split(c);var l=n.jgrid.formatter.date.monthNames,o=n.jgrid.formatter.date.AmPm,h=function(n,t){return n===0?t===12&&(t=0):t!==12&&(t+=12),t};for(u=0,s=t.length;u<s;u++)t[u]=="M"&&(f=n.inArray(i[u],l),f!==-1&&f<12&&(i[u]=f+1,r.m=i[u])),t[u]=="F"&&(f=n.inArray(i[u],l),f!==-1&&f>11&&(i[u]=f+1-12,r.m=i[u])),t[u]=="a"&&(f=n.inArray(i[u],o),f!==-1&&f<2&&i[u]==o[f]&&(i[u]=f,r.h=h(i[u],r.h))),t[u]=="A"&&(f=n.inArray(i[u],o),f!==-1&&f>1&&i[u]==o[f]&&(i[u]=f-2,r.h=h(i[u],r.h))),i[u]!==undefined&&(r[t[u].toLowerCase()]=parseInt(i[u],10));r.m=parseInt(r.m,10)-1,e=r.y,e>=70&&e<=99?r.y=1900+r.y:e>=0&&e<=69&&(r.y=2e3+r.y),r.j!==undefined&&(r.d=r.j),r.n!==undefined&&(r.m=parseInt(r.n,10)-1)}return new Date(r.y,r.m,r.d,r.h,r.i,r.s,r.u)},jqID:function(n){return String(n).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(t){return(t?t:n.jgrid.uidPref)+n.jgrid.guid++},getAccessor:function(n,t){var i,f,r=[],u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined)try{if(typeof t=="string"&&(r=t.split(".")),u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}return i},getXmlData:function(t,i,r){var f,u=typeof i=="string"?i.match(/^(.*)\[(\w+)\]$/):null;return typeof i=="function"?i(t):u&&u[2]?u[1]?n(u[1],t).attr(u[2]):n(t).attr(u[2]):(f=n(i,t),r)?f:f.length>0?n(f).text():undefined},ajaxOptions:{},from:function(t){var i=function(t,i){typeof t=="string"&&(t=n.data(t));var r=this,u=t,l=!0,o=!1,f=i,v=/[\$,%]/g,c=null,y=null,p=0,e=!1,a="",s=[],h=!0;if(typeof t=="object"&&t.push)t.length>0&&(h=typeof t[0]!="object"?!1:!0);else throw"data provides is not an array";return this._hasData=function(){return u===null?!1:u.length===0?!1:!0},this._getStr=function(n){var t=[];return o&&t.push("jQuery.trim("),t.push("String("+n+")"),o&&t.push(")"),l||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return typeof n=="string"?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(t){return o&&(t=n.trim(t)),t=t.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),l?t:t.toLowerCase()},this._funcLoop=function(t){var i=[];return n.each(u,function(n,r){i.push(t(r))}),i},this._append=function(n){var t;for(f===null?f="":f+=a===""?" && ":a,t=0;t<p;t++)f+="(";e&&(f+="!"),f+="("+n+")",e=!1,a="",p=0},this._setCommand=function(n,t){c=n,y=t},this._resetNegate=function(){e=!1},this._repeatCommand=function(n,t){return c===null?r:n!==null&&t!==null?c(n,t):y===null?c(n):h?c(y,n):c(n)},this._equals=function(n,t){return r._compare(n,t,1)===0},this._compare=function(n,t,i){var r=Object.prototype.toString;return(i===undefined&&(i=1),n===undefined&&(n=null),t===undefined&&(t=null),n===null&&t===null)?0:n===null&&t!==null?1:n!==null&&t===null?-1:r.call(n)==="[object Date]"&&r.call(t)==="[object Date]"?n<t?-i:n>t?i:0:(l||typeof n=="number"||typeof t=="number"||(n=String(n).toLowerCase(),t=String(t).toLowerCase()),n<t)?-i:n>t?i:0},this._performSort=function(){s.length!==0&&(u=r._doSort(u,0))},this._doSort=function(n,t){var c=s[t].by,l=s[t].dir,a=s[t].type,h=s[t].datefmt,f,o,u,e,i;if(t==s.length-1)return r._getOrder(n,c,l,a,h);for(t++,f=r._getGroup(n,c,l,a,h),o=[],u=0;u<f.length;u++)for(e=r._doSort(f[u].items,t),i=0;i<e.length;i++)o.push(e[i]);return o},this._getOrder=function(t,i,u,f,e){var l=[],c=[],p=u=="a"?1:-1,y,o,h,s,a;for(f===undefined&&(f="text"),s=f=="float"||f=="number"||f=="currency"||f=="numeric"?function(n){var t=parseFloat(String(n).replace(v,""));return isNaN(t)?0:t}:f=="int"||f=="integer"?function(n){return n?parseFloat(String(n).replace(v,"")):0}:f=="date"||f=="datetime"?function(t){return n.jgrid.parseDate(e,t).getTime()}:n.isFunction(f)?f:function(t){return t||(t=""),n.trim(String(t).toUpperCase())},n.each(t,function(t,r){o=i!==""?n.jgrid.getAccessor(r,i):r,o===undefined&&(o=""),o=s(o,r),c.push({vSort:o,index:t})}),c.sort(function(n,t){return n=n.vSort,t=t.vSort,r._compare(n,t,p)}),h=0,a=t.length;h<a;)y=c[h].index,l.push(t[y]),h++;return l},this._getGroup=function(t,i,u,f,e){var h=[],s=null,c=null,o;return n.each(r._getOrder(t,i,u,f,e),function(t,u){o=n.jgrid.getAccessor(u,i),o===undefined&&(o=""),r._equals(c,o)||(c=o,s!==null&&h.push(s),s=r._group(i,o)),s.items.push(u)}),s!==null&&h.push(s),h},this.ignoreCase=function(){return l=!1,r},this.useCase=function(){return l=!0,r},this.trim=function(){return o=!0,r},this.noTrim=function(){return o=!1,r},this.execute=function(){var i=f,t=[];return i===null?r:(n.each(u,function(){eval(i)&&t.push(this)}),u=t,r)},this.data=function(){return u},this.select=function(t){if(r._performSort(),!r._hasData())return[];if(r.execute(),n.isFunction(t)){var i=[];return n.each(u,function(n,r){i.push(t(r))}),i}return u},this.hasMatch=function(){return r._hasData()?(r.execute(),u.length>0):!1},this.andNot=function(n,t,i){return e=!e,r.and(n,t,i)},this.orNot=function(n,t,i){return e=!e,r.or(n,t,i)},this.not=function(n,t,i){return r.andNot(n,t,i)},this.and=function(n,t,i){return(a=" && ",n===undefined)?r:r._repeatCommand(n,t,i)},this.or=function(n,t,i){return(a=" || ",n===undefined)?r:r._repeatCommand(n,t,i)},this.orBegin=function(){return p++,r},this.orEnd=function(){return f!==null&&(f+=")"),r},this.isNot=function(n){return e=!e,r.is(n)},this.is=function(n){return r._append("this."+n),r._resetNegate(),r},this._compareValues=function(t,i,u,f,e){var s,o,c;if(s=h?"jQuery.jgrid.getAccessor(this,'"+i+"')":"this",u===undefined&&(u=null),o=u,c=e.stype===undefined?"text":e.stype,u!==null)switch(c){case"int":case"integer":o=isNaN(Number(o))||o===""?"0":o,s="parseInt("+s+",10)",o="parseInt("+o+",10)";break;case"float":case"number":case"numeric":o=String(o).replace(v,""),o=isNaN(Number(o))||o===""?"0":o,s="parseFloat("+s+")",o="parseFloat("+o+")";break;case"date":case"datetime":o=String(n.jgrid.parseDate(e.newfmt||"Y-m-d",o).getTime()),s='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+s+").getTime()";break;default:s=r._getStr(s),o=r._getStr('"'+r._toStr(o)+'"')}return r._append(s+" "+f+" "+o),r._setCommand(t,i),r._resetNegate(),r},this.equals=function(n,t,i){return r._compareValues(r.equals,n,t,"==",i)},this.notEquals=function(n,t,i){return r._compareValues(r.equals,n,t,"!==",i)},this.isNull=function(n,t,i){return r._compareValues(r.equals,n,null,"===",i)},this.greater=function(n,t,i){return r._compareValues(r.greater,n,t,">",i)},this.less=function(n,t,i){return r._compareValues(r.less,n,t,"<",i)},this.greaterOrEquals=function(n,t,i){return r._compareValues(r.greaterOrEquals,n,t,">=",i)},this.lessOrEquals=function(n,t,i){return r._compareValues(r.lessOrEquals,n,t,"<=",i)},this.startsWith=function(t,i){var f=i===undefined||i===null?t:i,u=o?n.trim(f.toString()).length:f.toString().length;return h?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".substr(0,"+u+") == "+r._getStr('"'+r._toStr(i)+'"')):(u=o?n.trim(i.toString()).length:i.toString().length,r._append(r._getStr("this")+".substr(0,"+u+") == "+r._getStr('"'+r._toStr(t)+'"'))),r._setCommand(r.startsWith,t),r._resetNegate(),r},this.endsWith=function(t,i){var f=i===undefined||i===null?t:i,u=o?n.trim(f.toString()).length:f.toString().length;return h?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".substr("+r._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".length-"+u+","+u+') == "'+r._toStr(i)+'"'):r._append(r._getStr("this")+".substr("+r._getStr("this")+'.length-"'+r._toStr(t)+'".length,"'+r._toStr(t)+'".length) == "'+r._toStr(t)+'"'),r._setCommand(r.endsWith,t),r._resetNegate(),r},this.contains=function(n,t){return h?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+'.indexOf("'+r._toStr(t)+'",0) > -1'):r._append(r._getStr("this")+'.indexOf("'+r._toStr(n)+'",0) > -1'),r._setCommand(r.contains,n),r._resetNegate(),r},this.groupBy=function(n,t,i,f){return r._hasData()?r._getGroup(u,n,t,i,f):null},this.orderBy=function(t,i,u,f){return i=i===undefined||i===null?"a":n.trim(i.toString().toLowerCase()),(u===null||u===undefined)&&(u="text"),(f===null||f===undefined)&&(f="Y-m-d"),(i=="desc"||i=="descending")&&(i="d"),(i=="asc"||i=="ascending")&&(i="a"),s.push({by:t,dir:i,type:u,datefmt:f}),r},r};return new i(t,null)},extend:function(t){n.extend(n.fn.jqGrid,t),this.no_legacy_api||n.fn.extend(t)}}),n.fn.jqGrid=function(t){var i,r;if(typeof t=="string"){if(i=n.jgrid.getAccessor(n.fn.jqGrid,t),!i)throw"jqGrid - No such method: "+t;return r=n.makeArray(arguments).slice(1),i.apply(this,r)}return this.each(function(){var f,h,w,ei,tt,b,yt,ft,ti,nt,o,l,kt,vt,ri;if(!this.grid){var u=n.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],groupDataSorted:!1,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{},idPrefix:""},n.jgrid.defaults,t||{}),i=this,r={headers:[],cols:[],footers:[],dragStart:function(t,r,f){this.resizing={idx:t,startX:r.clientX,sOL:f[0]},this.hDiv.style.cursor="col-resize",this.curGbox=n("#rs_m"+n.jgrid.jqID(u.id),"#gbox_"+n.jgrid.jqID(u.id)),this.curGbox.css({display:"block",left:f[0],top:f[1],height:f[2]}),n(i).triggerHandler("jqGridResizeStart",[r,t]),n.isFunction(u.resizeStart)&&u.resizeStart.call(this,r,t),document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.clientX-this.resizing.startX,r=this.headers[this.resizing.idx],e=u.direction==="ltr"?r.width+t:r.width-t,i,f;e>33&&(this.curGbox.css({left:this.resizing.sOL+t}),u.forceFit===!0?(i=this.headers[this.resizing.idx+u.nv],f=u.direction==="ltr"?i.width-t:i.width+t,f>33&&(r.newWidth=e,i.newWidth=f)):(this.newWidth=u.direction==="ltr"?u.tblwidth+t:u.tblwidth-t,r.newWidth=e))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var t=this.resizing.idx,r=this.headers[t].newWidth||this.headers[t].width;r=parseInt(r,10),this.resizing=!1,n("#rs_m"+n.jgrid.jqID(u.id)).css("display","none"),u.colModel[t].width=r,this.headers[t].width=r,this.headers[t].el.style.width=r+"px",this.cols[t].style.width=r+"px",this.footers.length>0&&(this.footers[t].style.width=r+"px"),u.forceFit===!0?(r=this.headers[t+u.nv].newWidth||this.headers[t+u.nv].width,this.headers[t+u.nv].width=r,this.headers[t+u.nv].el.style.width=r+"px",this.cols[t+u.nv].style.width=r+"px",this.footers.length>0&&(this.footers[t+u.nv].style.width=r+"px"),u.colModel[t+u.nv].width=r):(u.tblwidth=this.newWidth||u.tblwidth,n("table:first",this.bDiv).css("width",u.tblwidth+"px"),n("table:first",this.hDiv).css("width",u.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,u.footerrow&&(n("table:first",this.sDiv).css("width",u.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),n(i).triggerHandler("jqGridResizeStop",[r,t]),n.isFunction(u.resizeStop)&&u.resizeStop.call(this,r,t)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){var c,f,a,h;if(r.timer&&clearTimeout(r.timer),r.timer=null,c=n(r.bDiv).height(),c){if(f=n("table:first",r.bDiv),f[0].rows.length)try{a=f[0].rows[1],h=a?n(a).outerHeight()||r.prevRowHeight:r.prevRowHeight}catch(p){h=r.prevRowHeight}if(h){r.prevRowHeight=h;var y=u.rowNum,l=r.scrollTop=r.bDiv.scrollTop,e=Math.round(f.position().top)-l,o=e+f.height(),t=h*y,i,s,v;if(o<c&&e<=0&&(u.lastpage===undefined||parseInt((o+l+t-1)/t,10)<=u.lastpage)&&(s=parseInt((c-o+t-1)/t,10),o>=0||s<2||u.scroll===!0?(i=Math.round((o+l)/t)+1,e=-1):e=1),e>0&&(i=parseInt(l/t,10)+1,s=parseInt((l+c)/t,10)+2-i,v=!0),s){if(u.lastpage&&i>u.lastpage||u.lastpage==1||i===u.page&&i===u.lastpage)return;r.hDiv.loading?r.timer=setTimeout(r.populateVisible,u.scrollTimeout):(u.page=i,v&&(r.selectionPreserver(f[0]),r.emptyRows(r.bDiv,!1,!1)),r.populate(s))}}}},scrollGrid:function(n){if(u.scroll){var t=r.bDiv.scrollTop;r.scrollTop===undefined&&(r.scrollTop=0),t!=r.scrollTop&&(r.scrollTop=t,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,u.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft,u.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft),n&&n.stopPropagation()},selectionPreserver:function(t){var i=t.p,u=i.selrow,r=i.selarrrow?n.makeArray(i.selarrrow):null,e=t.grid.bDiv.scrollLeft,f=function(){var o;if(i.selrow=null,i.selarrrow=[],i.multiselect&&r&&r.length>0)for(o=0;o<r.length;o++)r[o]!=u&&n(t).jqGrid("setSelection",r[o],!1,null);u&&n(t).jqGrid("setSelection",u,!1,null),t.grid.bDiv.scrollLeft=e,n(t).unbind(".selectionPreserver",f)};n(t).bind("jqGridGridComplete.selectionPreserver",f)}};if(this.tagName.toUpperCase()!="TABLE"){alert("Element is not a table");return}if(n(this).empty().attr("tabindex","1"),this.p=u,this.p.useProp=!!n.fn.prop,this.p.colNames.length===0)for(f=0;f<this.p.colModel.length;f++)this.p.colNames[f]=this.p.colModel[f].label||this.p.colModel[f].name;if(this.p.colNames.length!==this.p.colModel.length){alert(n.jgrid.errors.model);return}var p=n("<div class='ui-jqgrid-view'></div>"),pt,rt=n.browser.msie?!0:!1,ni=(n.browser.webkit||n.browser.safari)&&parseFloat(n.browser.version)<536.5?!0:!1;i.p.direction=n.trim(i.p.direction.toLowerCase()),n.inArray(i.p.direction,["ltr","rtl"])==-1&&(i.p.direction="ltr"),h=i.p.direction,n(p).insertBefore(this),n(this).appendTo(p).removeClass("scroll"),w=n("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>"),n(w).insertBefore(p).attr({id:"gbox_"+this.id,dir:h}),n(p).appendTo(w).attr("id","gview_"+this.id),pt=rt&&n.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",n("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(pt).insertBefore(p),n("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(p),n(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var gi=["shiftKey","altKey","ctrlKey"],y=function(n,t){return n=parseInt(n,10),isNaN(n)?t?t:0:n},it=function(t,u,f,e,o,s){var c=i.p.colModel[t],y=c.align,l='style="',v=c.classes,p=c.name,a,h=[];return y&&(l+="text-align:"+y+";"),c.hidden===!0&&(l+="display:none;"),u===0?l+="width: "+r.headers[t].width+"px;":c.cellattr&&n.isFunction(c.cellattr)&&(a=c.cellattr.call(i,o,f,e,c,s),a&&typeof a=="string"&&(a=a.replace(/style/i,"style").replace(/title/i,"title"),a.indexOf("title")>-1&&(c.title=!1),a.indexOf("class")>-1&&(v=undefined),h=a.split("style"),h.length===2?(h[1]=n.trim(h[1].replace("=","")),(h[1].indexOf("'")===0||h[1].indexOf('"')===0)&&(h[1]=h[1].substring(1)),l+=h[1].replace(/'/gi,'"')):l+='"')),h.length||(h[0]="",l+='"'),l+=(v!==undefined?' class="'+v+'"':"")+(c.title&&f?' title="'+n.jgrid.stripHtml(f)+'"':""),l+=' aria-describedby="'+i.p.id+"_"+p+'"',l+h[0]},vi=function(t){return t===undefined||t===null||t===""?"&#160;":i.p.autoencode?n.jgrid.htmlEncode(t):t+""},wi=function(t,r,u,f,e){var s=i.p.colModel[u],o,h;return typeof s.formatter!="undefined"?(h={rowId:t,colModel:s,gid:i.p.id,pos:u},o=n.isFunction(s.formatter)?s.formatter.call(i,r,h,f,e):n.fmatter?n.fn.fmatter.call(i,s.formatter,r,h,f,e):vi(r)):o=vi(r),o},wt=function(n,t,i,r,u){var f,e;return f=wi(n,t,i,u,"add"),e=it(i,r,f,u,n,!0),'<td role="gridcell" '+e+">"+f+"</td>"},si=function(n,t,r){var f='<input role="checkbox" type="checkbox" id="jqg_'+i.p.id+"_"+n+'" class="cbox" name="jqg_'+i.p.id+"_"+n+'"/>',u=it(t,r,"",null,n,!0);return'<td role="gridcell" '+u+">"+f+"</td>"},li=function(n,t,i,r){var u=(parseInt(i,10)-1)*parseInt(r,10)+1+t,f=it(n,t,u,null,t,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+u+"</td>"},ci=function(n){for(var t,u=[],f=0,r=0;r<i.p.colModel.length;r++)t=i.p.colModel[r],t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"&&(u[f]=n=="local"?t.name:n=="xml"||n==="xmlstring"?t.xmlmap||t.name:t.jsonmap||t.name,f++);return u},ct=function(t){var r=i.p.remapColumns;return r&&r.length||(r=n.map(i.p.colModel,function(n,t){return t})),t&&(r=n.map(r,function(n){return n<t?null:n-t})),r},ut=function(t,r,u){if(i.p.deepempty)n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:gt(0)").remove();else{var f=n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:first")[0];n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").empty().append(f)}r&&i.p.scroll&&(n(">div:first",t).css({height:"auto"}).children("div:first").css({height:0,display:"none"}),t.scrollTop=0),u===!0&&i.p.treeGrid===!0&&(i.p.data=[],i.p._index={})},dt=function(){for(var o=i.p.data.length,u,s=i.p.rownumbers===!0?1:0,f=i.p.multiselect===!0?1:0,e=i.p.subGrid===!0?1:0,r=i.p.keyIndex===!1||i.p.loadonce===!0?i.p.localReader.id:i.p.colModel[i.p.keyIndex+f+e+s].name,t=0;t<o;t++)u=n.jgrid.getAccessor(i.p.data[t],r),i.p._index[u]=t},gt=function(t,r,u,f,e){var l="-1",a="",s,h=r?"display:none;":"",c="ui-widget-content jqgrow ui-row-"+i.p.direction+u,o=n.isFunction(i.p.rowattr)?i.p.rowattr.call(i,f,e):{};if(!n.isEmptyObject(o)){o.hasOwnProperty("id")&&(t=o.id,delete o.id),o.hasOwnProperty("tabindex")&&(l=o.tabindex,delete o.tabindex),o.hasOwnProperty("style")&&(h+=o.style,delete o.style),o.hasOwnProperty("class")&&(c+=" "+o["class"],delete o["class"]);try{delete o.role}catch(v){}for(s in o)o.hasOwnProperty(s)&&(a+=" "+s+"="+o[s])}return'<tr role="row" id="'+t+'" tabindex="'+l+'" class="'+c+'"'+(h===""?"":' style="'+h+'"')+a+">"},bt=function(t,r,u,f,e){var ri=new Date,et=i.p.datatype!="local"&&i.p.loadonce||i.p.datatype=="xmlstring",at="_id_",o=i.p.xmlReader,fi=i.p.datatype=="local"?"local":"xml",k,ht,ii,ti,yt,pt,bt,kt,vt,ot,dt;if(et&&(i.p.data=[],i.p._index={},i.p.localReader.id=at),i.p.reccount=0,n.isXMLDoc(t))i.p.treeANode!==-1||i.p.scroll?u=u>1?u:1:(ut(r,!1,!0),u=1);else return;var y,ft,d=0,b,v=i.p.multiselect===!0?1:0,g=i.p.subGrid===!0?1:0,a=i.p.rownumbers===!0?1:0,p,rt,nt=[],it,c={},l,h,s=[],ui=i.p.altRows===!0?" "+i.p.altclass:"",ni;o.repeatitems||(nt=ci(fi)),p=i.p.keyIndex===!1?n.isFunction(o.id)?o.id.call(i,t):o.id:i.p.keyIndex,nt.length>0&&!isNaN(p)&&(i.p.remapColumns&&i.p.remapColumns.length&&(p=n.inArray(p,i.p.remapColumns)),p=nt[p]),rt=(p+"").indexOf("[")===-1?nt.length?function(t,i){return n(p,t).text()||i}:function(t,i){return n(o.cell,t).eq(p).text()||i}:function(n,t){return n.getAttribute(p.replace(/[\[\]]/g,""))||t},i.p.userData={},i.p.page=n.jgrid.getXmlData(t,o.page)||0,i.p.lastpage=n.jgrid.getXmlData(t,o.total),i.p.lastpage===undefined&&(i.p.lastpage=1),i.p.records=n.jgrid.getXmlData(t,o.records)||0,n.isFunction(o.userdata)?i.p.userData=o.userdata.call(i,t)||{}:n.jgrid.getXmlData(t,o.userdata,!0).each(function(){i.p.userData[this.getAttribute("name")]=n(this).text()}),k=n.jgrid.getXmlData(t,o.root,!0),k=n.jgrid.getXmlData(k,o.row,!0),k||(k=[]);var tt=k.length,w=0,st={},lt=parseInt(i.p.rowNum,10);if(tt>0&&i.p.page<=0&&(i.p.page=1),k&&tt)for(ht=i.p.scroll?n.jgrid.randId():1,e&&(lt*=e+1),ti=n.isFunction(i.p.afterInsertRow),yt=i.p.grouping&&i.p.groupingView.groupCollapse===!0;w<tt;){if(l=k[w],h=rt(l,ht+w),h=i.p.idPrefix+h,ii=u===0?0:u+1,ni=(ii+w)%2==1?ui:"",pt=s.length,s.push(""),a&&s.push(li(0,w,i.p.page,i.p.rowNum)),v&&s.push(si(h,a,w)),g&&s.push(n(i).jqGrid("addSubGridCell",v+a,w+u)),o.repeatitems)it||(it=ct(v+g+a)),bt=n.jgrid.getXmlData(l,o.cell,!0),n.each(it,function(n){var t=bt[this];if(!t)return!1;b=t.textContent||t.text,c[i.p.colModel[n+v+g+a].name]=b,s.push(wt(h,b,n+v+g+a,w+u,l))});else for(y=0;y<nt.length;y++)b=n.jgrid.getXmlData(l,nt[y]),c[i.p.colModel[y+v+g+a].name]=b,s.push(wt(h,b,y+v+g+a,w+u,l));if(s[pt]=gt(h,yt,ni,c,l),s.push("</tr>"),i.p.grouping){for(kt=i.p.groupingView.groupField.length,vt=[],ot=0;ot<kt;ot++)vt.push(c[i.p.groupingView.groupField[ot]]);st=n(i).jqGrid("groupingPrepare",s,vt,st,c),s=[]}if((et||i.p.treeGrid===!0)&&(c[at]=h,i.p.data.push(c),i.p._index[h]=i.p.data.length-1),i.p.gridview===!1&&(n("tbody:first",r).append(s.join("")),n(i).triggerHandler("jqGridAfterInsertRow",[h,c,l]),ti&&i.p.afterInsertRow.call(i,h,c,l),s=[]),c={},d++,w++,d==lt)break}if(i.p.gridview===!0&&(ft=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?(n(i).jqGrid("groupingRender",st,i.p.colModel.length),st=null):i.p.treeGrid===!0&&ft>0?n(i.rows[ft]).after(s.join("")):n("tbody:first",r).append(s.join(""))),i.p.subGrid===!0)try{n(i).jqGrid("addSubGrid",v+a)}catch(oi){}if(i.p.totaltime=new Date-ri,d>0&&i.p.records===0&&(i.p.records=tt),s=null,i.p.treeGrid===!0)try{n(i).jqGrid("setTreeNode",ft+1,d+ft+1)}catch(ei){}if(i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=d,i.p.treeANode=-1,i.p.userDataOnFooter&&n(i).jqGrid("footerData","set",i.p.userData,!0),et&&(i.p.records=tt,i.p.lastpage=Math.ceil(tt/lt)),f||i.updatepager(!1,!0),et)while(d<tt){if(l=k[d],h=rt(l,d+ht),h=i.p.idPrefix+h,o.repeatitems)it||(it=ct(v+g+a)),dt=n.jgrid.getXmlData(l,o.cell,!0),n.each(it,function(n){var t=dt[this];if(!t)return!1;b=t.textContent||t.text,c[i.p.colModel[n+v+g+a].name]=b});else for(y=0;y<nt.length;y++)b=n.jgrid.getXmlData(l,nt[y]),c[i.p.colModel[y+v+g+a].name]=b;c[at]=h,i.p.data.push(c),i.p._index[h]=i.p.data.length-1,c={},d++}},lt=function(t,r,u,f,e){var ii=new Date,s,ht,bt,tt,st,yt,ti,et,kt,dt,vt,lt,at;if(t)i.p.treeANode!==-1||i.p.scroll?u=u>1?u:1:(ut(r,!1,!0),u=1);else return;ht="_id_",tt=i.p.datatype!="local"&&i.p.loadonce||i.p.datatype=="jsonstring",tt&&(i.p.data=[],i.p._index={},i.p.localReader.id=ht),i.p.reccount=0,i.p.datatype=="local"?(s=i.p.localReader,bt="local"):(s=i.p.jsonReader,bt="json");var y=0,ft,p,a,rt=[],w,h,k=i.p.multiselect?1:0,nt=i.p.subGrid?1:0,b=i.p.rownumbers===!0?1:0,g,d,v,l={},it,o,c=[],ri=i.p.altRows===!0?" "+i.p.altclass:"",ni,pt;i.p.page=n.jgrid.getAccessor(t,s.page)||0,pt=n.jgrid.getAccessor(t,s.total),i.p.lastpage=pt===undefined?1:pt,i.p.records=n.jgrid.getAccessor(t,s.records)||0,i.p.userData=n.jgrid.getAccessor(t,s.userdata)||{},s.repeatitems||(w=rt=ci(bt)),v=i.p.keyIndex===!1?n.isFunction(s.id)?s.id.call(i,t):s.id:i.p.keyIndex,rt.length>0&&!isNaN(v)&&(i.p.remapColumns&&i.p.remapColumns.length&&(v=n.inArray(v,i.p.remapColumns)),v=rt[v]),d=n.jgrid.getAccessor(t,s.root),d||(d=[]),g=d.length,p=0,g>0&&i.p.page<=0&&(i.p.page=1),st=parseInt(i.p.rowNum,10),yt=i.p.scroll?n.jgrid.randId():1,e&&(st*=e+1);for(var fi=n.isFunction(i.p.afterInsertRow),ot={},ui=i.p.grouping&&i.p.groupingView.groupCollapse===!0;p<g;){for(h=d[p],o=n.jgrid.getAccessor(h,v),o===undefined&&(o=yt+p,rt.length===0&&s.cell&&(et=n.jgrid.getAccessor(h,s.cell),o=et!==undefined?et[v]||o:o,et=null)),o=i.p.idPrefix+o,ti=u===1?0:u,ni=(ti+p)%2==1?ri:"",kt=c.length,c.push(""),b&&c.push(li(0,p,i.p.page,i.p.rowNum)),k&&c.push(si(o,b,p)),nt&&c.push(n(i).jqGrid("addSubGridCell",k+b,p+u)),s.repeatitems&&(s.cell&&(h=n.jgrid.getAccessor(h,s.cell)),w||(w=ct(k+nt+b))),a=0;a<w.length;a++)ft=n.jgrid.getAccessor(h,w[a]),c.push(wt(o,ft,a+k+nt+b,p+u,h)),l[i.p.colModel[a+k+nt+b].name]=ft;if(c[kt]=gt(o,ui,ni,l,h),c.push("</tr>"),i.p.grouping){for(dt=i.p.groupingView.groupField.length,vt=[],lt=0;lt<dt;lt++)vt.push(l[i.p.groupingView.groupField[lt]]);ot=n(i).jqGrid("groupingPrepare",c,vt,ot,l),c=[]}if((tt||i.p.treeGrid===!0)&&(l[ht]=o,i.p.data.push(l),i.p._index[o]=i.p.data.length-1),i.p.gridview===!1&&(n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").append(c.join("")),n(i).triggerHandler("jqGridAfterInsertRow",[o,l,h]),fi&&i.p.afterInsertRow.call(i,o,l,h),c=[]),l={},y++,p++,y==st)break}if(i.p.gridview===!0&&(it=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?(n(i).jqGrid("groupingRender",ot,i.p.colModel.length),ot=null):i.p.treeGrid===!0&&it>0?n(i.rows[it]).after(c.join("")):n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").append(c.join(""))),i.p.subGrid===!0)try{n(i).jqGrid("addSubGrid",k+b)}catch(oi){}if(i.p.totaltime=new Date-ii,y>0&&i.p.records===0&&(i.p.records=g),c=null,i.p.treeGrid===!0)try{n(i).jqGrid("setTreeNode",it+1,y+it+1)}catch(ei){}if(i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=y,i.p.treeANode=-1,i.p.userDataOnFooter&&n(i).jqGrid("footerData","set",i.p.userData,!0),tt&&(i.p.records=g,i.p.lastpage=Math.ceil(g/st)),f||i.updatepager(!1,!0),tt)while(y<g&&d[y]){if(h=d[y],o=n.jgrid.getAccessor(h,v),o===undefined&&(o=yt+y,rt.length===0&&s.cell&&(at=n.jgrid.getAccessor(h,s.cell),o=at[v]||o,at=null)),h){for(o=i.p.idPrefix+o,s.repeatitems&&(s.cell&&(h=n.jgrid.getAccessor(h,s.cell)),w||(w=ct(k+nt+b))),a=0;a<w.length;a++)ft=n.jgrid.getAccessor(h,w[a]),l[i.p.colModel[a+k+nt+b].name]=ft;l[ht]=o,i.p.data.push(l),i.p._index[o]=i.p.data.length-1,l={}}y++}},di=function(){function b(u){var o=0,f,c,l,s,e,a;if(u.groups!==undefined){for(c=u.groups.length&&u.groupOp.toString().toUpperCase()==="OR",c&&t.orBegin(),f=0;f<u.groups.length;f++){o>0&&c&&t.or();try{b(u.groups[f])}catch(y){alert(y)}o++}c&&t.orEnd()}if(u.rules!==undefined){o>0&&(a=t.select(),t=n.jgrid.from(a),i.p.ignoreCase&&(t=t.ignoreCase()));try{for(l=u.rules.length&&u.groupOp.toString().toUpperCase()==="OR",l&&t.orBegin(),f=0;f<u.rules.length;f++)e=u.rules[f],s=u.groupOp.toString().toUpperCase(),h[e.op]&&e.field&&(o>0&&s&&s==="OR"&&(t=t.or()),t=h[e.op](t,s)(e.field,e.data,r[e.field])),o++;l&&t.orEnd()}catch(v){alert(v)}}}var u,p=!1,r={},w=[],k=[],l,o,a,c,h,t,f;if(n.isArray(i.p.data)){if(c=i.p.grouping?i.p.groupingView:!1,n.each(i.p.colModel,function(){if(o=this.sorttype||"text",o=="date"||o=="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?(l=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:n.jgrid.formatter.date.srcformat,a=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:n.jgrid.formatter.date.newformat):l=a=this.datefmt||"Y-m-d",r[this.name]={stype:o,srcfmt:l,newfmt:a}):r[this.name]={stype:o,srcfmt:"",newfmt:""},i.p.grouping&&this.name==c.groupField[0]){var t=this.name;typeof this.index!="undefined"&&(t=this.index),w[0]=r[t],k.push(t)}p||this.index!=i.p.sortname&&this.name!=i.p.sortname||(u=this.name,p=!0)}),i.p.treeGrid){n(i).jqGrid("SortTree",u,i.p.sortorder,r[u].stype,r[u].srcfmt);return}if(h={eq:function(n){return n.equals},ne:function(n){return n.notEquals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n,t){return t==="OR"?n.orNot().contains:n.andNot().contains},bw:function(n){return n.startsWith},bn:function(n,t){return t==="OR"?n.orNot().startsWith:n.andNot().startsWith},en:function(n,t){return t==="OR"?n.orNot().endsWith:n.andNot().endsWith},ew:function(n){return n.endsWith},ni:function(n,t){return t==="OR"?n.orNot().equals:n.andNot().equals},"in":function(n){return n.equals},nu:function(n){return n.isNull},nn:function(n,t){return t==="OR"?n.orNot().isNull:n.andNot().isNull}},t=n.jgrid.from(i.p.data),i.p.ignoreCase&&(t=t.ignoreCase()),i.p.search===!0)if(f=i.p.postData.filters,f)typeof f=="string"&&(f=n.jgrid.parse(f)),b(f);else try{t=h[i.p.postData.searchOper](t)(i.p.postData.searchField,i.p.postData.searchString,r[i.p.postData.searchField])}catch(nt){}i.p.grouping&&(t.orderBy(k,c.groupOrder[0],w[0].stype,w[0].srcfmt),c.groupDataSorted=!0),u&&i.p.sortorder&&p&&(i.p.sortorder.toUpperCase()=="DESC"?t.orderBy(i.p.sortname,"d",r[u].stype,r[u].srcfmt):t.orderBy(i.p.sortname,"a",r[u].stype,r[u].srcfmt));var s=t.select(),v=parseInt(i.p.rowNum,10),d=s.length,y=parseInt(i.p.page,10),g=Math.ceil(d/v),e={};return s=s.slice((y-1)*v,y*v),t=null,r=null,e[i.p.localReader.total]=g,e[i.p.localReader.page]=y,e[i.p.localReader.records]=d,e[i.p.localReader.root]=s,e[i.p.localReader.userdata]=i.p.userData,s=null,e}},ki=function(t,r){var s,b,u,l,c,v,h,o="",d,f=i.p.pager?"_"+n.jgrid.jqID(i.p.pager.substr(1)):"",e=i.p.toppager?"_"+i.p.toppager.substr(1):"",p,a,w,k;u=parseInt(i.p.page,10)-1,u<0&&(u=0),u=u*parseInt(i.p.rowNum,10),c=u+i.p.reccount,i.p.scroll&&(p=n("tbody:first > tr:gt(0)",i.grid.bDiv),u=c-p.length,i.p.reccount=p.length,a=p.outerHeight()||i.grid.prevRowHeight,a&&(w=u*a,k=parseInt(i.p.records,10)*a,n(">div:first",i.grid.bDiv).css({height:k}).children("div:first").css({height:w,display:w?"":"none"})),i.grid.bDiv.scrollLeft=i.grid.hDiv.scrollLeft),o=i.p.pager?i.p.pager:"",o+=i.p.toppager?o?","+i.p.toppager:i.p.toppager:"",o&&(h=n.jgrid.formatter.integer||{},s=y(i.p.page),b=y(i.p.lastpage),n(".selbox",o)[this.p.useProp?"prop":"attr"]("disabled",!1),i.p.pginput===!0&&(n(".ui-pg-input",o).val(i.p.page),d=i.p.toppager?"#sp_1"+f+",#sp_1"+e:"#sp_1"+f,n(d).html(n.fmatter?n.fmatter.util.NumberFormat(i.p.lastpage,h):i.p.lastpage)),i.p.viewrecords&&(i.p.reccount===0?n(".ui-paging-info",o).html(i.p.emptyrecords):(l=u+1,v=i.p.records,n.fmatter&&(l=n.fmatter.util.NumberFormat(l,h),c=n.fmatter.util.NumberFormat(c,h),v=n.fmatter.util.NumberFormat(v,h)),n(".ui-paging-info",o).html(n.jgrid.format(i.p.recordtext,l,c,v)))),i.p.pgbuttons===!0&&(s<=0&&(s=b=0),s==1||s===0?(n("#first"+f+", #prev"+f).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&n("#first_t"+e+", #prev_t"+e).addClass("ui-state-disabled").removeClass("ui-state-hover")):(n("#first"+f+", #prev"+f).removeClass("ui-state-disabled"),i.p.toppager&&n("#first_t"+e+", #prev_t"+e).removeClass("ui-state-disabled")),s==b||s===0?(n("#next"+f+", #last"+f).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&n("#next_t"+e+", #last_t"+e).addClass("ui-state-disabled").removeClass("ui-state-hover")):(n("#next"+f+", #last"+f).removeClass("ui-state-disabled"),i.p.toppager&&n("#next_t"+e+", #last_t"+e).removeClass("ui-state-disabled")))),t===!0&&i.p.rownumbers===!0&&n("td.jqgrid-rownum",i.rows).each(function(t){n(this).html(u+1+t)}),r&&i.p.jqgdnd&&n(i).jqGrid("gridDnD","updateDnD"),n(i).triggerHandler("jqGridGridComplete"),n.isFunction(i.p.gridComplete)&&i.p.gridComplete.call(i),n(i).triggerHandler("jqGridAfterGridComplete")},st=function(){if(i.grid.hDiv.loading=!0,!i.p.hiddengrid)switch(i.p.loadui){case"enable":n("#load_"+n.jgrid.jqID(i.p.id)).show();break;case"block":n("#lui_"+n.jgrid.jqID(i.p.id)).show(),n("#load_"+n.jgrid.jqID(i.p.id)).show()}},k=function(){i.grid.hDiv.loading=!1;switch(i.p.loadui){case"enable":n("#load_"+n.jgrid.jqID(i.p.id)).hide();break;case"block":n("#lui_"+n.jgrid.jqID(i.p.id)).hide(),n("#load_"+n.jgrid.jqID(i.p.id)).hide()}},v=function(t){var l,e,s;if(!i.grid.hDiv.loading){var y=i.p.scroll&&t===!1,f={},c,u,r=i.p.prmNames;i.p.page<=0&&(i.p.page=1),r.search!==null&&(f[r.search]=i.p.search),r.nd!==null&&(f[r.nd]=+new Date),r.rows!==null&&(f[r.rows]=i.p.rowNum),r.page!==null&&(f[r.page]=i.p.page),r.sort!==null&&(f[r.sort]=i.p.sortname),r.order!==null&&(f[r.order]=i.p.sortorder),i.p.rowTotal!==null&&r.totalrows!==null&&(f[r.totalrows]=i.p.rowTotal);var h=n.isFunction(i.p.loadComplete),o=h?i.p.loadComplete:null,a=0;if(t=t||1,t>1?r.npage!==null?(f[r.npage]=t,a=t-1,t=1):o=function(n){i.p.page++,i.grid.hDiv.loading=!1,h&&i.p.loadComplete.call(i,n),v(t-1)}:r.npage!==null&&delete i.p.postData[r.npage],i.p.grouping&&(n(i).jqGrid("groupingSetup"),i.p.groupingView.groupDataSorted===!0&&(f[r.sort]=i.p.groupingView.groupField[0]+" "+i.p.groupingView.groupOrder[0]+", "+f[r.sort])),n.extend(i.p.postData,f),l=i.p.scroll?i.rows.length-1:1,e=n(i).triggerHandler("jqGridBeforeRequest"),e===!1||e==="stop")return;if(n.isFunction(i.p.datatype)){i.p.datatype.call(i,i.p.postData,"load_"+i.p.id);return}if(n.isFunction(i.p.beforeRequest)&&(e=i.p.beforeRequest.call(i),e===undefined&&(e=!0),e===!1))return;c=i.p.datatype.toLowerCase();switch(c){case"json":case"jsonp":case"xml":case"script":n.ajax(n.extend({url:i.p.url,type:i.p.mtype,dataType:c,data:n.isFunction(i.p.serializeGridData)?i.p.serializeGridData.call(i,i.p.postData):i.p.postData,success:function(r,u,f){if(n.isFunction(i.p.beforeProcessing)&&i.p.beforeProcessing.call(i,r,u,f)===!1){k();return}c==="xml"?bt(r,i.grid.bDiv,l,t>1,a):lt(r,i.grid.bDiv,l,t>1,a),n(i).triggerHandler("jqGridLoadComplete",[r]),o&&o.call(i,r),n(i).triggerHandler("jqGridAfterLoadComplete",[r]),y&&i.grid.populateVisible(),(i.p.loadonce||i.p.treeGrid)&&(i.p.datatype="local"),r=null,t===1&&k()},error:function(r,u,f){n.isFunction(i.p.loadError)&&i.p.loadError.call(i,r,u,f),t===1&&k(),r=null},beforeSend:function(t,r){var u=!0;if(n.isFunction(i.p.loadBeforeSend)&&(u=i.p.loadBeforeSend.call(i,t,r)),u===undefined&&(u=!0),u===!1)return!1;st()}},n.jgrid.ajaxOptions,i.p.ajaxGridOptions));break;case"xmlstring":st(),u=n.jgrid.stringToDoc(i.p.datastr),bt(u,i.grid.bDiv),n(i).triggerHandler("jqGridLoadComplete",[u]),h&&i.p.loadComplete.call(i,u),n(i).triggerHandler("jqGridAfterLoadComplete",[u]),i.p.datatype="local",i.p.datastr=null,k();break;case"jsonstring":st(),u=typeof i.p.datastr=="string"?n.jgrid.parse(i.p.datastr):i.p.datastr,lt(u,i.grid.bDiv),n(i).triggerHandler("jqGridLoadComplete",[u]),h&&i.p.loadComplete.call(i,u),n(i).triggerHandler("jqGridAfterLoadComplete",[u]),i.p.datatype="local",i.p.datastr=null,k();break;case"local":case"clientside":st(),i.p.datatype="local",s=di(),lt(s,i.grid.bDiv,l,t>1,a),n(i).triggerHandler("jqGridLoadComplete",[s]),o&&o.call(i,s),n(i).triggerHandler("jqGridAfterLoadComplete",[s]),y&&i.grid.populateVisible(),k()}}},et=function(t){n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.hDiv)[i.p.useProp?"prop":"attr"]("checked",t);var r=i.p.frozenColumns?i.p.id+"_frozen":"";r&&n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.fhDiv)[i.p.useProp?"prop":"attr"]("checked",t)},hi=function(t,r){var p="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",c="",u="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",l="",f,w,b,k,e,d,s,a=function(t){var r;return(n.isFunction(i.p.onPaging)&&(r=i.p.onPaging.call(i,t)),i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],et(!1)),i.p.savedRow=[],r=="stop")?!1:!0},o;if(t=t.substr(1),r+="_"+t,f="pg_"+t,w=t+"_left",b=t+"_center",k=t+"_right",n("#"+n.jgrid.jqID(t)).append("<div id='"+f+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+w+"' align='left'></td><td id='"+b+"' align='center' style='white-space:pre;'></td><td id='"+k+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),i.p.rowList.length>0){for(l="<td dir='"+h+"'>",l+="<select class='ui-pg-selbox' role='listbox'>",s=0;s<i.p.rowList.length;s++)l+='<option role="option" value="'+i.p.rowList[s]+'"'+(i.p.rowNum==i.p.rowList[s]?' selected="selected"':"")+">"+i.p.rowList[s]+"</option>";l+="</select></td>"}h=="rtl"&&(u+=l),i.p.pginput===!0&&(c="<td dir='"+h+"'>"+n.jgrid.format(i.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+n.jgrid.jqID(t)+"'></span>")+"</td>"),i.p.pgbuttons===!0?(o=["first"+r,"prev"+r,"next"+r,"last"+r],h=="rtl"&&o.reverse(),u+="<td id='"+o[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",u+="<td id='"+o[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",u+=c!==""?p+c+p:"",u+="<td id='"+o[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>",u+="<td id='"+o[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"):c!==""&&(u+=c),h=="ltr"&&(u+=l),u+="</tr></tbody></table>",i.p.viewrecords===!0&&n("td#"+t+"_"+i.p.recordpos,"#"+f).append("<div dir='"+h+"' style='text-align:"+i.p.recordpos+"' class='ui-paging-info'></div>"),n("td#"+t+"_"+i.p.pagerpos,"#"+f).append(u),d=n(".ui-jqgrid").css("font-size")||"11px",n(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ></div>"),e=n(u).clone().appendTo("#testpg").width(),n("#testpg").remove(),e>0&&(c!==""&&(e+=50),n("td#"+t+"_"+i.p.pagerpos,"#"+f).width(e)),i.p._nvtd=[],i.p._nvtd[0]=e?Math.floor((i.p.width-e)/2):Math.floor(i.p.width/3),i.p._nvtd[1]=0,u=null,n(".ui-pg-selbox","#"+f).bind("change",function(){return(i.p.page=Math.round(i.p.rowNum*(i.p.page-1)/this.value-.5)+1,i.p.rowNum=this.value,i.p.pager&&n(".ui-pg-selbox",i.p.pager).val(this.value),i.p.toppager&&n(".ui-pg-selbox",i.p.toppager).val(this.value),!a("records"))?!1:(v(),!1)}),i.p.pgbuttons===!0&&(n(".ui-pg-button","#"+f).hover(function(){n(this).hasClass("ui-state-disabled")?this.style.cursor="default":(n(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){n(this).hasClass("ui-state-disabled")||(n(this).removeClass("ui-state-hover"),this.style.cursor="default")}),n("#first"+n.jgrid.jqID(r)+", #prev"+n.jgrid.jqID(r)+", #next"+n.jgrid.jqID(r)+", #last"+n.jgrid.jqID(r)).click(function(){var t=y(i.p.page,1),n=y(i.p.lastpage,1),u=!1,o=!0,s=!0,f=!0,e=!0;if(n===0||n===1?(o=!1,s=!1,f=!1,e=!1):n>1&&t>=1?t===1?(o=!1,s=!1):t===n&&(f=!1,e=!1):n>1&&t===0&&(f=!1,e=!1,t=n-1),this.id==="first"+r&&o&&(i.p.page=1,u=!0),this.id==="prev"+r&&s&&(i.p.page=t-1,u=!0),this.id==="next"+r&&f&&(i.p.page=t+1,u=!0),this.id==="last"+r&&e&&(i.p.page=n,u=!0),u){if(!a(this.id))return!1;v()}return!1})),i.p.pginput===!0&&n("input.ui-pg-input","#"+f).keypress(function(t){var r=t.charCode?t.charCode:t.keyCode?t.keyCode:0;return r==13?(i.p.page=n(this).val()>0?n(this).val():i.p.page,!a("user"))?!1:(v(),!1):this})},oi=function(t,r,u,f){var s,o,e,h;if(i.p.colModel[r].sortable&&!(i.p.savedRow.length>0)){if(u||(i.p.lastsort==r?i.p.sortorder=="asc"?i.p.sortorder="desc":i.p.sortorder=="desc"&&(i.p.sortorder="asc"):i.p.sortorder=i.p.colModel[r].firstsortorder||"asc",i.p.page=1),f)if(i.p.lastsort!=r||i.p.sortorder!=f||u)i.p.sortorder=f;else return;if(o=i.grid.headers[i.p.lastsort].el,e=i.grid.headers[r].el,n("span.ui-grid-ico-sort",o).addClass("ui-state-disabled"),n(o).attr("aria-selected","false"),n("span.ui-icon-"+i.p.sortorder,e).removeClass("ui-state-disabled"),n(e).attr("aria-selected","true"),i.p.viewsortcols[0]||i.p.lastsort!=r&&(n("span.s-ico",o).hide(),n("span.s-ico",e).show()),t=t.substring(5+i.p.id.length+1),i.p.sortname=i.p.colModel[r].index||t,s=i.p.sortorder,n(i).triggerHandler("jqGridSortCol",[t,r,s])==="stop"){i.p.lastsort=r;return}if(n.isFunction(i.p.onSortCol)&&i.p.onSortCol.call(i,t,r,s)=="stop"){i.p.lastsort=r;return}i.p.datatype=="local"?i.p.deselectAfterSort&&n(i).jqGrid("resetSelection"):(i.p.selrow=null,i.p.multiselect&&et(!1),i.p.selarrrow=[],i.p.savedRow=[]),i.p.scroll&&(h=i.grid.bDiv.scrollLeft,ut(i.grid.bDiv,!0,!1),i.grid.hDiv.scrollLeft=h),i.p.subGrid&&i.p.datatype=="local"&&n("td.sgexpanded","#"+n.jgrid.jqID(i.p.id)).each(function(){n(this).trigger("click")}),v(),i.p.lastsort=r,i.p.sortname!=t&&r&&(i.p.lastsort=r)}},ir=function(){var t=0,f=ni?0:y(i.p.cellLayout,0),u=0,h,c=y(i.p.scrollOffset,0),o,l=!1,a,e=0,v=0,s;n.each(i.p.colModel,function(){typeof this.hidden=="undefined"&&(this.hidden=!1),this.widthOrg=o=y(this.width,0),this.hidden===!1&&(t+=o+f,this.fixed?e+=o+f:u++,v++)}),isNaN(i.p.width)?i.p.width=r.width=t:r.width=i.p.width,i.p.tblwidth=t,i.p.shrinkToFit===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1),i.p.shrinkToFit===!0&&u>0&&(a=r.width-f*u-e,isNaN(i.p.height)||(a-=c,l=!0),t=0,n.each(i.p.colModel,function(n){this.hidden!==!1||this.fixed||(o=Math.round(a*this.width/(i.p.tblwidth-f*u-e)),this.width=o,t+=o,h=n)}),s=0,l?r.width-e-(t+f*u)!==c&&(s=r.width-e-(t+f*u)-c):l||Math.abs(r.width-e-(t+f*u))===1||(s=r.width-e-(t+f*u)),i.p.colModel[h].width+=s,i.p.tblwidth=t+s+f*u+e,i.p.tblwidth>i.p.width&&(i.p.colModel[h].width-=i.p.tblwidth-parseInt(i.p.width,10),i.p.tblwidth=i.p.width))},tr=function(n){for(var u=n,r=n,t=n+1;t<i.p.colModel.length;t++)if(i.p.colModel[t].hidden!==!0){r=t;break}return r-u},nr=function(t){var u,r={},f=ni?0:i.p.cellLayout;for(r[0]=r[1]=r[2]=0,u=0;u<=t;u++)i.p.colModel[u].hidden===!1&&(r[0]+=i.p.colModel[u].width+f);return i.p.direction=="rtl"&&(r[0]=i.p.width-r[0]),r[0]=r[0]-i.grid.bDiv.scrollLeft,n(i.grid.cDiv).is(":visible")&&(r[1]+=n(i.grid.cDiv).height()+parseInt(n(i.grid.cDiv).css("padding-top"),10)+parseInt(n(i.grid.cDiv).css("padding-bottom"),10)),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="top"||i.p.toolbar[1]=="both")&&(r[1]+=n(i.grid.uDiv).height()+parseInt(n(i.grid.uDiv).css("border-top-width"),10)+parseInt(n(i.grid.uDiv).css("border-bottom-width"),10)),i.p.toppager&&(r[1]+=n(i.grid.topDiv).height()+parseInt(n(i.grid.topDiv).css("border-bottom-width"),10)),r[2]+=n(i.grid.bDiv).height()+n(i.grid.hDiv).height(),r},ai=function(t){for(var f=i.grid.headers,u=n.jgrid.getCellIndex(t),r=0;r<f.length;r++)if(t===f[r].el){u=r;break}return u};for(this.p.id=this.id,n.inArray(i.p.multikey,gi)==-1&&(i.p.multikey=!1),i.p.keyIndex=!1,f=0;f<i.p.colModel.length;f++)i.p.colModel[f]=n.extend(!0,{},i.p.cmTemplate,i.p.colModel[f].template||{},i.p.colModel[f]),i.p.keyIndex===!1&&i.p.colModel[f].key===!0&&(i.p.keyIndex=f);if(i.p.sortorder=i.p.sortorder.toLowerCase(),i.p.grouping===!0&&(i.p.scroll=!1,i.p.rownumbers=!1,i.p.subGrid=!1,i.p.treeGrid=!1,i.p.gridview=!0),this.p.treeGrid===!0){try{n(this).jqGrid("setTreeGrid")}catch(fr){}i.p.datatype!="local"&&(i.p.localReader={id:"_id_"})}if(this.p.subGrid)try{n(i).jqGrid("setSubGrid")}catch(ur){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:ni?i.p.multiselectWidth+i.p.cellLayout:i.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:i.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),i.p.xmlReader=n.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},i.p.xmlReader),i.p.jsonReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.jsonReader),i.p.localReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.localReader),i.p.scroll&&(i.p.pgbuttons=!1,i.p.pginput=!1,i.p.rowList=[]),i.p.data.length&&dt();var a="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",bi,pi,at,g,ht,s,e,yi,ot,ii="",ui="";if(i.p.shrinkToFit===!0&&i.p.forceFit===!0)for(f=i.p.colModel.length-1;f>=0;f--)if(!i.p.colModel[f].hidden){i.p.colModel[f].resizable=!1;break}for(i.p.viewsortcols[1]=="horizontal"&&(ii=" ui-i-asc",ui=" ui-i-desc"),bi=rt?"class='ui-th-div-ie'":"",ot="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+ii+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+h+"'></span>",ot+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ui+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+h+"'></span></span>",f=0;f<this.p.colNames.length;f++)ei=i.p.headertitles?' title="'+n.jgrid.stripHtml(i.p.colNames[f])+'"':"",a+="<th id='"+i.p.id+"_"+i.p.colModel[f].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+h+"'"+ei+">",pi=i.p.colModel[f].index||i.p.colModel[f].name,a+="<div id='jqgh_"+i.p.id+"_"+i.p.colModel[f].name+"' "+bi+">"+i.p.colNames[f],i.p.colModel[f].width=i.p.colModel[f].width?parseInt(i.p.colModel[f].width,10):150,typeof i.p.colModel[f].title!="boolean"&&(i.p.colModel[f].title=!0),pi==i.p.sortname&&(i.p.lastsort=f),a+=ot+"</div></th>";if(a+="</tr></thead>",ot=null,n(this).append(a),n("thead tr:first th",this).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),this.p.multiselect&&(tt=[],n("#cb_"+n.jgrid.jqID(i.p.id),this).bind("click",function(){i.p.selarrrow=[];var t=i.p.frozenColumns===!0?i.p.id+"_frozen":"";this.checked?(n(i.rows).each(function(r){r>0&&(n(this).hasClass("ui-subgrid")||n(this).hasClass("jqgroup")||n(this).hasClass("ui-state-disabled")||(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!0),n(this).addClass("ui-state-highlight").attr("aria-selected","true"),i.p.selarrrow.push(this.id),i.p.selrow=this.id,t&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!0),n("#"+n.jgrid.jqID(this.id),i.grid.fbDiv).addClass("ui-state-highlight"))))}),b=!0,tt=[]):(n(i.rows).each(function(r){r>0&&(n(this).hasClass("ui-subgrid")||n(this).hasClass("ui-state-disabled")||(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!1),n(this).removeClass("ui-state-highlight").attr("aria-selected","false"),tt.push(this.id),t&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!1),n("#"+n.jgrid.jqID(this.id),i.grid.fbDiv).removeClass("ui-state-highlight"))))}),i.p.selrow=null,b=!1),n(i).triggerHandler("jqGridSelectAll",[b?i.p.selarrrow:tt,b]),n.isFunction(i.p.onSelectAll)&&i.p.onSelectAll.call(i,b?i.p.selarrrow:tt,b)})),i.p.autowidth===!0&&(yt=n(w).innerWidth(),i.p.width=yt>0?yt:"nw"),ir(),n(w).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+i.p.id+"'>&#160;</div>"),n(p).css("width",r.width+"px"),a=n("thead:first",i).get(0),ft="",i.p.footerrow&&(ft+="<table role='grid' style='width:"+i.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+h+"'>"),ti=n("tr:first",a),nt="<tr class='jqgfirstrow' role='row' style='height:auto'>",i.p.disableClick=!1,n("th",ti).each(function(t){var f,u;at=i.p.colModel[t].width,typeof i.p.colModel[t].resizable=="undefined"&&(i.p.colModel[t].resizable=!0),i.p.colModel[t].resizable?(g=document.createElement("span"),n(g).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+h),n.browser.opera||n(g).css("cursor","col-resize"),n(this).addClass(i.p.resizeclass)):g="",n(this).css("width",at+"px").prepend(g),f="",i.p.colModel[t].hidden&&(n(this).css("display","none"),f="display:none;"),nt+="<td role='gridcell' style='height:0px;width:"+at+"px;"+f+"'></td>",r.headers[t]={width:at,el:this},ht=i.p.colModel[t].sortable,typeof ht!="boolean"&&(i.p.colModel[t].sortable=!0,ht=!0),u=i.p.colModel[t].name,u=="cb"||u=="subgrid"||u=="rn"||i.p.viewsortcols[2]&&n(">div",this).addClass("ui-jqgrid-sortable"),ht&&(i.p.viewsortcols[0]?(n("div span.s-ico",this).show(),t==i.p.lastsort&&n("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled")):t==i.p.lastsort&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled"))),i.p.footerrow&&(ft+="<td role='gridcell' "+it(t,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(t){if(n(t.target).closest("th>span.ui-jqgrid-resize").length==1){var u=ai(this);return i.p.forceFit===!0&&(i.p.nv=tr(u)),r.dragStart(u,t,nr(u)),!1}}).click(function(t){var u,e,o,r,f;return i.p.disableClick?(i.p.disableClick=!1,!1):(u=">div.ui-jqgrid-sortable",i.p.viewsortcols[2]||(u=">div>span>span.ui-grid-ico-sort"),r=n(t.target).closest("th").find(u),r.length!=1)?void 0:(f=ai(this),i.p.viewsortcols[2]||(e=!0,o=r.attr("sort")),oi(n("div",this)[0].id,f,e,o),!1)}),i.p.sortable&&n.fn.sortable)try{n(i).jqGrid("sortableColumns",ti)}catch(rr){}i.p.footerrow&&(ft+="</tr></tbody></table>"),nt+="</tr>",yi=document.createElement("tbody"),this.appendChild(yi),n(this).addClass("ui-jqgrid-btable").append(nt),nt=null;var fi=n("<table class='ui-jqgrid-htable' style='width:"+i.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(a),c=i.p.caption&&i.p.hiddengrid===!0?!0:!1,d=n("<div class='ui-jqgrid-hbox"+(h=="rtl"?"-rtl":"")+"'></div>");a=null,r.hDiv=document.createElement("div"),n(r.hDiv).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(d),n(d).append(fi),fi=null,c&&n(r.hDiv).hide(),i.p.pager&&(typeof i.p.pager=="string"?i.p.pager.substr(0,1)!="#"&&(i.p.pager="#"+i.p.pager):i.p.pager="#"+n(i.p.pager).attr("id"),n(i.p.pager).css({width:r.width+"px"}).appendTo(w).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),c&&n(i.p.pager).hide(),hi(i.p.pager,"")),i.p.cellEdit===!1&&i.p.hoverrows===!0&&n(i).bind("mouseover",function(t){e=n(t.target).closest("tr.jqgrow"),n(e).attr("class")!=="ui-subgrid"&&n(e).addClass("ui-state-hover")}).bind("mouseout",function(t){e=n(t.target).closest("tr.jqgrow"),n(e).removeClass("ui-state-hover")}),n(i).before(r.hDiv).click(function(t){var u,r,f;if(s=t.target,e=n(s,i.rows).closest("tr.jqgrow"),n(e).length===0||e[0].className.indexOf("ui-state-disabled")>-1||(n(s,i).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==i.id)return this;if((u=n(s).hasClass("cbox"),r=n(i).triggerHandler("jqGridBeforeSelectRow",[e[0].id,t]),r=r===!1||r==="stop"?!1:!0,r&&n.isFunction(i.p.beforeSelectRow)&&(r=i.p.beforeSelectRow.call(i,e[0].id,t)),s.tagName!="A"&&(s.tagName!="INPUT"&&s.tagName!="TEXTAREA"&&s.tagName!="OPTION"&&s.tagName!="SELECT"||u))&&r===!0)if(o=e[0].id,l=n.jgrid.getCellIndex(s),kt=n(s).closest("td,th").html(),n(i).triggerHandler("jqGridCellSelect",[o,l,kt,t]),n.isFunction(i.p.onCellSelect)&&i.p.onCellSelect.call(i,o,l,kt,t),i.p.cellEdit===!0)if(i.p.multiselect&&u)n(i).jqGrid("setSelection",o,!0,t);else{o=e[0].rowIndex;try{n(i).jqGrid("editCell",o,l,!0)}catch(h){}}else i.p.multikey?t[i.p.multikey]?n(i).jqGrid("setSelection",o,!0,t):i.p.multiselect&&u&&(u=n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+o).is(":checked"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+o)[i.p.useProp?"prop":"attr"]("checked",u)):i.p.multiselect&&i.p.multiboxonly?u?n(i).jqGrid("setSelection",o,!0,t):(f=i.p.frozenColumns?i.p.id+"_frozen":"",n(i.p.selarrrow).each(function(t,r){var u=i.rows.namedItem(r);n(u).removeClass("ui-state-highlight"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1),f&&(n("#"+n.jgrid.jqID(r),"#"+n.jgrid.jqID(f)).removeClass("ui-state-highlight"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(r),"#"+n.jgrid.jqID(f))[i.p.useProp?"prop":"attr"]("checked",!1))}),i.p.selarrrow=[],n(i).jqGrid("setSelection",o,!0,t)):n(i).jqGrid("setSelection",o,!0,t)}).bind("reloadGrid",function(t,r){if(i.p.treeGrid===!0&&(i.p.datatype=i.p.treedatatype),r&&r.current&&i.grid.selectionPreserver(i),i.p.datatype=="local"?(n(i).jqGrid("resetSelection"),i.p.data.length&&dt()):i.p.treeGrid||(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],et(!1)),i.p.savedRow=[]),i.p.scroll&&ut(i.grid.bDiv,!0,!1),r&&r.page){var u=r.page;u>i.p.lastpage&&(u=i.p.lastpage),u<1&&(u=1),i.p.page=u,i.grid.bDiv.scrollTop=i.grid.prevRowHeight?(u-1)*i.grid.prevRowHeight*i.p.rowNum:0}return i.grid.prevRowHeight&&i.p.scroll?(delete i.p.lastpage,i.grid.populateVisible()):i.grid.populate(),!1}).dblclick(function(t){(s=t.target,e=n(s,i.rows).closest("tr.jqgrow"),n(e).length!==0)&&(o=e[0].rowIndex,l=n.jgrid.getCellIndex(s),n(i).triggerHandler("jqGridDblClickRow",[n(e).attr("id"),o,l,t]),n.isFunction(this.p.ondblClickRow)&&i.p.ondblClickRow.call(i,n(e).attr("id"),o,l,t))}).bind("contextmenu",function(t){(s=t.target,e=n(s,i.rows).closest("tr.jqgrow"),n(e).length!==0)&&(i.p.multiselect||n(i).jqGrid("setSelection",e[0].id,!0,t),o=e[0].rowIndex,l=n.jgrid.getCellIndex(s),n(i).triggerHandler("jqGridRightClickRow",[n(e).attr("id"),o,l,t]),n.isFunction(this.p.onRightClickRow)&&i.p.onRightClickRow.call(i,n(e).attr("id"),o,l,t))}),r.bDiv=document.createElement("div"),rt&&String(i.p.height).toLowerCase()==="auto"&&(i.p.height="100%"),n(r.bDiv).append(n('<div style="position:relative;'+(rt&&n.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:i.p.height+(isNaN(i.p.height)?"":"px"),width:r.width+"px"}).scroll(r.scrollGrid),n("table:first",r.bDiv).css({width:i.p.tblwidth+"px"}),rt?(n("tbody",this).size()==2&&n("tbody:gt(0)",this).remove(),i.p.multikey&&n(r.bDiv).bind("selectstart",function(){return!1})):i.p.multikey&&n(r.bDiv).bind("mousedown",function(){return!1}),c&&n(r.bDiv).hide(),r.cDiv=document.createElement("div"),vt=i.p.hidegrid===!0?n("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){vt.addClass("ui-state-hover")},function(){vt.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css(h=="rtl"?"left":"right","0px"):"",n(r.cDiv).append(vt).append("<span class='ui-jqgrid-title"+(h=="rtl"?"-rtl":"")+"'>"+i.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),n(r.cDiv).insertBefore(r.hDiv),i.p.toolbar[0]&&(r.uDiv=document.createElement("div"),i.p.toolbar[1]=="top"?n(r.uDiv).insertBefore(r.hDiv):i.p.toolbar[1]=="bottom"&&n(r.uDiv).insertAfter(r.hDiv),i.p.toolbar[1]=="both"?(r.ubDiv=document.createElement("div"),n(r.uDiv).insertBefore(r.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),n(r.ubDiv).insertAfter(r.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),c&&n(r.ubDiv).hide()):n(r.uDiv).width(r.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),c&&n(r.uDiv).hide()),i.p.toppager&&(i.p.toppager=n.jgrid.jqID(i.p.id)+"_toppager",r.topDiv=n("<div id='"+i.p.toppager+"'></div>")[0],i.p.toppager="#"+i.p.toppager,n(r.topDiv).insertBefore(r.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(r.width),hi(i.p.toppager,"_t")),i.p.footerrow&&(r.sDiv=n("<div class='ui-jqgrid-sdiv'></div>")[0],d=n("<div class='ui-jqgrid-hbox"+(h=="rtl"?"-rtl":"")+"'></div>"),n(r.sDiv).append(d).insertAfter(r.hDiv).width(r.width),n(d).append(ft),r.footers=n(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,i.p.rownumbers&&(r.footers[0].className="ui-state-default jqgrid-rownum"),c&&n(r.sDiv).hide()),d=null,i.p.caption?(ri=i.p.datatype,i.p.hidegrid===!0&&(n(".ui-jqgrid-titlebar-close",r.cDiv).click(function(t){var o=n.isFunction(i.p.onHeaderClick),f=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",u,e=this;return i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&(f+=", #"+n(r.ubDiv).attr("id")),f+=", #"+n(r.uDiv).attr("id")),u=n(f,"#gview_"+n.jgrid.jqID(i.p.id)).length,i.p.gridstate=="visible"?n(f,"#gbox_"+n.jgrid.jqID(i.p.id)).slideUp("fast",function(){u--,u===0&&(n("span",e).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden",n("#gbox_"+n.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+n.jgrid.jqID(i.p.id)).hide(),n(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,t]),o&&(c||i.p.onHeaderClick.call(i,i.p.gridstate,t)))}):i.p.gridstate=="hidden"&&n(f,"#gbox_"+n.jgrid.jqID(i.p.id)).slideDown("fast",function(){u--,u===0&&(n("span",e).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),c&&(i.p.datatype=ri,v(),c=!1),i.p.gridstate="visible",n("#gbox_"+n.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+n.jgrid.jqID(i.p.id)).show(),n(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,t]),o&&(c||i.p.onHeaderClick.call(i,i.p.gridstate,t)))}),!1}),c&&(i.p.datatype="local",n(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))):n(r.cDiv).hide(),n(r.hDiv).after(r.bDiv).mousemove(function(n){if(r.resizing)return r.dragMove(n),!1}),n(".ui-jqgrid-labels",r.hDiv).bind("selectstart",function(){return!1}),n(document).mouseup(function(){return r.resizing?(r.dragEnd(),!1):!0}),i.formatCol=it,i.sortData=oi,i.updatepager=ki,i.refreshIndex=dt,i.setHeadCheckBox=et,i.constructTr=gt,i.formatter=function(n,t,i,r,u){return wi(n,t,i,r,u)},n.extend(r,{populate:v,emptyRows:ut}),this.grid=r,i.addXmlData=function(n){bt(n,i.grid.bDiv)},i.addJSONData=function(n){lt(n,i.grid.bDiv)},this.grid.cols=this.rows[0].cells,v(),i.p.hiddengrid=!1,n(window).unload(function(){i=null})}})},n.jgrid.extend({getGridParam:function(n){var t=this[0];if(t&&t.grid)return n?typeof t.p[n]!="undefined"?t.p[n]:null:t.p},setGridParam:function(t){return this.each(function(){this.grid&&typeof t=="object"&&n.extend(!0,this.p,t)})},getDataIDs:function(){var u=[],i=0,t,r=0;return this.each(function(){if(t=this.rows.length,t&&t>0)while(i<t)n(this.rows[i]).hasClass("jqgrow")&&(u[r]=this.rows[i].id,r++),i++}),u},setSelection:function(t,i,r){return this.each(function(){function l(t){var f=n(u.grid.bDiv)[0].clientHeight,r=n(u.grid.bDiv)[0].scrollTop,i=u.rows[t].offsetTop,e=u.rows[t].clientHeight;i+e>=f+r?n(u.grid.bDiv)[0].scrollTop=i-(f+r)+e+r:i<f+r&&i<r&&(n(u.grid.bDiv)[0].scrollTop=i)}var u=this,e,f,c,s,h,o;t!==undefined&&((i=i===!1?!1:!0,f=u.rows.namedItem(t+""),!f||!f.className||f.className.indexOf("ui-state-disabled")>-1)||(u.p.scrollrows===!0&&(c=u.rows.namedItem(t).rowIndex,c>=0&&l(c)),u.p.frozenColumns===!0&&(o=u.p.id+"_frozen"),u.p.multiselect?(u.setHeadCheckBox(!1),u.p.selrow=f.id,s=n.inArray(u.p.selrow,u.p.selarrrow),s===-1?(f.className!=="ui-subgrid"&&n(f).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,u.p.selarrrow.push(u.p.selrow)):(f.className!=="ui-subgrid"&&n(f).removeClass("ui-state-highlight").attr("aria-selected","false"),e=!1,u.p.selarrrow.splice(s,1),h=u.p.selarrrow[0],u.p.selrow=h===undefined?null:h),n("#jqg_"+n.jgrid.jqID(u.p.id)+"_"+n.jgrid.jqID(f.id))[u.p.useProp?"prop":"attr"]("checked",e),o&&(s===-1?n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).addClass("ui-state-highlight"):n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).removeClass("ui-state-highlight"),n("#jqg_"+n.jgrid.jqID(u.p.id)+"_"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o))[u.p.useProp?"prop":"attr"]("checked",e)),n(u).triggerHandler("jqGridSelectRow",[f.id,e,r]),u.p.onSelectRow&&i&&u.p.onSelectRow.call(u,f.id,e,r)):f.className!=="ui-subgrid"&&(u.p.selrow!=f.id?(n(u.rows.namedItem(u.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),n(f).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),o&&(n("#"+n.jgrid.jqID(u.p.selrow),"#"+n.jgrid.jqID(o)).removeClass("ui-state-highlight"),n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).addClass("ui-state-highlight")),e=!0):e=!1,u.p.selrow=f.id,n(u).triggerHandler("jqGridSelectRow",[f.id,e,r]),u.p.onSelectRow&&i&&u.p.onSelectRow.call(u,f.id,e,r))))})},resetSelection:function(t){return this.each(function(){var i=this,f,u,r;i.p.frozenColumns===!0&&(r=i.p.id+"_frozen"),typeof t!="undefined"?(u=t===i.p.selrow?i.p.selrow:t,n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr#"+n.jgrid.jqID(u)).removeClass("ui-state-highlight").attr("aria-selected","false"),r&&n("#"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r)).removeClass("ui-state-highlight"),i.p.multiselect&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(i.p.id))[i.p.useProp?"prop":"attr"]("checked",!1),r&&n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1),i.setHeadCheckBox(!1)),u=null):i.p.multiselect?(n(i.p.selarrrow).each(function(t,u){f=i.rows.namedItem(u),n(f).removeClass("ui-state-highlight").attr("aria-selected","false"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u))[i.p.useProp?"prop":"attr"]("checked",!1),r&&(n("#"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r)).removeClass("ui-state-highlight"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1))}),i.setHeadCheckBox(!1),i.p.selarrrow=[]):i.p.selrow&&(n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr#"+n.jgrid.jqID(i.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),r&&n("#"+n.jgrid.jqID(i.p.selrow),"#"+n.jgrid.jqID(r)).removeClass("ui-state-highlight"),i.p.selrow=null),i.p.cellEdit===!0&&parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0&&(n("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight"),n(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")),i.p.savedRow=[]})},getRowData:function(t){var i={},r,e=!1,f,u=0;return this.each(function(){var s=this,o,h;if(typeof t=="undefined")e=!0,r=[],f=s.rows.length;else{if(h=s.rows.namedItem(t),!h)return i;f=2}while(u<f)e&&(h=s.rows[u]),n(h).hasClass("jqgrow")&&(n('td[role="gridcell"]',h).each(function(t){if(o=s.p.colModel[t].name,o!=="cb"&&o!=="subgrid"&&o!=="rn")if(s.p.treeGrid===!0&&o==s.p.ExpandColumn)i[o]=n.jgrid.htmlDecode(n("span:first",this).html());else try{i[o]=n.unformat.call(s,this,{rowId:h.id,colModel:s.p.colModel[t]},t)}catch(r){i[o]=n.jgrid.htmlDecode(n(this).html())}}),e&&(r.push(i),i={})),u++}),r?r:i},delRowData:function(t){var u=!1,i,r,f;return this.each(function(){var e=this,h,o,s;if(i=e.rows.namedItem(t),i)f=i.rowIndex,n(i).remove(),e.p.records--,e.p.reccount--,e.updatepager(!0,!1),u=!0,e.p.multiselect&&(r=n.inArray(t,e.p.selarrrow),r!=-1&&e.p.selarrrow.splice(r,1)),t==e.p.selrow&&(e.p.selrow=null);else return!1;e.p.datatype=="local"&&(h=n.jgrid.stripPref(e.p.idPrefix,t),o=e.p._index[h],typeof o!="undefined"&&(e.p.data.splice(o,1),e.refreshIndex())),e.p.altRows===!0&&u&&(s=e.p.altclass,n(e.rows).each(function(t){t%2==1?n(this).addClass(s):n(this).removeClass(s)}))}),u},setRowData:function(t,i,r){var u,e=!0,f;return this.each(function(){var y,c,a;if(!this.grid)return!1;var o=this,l,s,v=typeof r,h={};if(s=o.rows.namedItem(t),!s)return!1;if(i)try{if(n(this.p.colModel).each(function(r){u=this.name,i[u]!==undefined&&(h[u]=this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?n.unformat.date.call(o,i[u],this):i[u],l=o.formatter(t,i[u],r,i,"edit"),f=this.title?{title:n.jgrid.stripHtml(l)}:{},o.p.treeGrid===!0&&u==o.p.ExpandColumn?n("td:eq("+r+") > span:first",s).html(l).attr(f):n("td:eq("+r+")",s).html(l).attr(f))}),o.p.datatype=="local"){if(y=n.jgrid.stripPref(o.p.idPrefix,t),c=o.p._index[y],o.p.treeGrid)for(a in o.p.treeReader)h.hasOwnProperty(o.p.treeReader[a])&&delete h[o.p.treeReader[a]];typeof c!="undefined"&&(o.p.data[c]=n.extend(!0,o.p.data[c],h)),h=null}}catch(p){e=!1}e&&(v==="string"?n(s).addClass(r):v==="object"&&n(s).css(r),n(o).triggerHandler("jqGridAfterGridComplete"))}),e},addRowData:function(t,i,r,u){r||(r="last");var g=!1,l,f,v,k,s,e,h,w,a="",b,y,p,o,c,d;return i&&(n.isArray(i)?(b=!0,r="last",y=t):(i=[i],b=!1),this.each(function(){var nt=this,ft=i.length;s=nt.p.rownumbers===!0?1:0,v=nt.p.multiselect===!0?1:0,k=nt.p.subGrid===!0?1:0,b||(typeof t!="undefined"?t=t+"":(t=n.jgrid.randId(),nt.p.keyIndex!==!1&&(y=nt.p.colModel[nt.p.keyIndex+v+k+s].name,typeof i[0][y]!="undefined"&&(t=i[0][y])))),p=nt.p.altclass;for(var it=0,rt="",tt={},ut=n.isFunction(nt.p.afterInsertRow)?!0:!1;it<ft;){if(o=i[it],f=[],b){try{t=o[y]}catch(et){t=n.jgrid.randId()}rt=nt.p.altRows===!0?(nt.rows.length-1)%2==0?p:"":""}for(d=t,t=nt.p.idPrefix+t,s&&(a=nt.formatCol(0,1,"",null,t,!0),f[f.length]='<td role="gridcell" aria-describedby="'+nt.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+a+">0</td>"),v&&(w='<input role="checkbox" type="checkbox" id="jqg_'+nt.p.id+"_"+t+'" class="cbox"/>',a=nt.formatCol(s,1,"",null,t,!0),f[f.length]='<td role="gridcell" aria-describedby="'+nt.p.id+'_cb" '+a+">"+w+"</td>"),k&&(f[f.length]=n(nt).jqGrid("addSubGridCell",v+s,1)),h=v+k+s;h<nt.p.colModel.length;h++)c=nt.p.colModel[h],l=c.name,tt[l]=c.formatter&&typeof c.formatter=="string"&&c.formatter=="date"?n.unformat.date.call(nt,o[l],c):o[l],w=nt.formatter(t,n.jgrid.getAccessor(o,l),h,o,"edit"),a=nt.formatCol(h,1,w,o,t,!0),f[f.length]='<td role="gridcell" aria-describedby="'+nt.p.id+"_"+l+'" '+a+">"+w+"</td>";if(f.unshift(nt.constructTr(t,!1,rt,tt,tt)),f[f.length]="</tr>",nt.rows.length===0)n("table:first",nt.grid.bDiv).append(f.join(""));else switch(r){case"last":n(nt.rows[nt.rows.length-1]).after(f.join("")),e=nt.rows.length-1;break;case"first":n(nt.rows[0]).after(f.join("")),e=1;break;case"after":e=nt.rows.namedItem(u),e&&(n(nt.rows[e.rowIndex+1]).hasClass("ui-subgrid")?n(nt.rows[e.rowIndex+1]).after(f):n(e).after(f.join(""))),e++;break;case"before":e=nt.rows.namedItem(u),e&&(n(e).before(f.join("")),e=e.rowIndex),e--}nt.p.subGrid===!0&&n(nt).jqGrid("addSubGrid",v+s,e),nt.p.records++,nt.p.reccount++,n(nt).triggerHandler("jqGridAfterInsertRow",[t,o,o]),ut&&nt.p.afterInsertRow.call(nt,t,o,o),it++,nt.p.datatype=="local"&&(tt[nt.p.localReader.id]=d,nt.p._index[d]=nt.p.data.length,nt.p.data.push(tt),tt={})}nt.p.altRows!==!0||b||(r=="last"?(nt.rows.length-1)%2==1&&n(nt.rows[nt.rows.length-1]).addClass(p):n(nt.rows).each(function(t){t%2==1?n(this).addClass(p):n(this).removeClass(p)})),nt.updatepager(!0,!0),g=!0})),g},footerData:function(t,i,r){function s(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var u,f=!1,o={},e;return typeof t=="undefined"&&(t="get"),typeof r!="boolean"&&(r=!0),t=t.toLowerCase(),this.each(function(){var h=this,c;if(!h.grid||!h.p.footerrow||t=="set"&&s(i))return!1;f=!0,n(this.p.colModel).each(function(s){u=this.name,t=="set"?i[u]!==undefined&&(c=r?h.formatter("",i[u],s,i,"edit"):i[u],e=this.title?{title:n.jgrid.stripHtml(c)}:{},n("tr.footrow td:eq("+s+")",h.grid.sDiv).html(c).attr(e),f=!0):t=="get"&&(o[u]=n("tr.footrow td:eq("+s+")",h.grid.sDiv).html())})}),t=="get"?o:f},showHideCol:function(t,i){return this.each(function(){var r=this,s=!1,o=(n.browser.webkit||n.browser.safari)&&parseFloat(n.browser.version)<536.5?0:r.p.cellLayout,f,u,e;r.grid&&(typeof t=="string"&&(t=[t]),i=i!="none"?"":"none",u=i===""?!0:!1,e=r.p.groupHeader&&(typeof r.p.groupHeader=="object"||n.isFunction(r.p.groupHeader)),e&&n(r).jqGrid("destroyGroupHeader",!1),n(this.p.colModel).each(function(e){if(n.inArray(this.name,t)!==-1&&this.hidden===u){if(r.p.frozenColumns===!0&&this.frozen===!0)return!0;n("tr",r.grid.hDiv).each(function(){n(this.cells[e]).css("display",i)}),n(r.rows).each(function(){n(this).hasClass("jqgroup")||n(this.cells[e]).css("display",i)}),r.p.footerrow&&n("tr.footrow td:eq("+e+")",r.grid.sDiv).css("display",i),f=this.widthOrg&&r.p.shrinkToFit?this.widthOrg:parseInt(this.width,10),i==="none"?r.p.tblwidth-=f+o:r.p.tblwidth+=f+o,this.hidden=!u,s=!0,n(r).triggerHandler("jqGridShowHideCol",[u,this.name,e])}}),s===!0&&n(r).jqGrid("setGridWidth",r.p.tblwidth),e&&n(r).jqGrid("setGroupHeaders",r.p.groupHeader))})},hideCol:function(t){return this.each(function(){n(this).jqGrid("showHideCol",t,"none")})},showCol:function(t){return this.each(function(){n(this).jqGrid("showHideCol",t,"")})},remapColumns:function(t,i,r){function f(i){var r;r=i.length?n.makeArray(i):n.extend({},i),n.each(t,function(n){i[n]=r[this]})}function e(i,r){n(">tr"+(r||""),i).each(function(){var i=this,r=n.makeArray(i.cells);n.each(t,function(){var n=r[this];n&&i.appendChild(n)})})}var u=this.get(0);f(u.p.colModel),f(u.p.colNames),f(u.grid.headers),e(n("thead:first",u.grid.hDiv),r&&":not(.ui-jqgrid-labels)"),i&&e(n("#"+n.jgrid.jqID(u.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),u.p.footerrow&&e(n("tbody:first",u.grid.sDiv)),u.p.remapColumns&&(u.p.remapColumns.length?f(u.p.remapColumns):u.p.remapColumns=n.makeArray(t)),u.p.lastsort=n.inArray(u.p.lastsort,t),u.p.treeGrid&&(u.p.expColInd=n.inArray(u.p.expColInd,t)),n(u).triggerHandler("jqGridRemapColumns",[t,i,r])},setGridWidth:function(t,i){return this.each(function(){var l,y;if(this.grid){var r=this,u,o=0,s=(n.browser.webkit||n.browser.safari)&&parseFloat(n.browser.version)<536.5?0:r.p.cellLayout,f,e=0,p=!1,a=r.p.scrollOffset,v,h=0,w=0,c;if(typeof i!="boolean"&&(i=r.p.shrinkToFit),!isNaN(t)){if(t=parseInt(t,10),r.grid.width=r.p.width=t,n("#gbox_"+n.jgrid.jqID(r.p.id)).css("width",t+"px"),n("#gview_"+n.jgrid.jqID(r.p.id)).css("width",t+"px"),n(r.grid.bDiv).css("width",t+"px"),n(r.grid.hDiv).css("width",t+"px"),r.p.pager&&n(r.p.pager).css("width",t+"px"),r.p.toppager&&n(r.p.toppager).css("width",t+"px"),r.p.toolbar[0]===!0&&(n(r.grid.uDiv).css("width",t+"px"),r.p.toolbar[1]=="both"&&n(r.grid.ubDiv).css("width",t+"px")),r.p.footerrow&&n(r.grid.sDiv).css("width",t+"px"),i===!1&&r.p.forceFit===!0&&(r.p.forceFit=!1),i===!0){if(n.each(r.p.colModel,function(){this.hidden===!1&&(u=this.widthOrg?this.widthOrg:parseInt(this.width,10),o+=u+s,this.fixed?h+=u+s:e++,w++)}),e===0)return;if(r.p.tblwidth=o,v=t-s*e-h,isNaN(r.p.height)||(n(r.grid.bDiv)[0].clientHeight<n(r.grid.bDiv)[0].scrollHeight||r.rows.length===1)&&(p=!0,v-=a),o=0,l=r.grid.cols.length>0,n.each(r.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(u=this.widthOrg?this.widthOrg:parseInt(this.width,10),u=Math.round(v*u/(r.p.tblwidth-s*e-h)),u<0)return;this.width=u,o+=u,r.grid.headers[n].width=u,r.grid.headers[n].el.style.width=u+"px",r.p.footerrow&&(r.grid.footers[n].style.width=u+"px"),l&&(r.grid.cols[n].style.width=u+"px"),f=n}}),!f)return;c=0,p?t-h-(o+s*e)!==a&&(c=t-h-(o+s*e)-a):Math.abs(t-h-(o+s*e))!==1&&(c=t-h-(o+s*e)),r.p.colModel[f].width+=c,r.p.tblwidth=o+c+s*e+h,r.p.tblwidth>t?(y=r.p.tblwidth-parseInt(t,10),r.p.tblwidth=t,u=r.p.colModel[f].width=r.p.colModel[f].width-y):u=r.p.colModel[f].width,r.grid.headers[f].width=u,r.grid.headers[f].el.style.width=u+"px",l&&(r.grid.cols[f].style.width=u+"px"),r.p.footerrow&&(r.grid.footers[f].style.width=u+"px")}r.p.tblwidth&&(n("table:first",r.grid.bDiv).css("width",r.p.tblwidth+"px"),n("table:first",r.grid.hDiv).css("width",r.p.tblwidth+"px"),r.grid.hDiv.scrollLeft=r.grid.bDiv.scrollLeft,r.p.footerrow&&n("table:first",r.grid.sDiv).css("width",r.p.tblwidth+"px"))}}})},setGridHeight:function(t){return this.each(function(){var i=this,r;i.grid&&(r=n(i.grid.bDiv),r.css({height:t+(isNaN(t)?"":"px")}),i.p.frozenColumns===!0&&n("#"+n.jgrid.jqID(i.p.id)+"_frozen").parent().height(r.height()-16),i.p.height=t,i.p.scroll&&i.grid.populateVisible())})},setCaption:function(t){return this.each(function(){this.p.caption=t,n("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(t),n(this.grid.cDiv).show()})},setLabel:function(t,i,r,u){return this.each(function(){var o=this,e=-1,f,s;if(o.grid){if(typeof t!="undefined")n(o.p.colModel).each(function(n){if(this.name==t)return e=n,!1});else return;e>=0&&(f=n("tr.ui-jqgrid-labels th:eq("+e+")",o.grid.hDiv),i&&(s=n(".s-ico",f),n("[id^=jqgh_]",f).empty().html(i).append(s),o.p.colNames[e]=i),r&&(typeof r=="string"?n(f).addClass(r):n(f).css(r)),typeof u=="object"&&n(f).attr(u))}})},setCell:function(t,i,r,u,f,e){return this.each(function(){var o=this,h=-1,l,y,a,s,c,v;o.grid&&(isNaN(i)?n(o.p.colModel).each(function(n){if(this.name==i)return h=n,!1}):h=parseInt(i,10),h>=0&&(a=o.rows.namedItem(t),a&&(s=n("td:eq("+h+")",a),(r!==""||e===!0)&&(l=o.formatter(t,r,h,a,"edit"),y=o.p.colModel[h].title?{title:n.jgrid.stripHtml(l)}:{},o.p.treeGrid&&n(".tree-wrap",n(s)).length>0?n("span",n(s)).html(l).attr(y):n(s).html(l).attr(y),o.p.datatype=="local"&&(c=o.p.colModel[h],r=c.formatter&&typeof c.formatter=="string"&&c.formatter=="date"?n.unformat.date.call(o,r,c):r,v=o.p._index[t],typeof v!="undefined"&&(o.p.data[v][c.name]=r))),typeof u=="string"?n(s).addClass(u):u&&n(s).css(u),typeof f=="object"&&n(s).attr(f))))})},getCell:function(t,i){var r=!1;return this.each(function(){var e=this,u=-1,f;if(e.grid&&(isNaN(i)?n(e.p.colModel).each(function(n){if(this.name===i)return u=n,!1}):u=parseInt(i,10),u>=0&&(f=e.rows.namedItem(t),f)))try{r=n.unformat.call(e,n("td:eq("+u+")",f),{rowId:f.id,colModel:e.p.colModel[u]},u)}catch(o){r=n.jgrid.htmlDecode(n("td:eq("+u+")",f).html())}}),r},getCol:function(t,i,r){var u=[],e,h=0,s,o,f;return i=typeof i!="boolean"?!1:i,typeof r=="undefined"&&(r=!1),this.each(function(){var c=this,a=-1,v,l;if(c.grid&&(isNaN(t)?n(c.p.colModel).each(function(n){if(this.name===t)return a=n,!1}):a=parseInt(t,10),a>=0&&(v=c.rows.length,l=0,v&&v>0))){while(l<v){if(n(c.rows[l]).hasClass("jqgrow")){try{e=n.unformat.call(c,n(c.rows[l].cells[a]),{rowId:c.rows[l].id,colModel:c.p.colModel[a]},a)}catch(y){e=n.jgrid.htmlDecode(c.rows[l].cells[a].innerHTML)}r?(f=parseFloat(e),h+=f,l===0?(s=f,o=f):(s=Math.min(s,f),o=Math.max(o,f))):i?u.push({id:c.rows[l].id,value:e}):u.push(e)}l++}if(r)switch(r.toLowerCase()){case"sum":u=h;break;case"avg":u=h/v;break;case"count":u=v;break;case"min":u=s;break;case"max":u=o}}}),u},clearGridData:function(t){return this.each(function(){var i=this,r;i.grid&&(typeof t!="boolean"&&(t=!1),i.p.deepempty?n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:gt(0)").remove():(r=n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:first")[0],n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").empty().append(r)),i.p.footerrow&&t&&n(".ui-jqgrid-ftable td",i.grid.sDiv).html("&#160;"),i.p.selrow=null,i.p.selarrrow=[],i.p.savedRow=[],i.p.records=0,i.p.page=1,i.p.lastpage=0,i.p.reccount=0,i.p.data=[],i.p._index={},i.updatepager(!0,!1))})},getInd:function(n,t){var r=!1,i;return this.each(function(){i=this.rows.namedItem(n),i&&(r=t===!0?i:i.rowIndex)}),r},bindKeys:function(t){var i=n.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},t||{});return this.each(function(){var t=this;n("body").is("[role]")||n("body").attr("role","application"),t.p.scrollrows=i.scrollingRows,n(t).keydown(function(r){var e=n(t).find("tr[tabindex=0]")[0],f,u,o,s=t.p.treeReader.expanded_field;if(e)if(o=t.p._index[e.id],r.keyCode===37||r.keyCode===38||r.keyCode===39||r.keyCode===40){if(r.keyCode===38){if(u=e.previousSibling,f="",u)if(n(u).is(":hidden")){while(u)if(u=u.previousSibling,!n(u).is(":hidden")&&n(u).hasClass("jqgrow")){f=u.id;break}}else f=u.id;n(t).jqGrid("setSelection",f,!0,r)}if(r.keyCode===40){if(u=e.nextSibling,f="",u)if(n(u).is(":hidden")){while(u)if(u=u.nextSibling,!n(u).is(":hidden")&&n(u).hasClass("jqgrow")){f=u.id;break}}else f=u.id;n(t).jqGrid("setSelection",f,!0,r)}r.keyCode===37&&(t.p.treeGrid&&t.p.data[o][s]&&n(e).find("div.treeclick").trigger("click"),n(t).triggerHandler("jqGridKeyLeft",[t.p.selrow]),n.isFunction(i.onLeftKey)&&i.onLeftKey.call(t,t.p.selrow)),r.keyCode===39&&(t.p.treeGrid&&!t.p.data[o][s]&&n(e).find("div.treeclick").trigger("click"),n(t).triggerHandler("jqGridKeyRight",[t.p.selrow]),n.isFunction(i.onRightKey)&&i.onRightKey.call(t,t.p.selrow))}else r.keyCode===13?(n(t).triggerHandler("jqGridKeyEnter",[t.p.selrow]),n.isFunction(i.onEnter)&&i.onEnter.call(t,t.p.selrow)):r.keyCode===32&&(n(t).triggerHandler("jqGridKeySpace",[t.p.selrow]),n.isFunction(i.onSpace)&&i.onSpace.call(t,t.p.selrow))})})},unbindKeys:function(){return this.each(function(){n(this).unbind("keydown")})},getLocalRow:function(n){var i=!1,t;return this.each(function(){typeof n!="undefined"&&(t=this.p._index[n],t>=0&&(i=this.p.data[t]))}),i}})})(jQuery),function(n){"use strict";n.jgrid.extend({getColProp:function(n){var u={},r=this[0],i,t;if(!r.grid)return!1;for(i=r.p.colModel,t=0;t<i.length;t++)if(i[t].name==n){u=i[t];break}return u},setColProp:function(t,i){return this.each(function(){var u,r;if(this.grid&&i)for(u=this.p.colModel,r=0;r<u.length;r++)if(u[r].name==t){n.extend(this.p.colModel[r],i);break}})},sortGrid:function(n,t,i){return this.each(function(){var r=this,e=-1,u,f;if(r.grid){for(n||(n=r.p.sortname),u=0;u<r.p.colModel.length;u++)if(r.p.colModel[u].index==n||r.p.colModel[u].name==n){e=u;break}e!=-1&&(f=r.p.colModel[e].sortable,typeof f!="boolean"&&(f=!0),typeof t!="boolean"&&(t=!1),f&&r.sortData("jqgh_"+r.p.id+"_"+n,e,t,i))}})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&n(this.p.pager).remove();try{n("#gbox_"+n.jgrid.jqID(this.id)).remove()}catch(t){}}})},GridUnload:function(){return this.each(function(){var r,i,t;this.grid&&(r={id:n(this).attr("id"),cl:n(this).attr("class")},this.p.pager&&n(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom"),i=document.createElement("table"),n(i).attr({id:r.id}),i.className=r.cl,t=n.jgrid.jqID(this.id),n(i).removeClass("ui-jqgrid-btable"),n(this.p.pager).parents("#gbox_"+t).length===1?(n(i).insertBefore("#gbox_"+t).show(),n(this.p.pager).insertBefore("#gbox_"+t)):n(i).insertBefore("#gbox_"+t).show(),n("#gbox_"+t).remove())})},setGridState:function(t){return this.each(function(){if(this.grid){var i=this;t=="hidden"?(n(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+n.jgrid.jqID(i.p.id)).slideUp("fast"),i.p.pager&&n(i.p.pager).slideUp("fast"),i.p.toppager&&n(i.p.toppager).slideUp("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&n(i.grid.ubDiv).slideUp("fast"),n(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+n.jgrid.jqID(i.p.id)).slideUp("fast"),n(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden"):t=="visible"&&(n(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+n.jgrid.jqID(i.p.id)).slideDown("fast"),i.p.pager&&n(i.p.pager).slideDown("fast"),i.p.toppager&&n(i.p.toppager).slideDown("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]=="both"&&n(i.grid.ubDiv).slideDown("fast"),n(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+n.jgrid.jqID(i.p.id)).slideDown("fast"),n(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),i.p.gridstate="visible")}})},filterToolbar:function(t){return t=n.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},t||{}),this.each(function(){function u(t,i){var r=n(t);r[0]&&jQuery.each(i,function(){this.data!==undefined?r.bind(this.type,this.data,this.fn):r.bind(this.type,this.fn)})}var i=this,f,e;if(!this.ftoolbar){var r=function(){var s={},c=0,h,u,a={},l,v,r,e,o,f;n.each(i.p.colModel,function(){if(u=this.index||this.name,l=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:this.stype=="select"?"eq":t.defaultSearch,h=n("#gs_"+n.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv).val(),h)s[u]=h,a[u]=l,c++;else try{delete i.p.postData[u]}catch(r){}}),v=c>0?!0:!1,t.stringResult===!0||i.p.datatype=="local"?(r='{"groupOp":"'+t.groupOp+'","rules":[',e=0,n.each(s,function(n,t){e>0&&(r+=","),r+='{"field":"'+n+'",',r+='"op":"'+a[n]+'",',t+="",r+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',e++}),r+="]}",n.extend(i.p.postData,{filters:r}),n.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):n.extend(i.p.postData,s),i.p.searchurl&&(o=i.p.url,n(i).jqGrid("setGridParam",{url:i.p.searchurl})),f=n(i).triggerHandler("jqGridToolbarBeforeSearch")==="stop"?!0:!1,!f&&n.isFunction(t.beforeSearch)&&(f=t.beforeSearch.call(i)),f||n(i).jqGrid("setGridParam",{search:v}).trigger("reloadGrid",[{page:1}]),o&&n(i).jqGrid("setGridParam",{url:o}),n(i).triggerHandler("jqGridToolbarAfterSearch"),n.isFunction(t.afterSearch)&&t.afterSearch.call(i)},s=function(r){var o={},c=0,f,l,u,h,s,e;r=typeof r!="boolean"?!0:r,n.each(i.p.colModel,function(){var t;this.searchoptions&&this.searchoptions.defaultValue!==undefined&&(t=this.searchoptions.defaultValue),f=this.index||this.name;switch(this.stype){case"select":if(n("#gs_"+n.jgrid.jqID(this.name)+" option",this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv).each(function(i){return i===0&&(this.selected=!0),n(this).val()==t?(this.selected=!0,!1):void 0}),t!==undefined)o[f]=t,c++;else try{delete i.p.postData[f]}catch(u){}break;case"text":if(n("#gs_"+n.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv).val(t),t!==undefined)o[f]=t,c++;else try{delete i.p.postData[f]}catch(r){}}}),l=c>0?!0:!1,t.stringResult===!0||i.p.datatype=="local"?(u='{"groupOp":"'+t.groupOp+'","rules":[',h=0,n.each(o,function(n,t){h>0&&(u+=","),u+='{"field":"'+n+'",',u+='"op":"eq",',t+="",u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',h++}),u+="]}",n.extend(i.p.postData,{filters:u}),n.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):n.extend(i.p.postData,o),i.p.searchurl&&(s=i.p.url,n(i).jqGrid("setGridParam",{url:i.p.searchurl})),e=n(i).triggerHandler("jqGridToolbarBeforeClear")==="stop"?!0:!1,!e&&n.isFunction(t.beforeClear)&&(e=t.beforeClear.call(i)),e||r&&n(i).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]),s&&n(i).jqGrid("setGridParam",{url:s}),n(i).triggerHandler("jqGridToolbarAfterClear"),n.isFunction(t.afterClear)&&t.afterClear()},o=function(){var r=n("tr.ui-search-toolbar",i.grid.hDiv),t=i.p.frozenColumns===!0?n("tr.ui-search-toolbar",i.grid.fhDiv):!1;r.css("display")=="none"?(r.show(),t&&t.show()):(r.hide(),t&&t.hide())};f=n("<tr class='ui-search-toolbar' role='rowheader'></tr>"),n.each(i.p.colModel,function(){var s=this,l,w,o,d,c,a,k,nt,h,g,b,v,y,p,tt;if(w=n("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+i.p.direction+"'></th>"),l=n("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>"),this.hidden===!0&&n(w).css("display","none"),this.search=this.search===!1?!1:!0,typeof this.stype=="undefined"&&(this.stype="text"),o=n.extend({},this.searchoptions||{}),this.search)switch(this.stype){case"select":if(d=this.surl||o.dataUrl,d)c=l,n.ajax(n.extend({url:d,dataType:"html",success:function(i){if(o.buildSelect!==undefined){var f=o.buildSelect(i);f&&n(c).append(f)}else n(c).append(i);o.defaultValue!==undefined&&n("select",c).val(o.defaultValue),n("select",c).attr({name:s.index||s.name,id:"gs_"+s.name}),o.attr&&n("select",c).attr(o.attr),n("select",c).css({width:"100%"}),o.dataInit!==undefined&&o.dataInit(n("select",c)[0]),o.dataEvents!==undefined&&u(n("select",c)[0],o.dataEvents),t.autosearch===!0&&n("select",c).change(function(){return r(),!1}),i=null}},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));else if(s.searchoptions?(a=s.searchoptions.value===undefined?"":s.searchoptions.value,k=s.searchoptions.separator===undefined?":":s.searchoptions.separator,nt=s.searchoptions.delimiter===undefined?";":s.searchoptions.delimiter):s.editoptions&&(a=s.editoptions.value===undefined?"":s.editoptions.value,k=s.editoptions.separator===undefined?":":s.editoptions.separator,nt=s.editoptions.delimiter===undefined?";":s.editoptions.delimiter),a){if(h=document.createElement("select"),h.style.width="100%",n(h).attr({name:s.index||s.name,id:"gs_"+s.name}),typeof a=="string")for(g=a.split(nt),y=0;y<g.length;y++)b=g[y].split(k),v=document.createElement("option"),v.value=b[0],v.innerHTML=b[1],h.appendChild(v);else if(typeof a=="object")for(p in a)a.hasOwnProperty(p)&&(v=document.createElement("option"),v.value=p,v.innerHTML=a[p],h.appendChild(v));o.defaultValue!==undefined&&n(h).val(o.defaultValue),o.attr&&n(h).attr(o.attr),o.dataInit!==undefined&&o.dataInit(h),o.dataEvents!==undefined&&u(h,o.dataEvents),n(l).append(h),t.autosearch===!0&&n(h).change(function(){return r(),!1})}break;case"text":tt=o.defaultValue!==undefined?o.defaultValue:"",n(l).append("<input type='text' style='width:95%;padding:0px;' name='"+(s.index||s.name)+"' id='gs_"+s.name+"' value='"+tt+"'/>"),o.attr&&n("input",l).attr(o.attr),o.dataInit!==undefined&&o.dataInit(n("input",l)[0]),o.dataEvents!==undefined&&u(n("input",l)[0],o.dataEvents),t.autosearch===!0&&(t.searchOnEnter?n("input",l).keypress(function(n){var t=n.charCode?n.charCode:n.keyCode?n.keyCode:0;return t==13?(r(),!1):this}):n("input",l).keydown(function(n){var t=n.which;switch(t){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:e&&clearTimeout(e),e=setTimeout(function(){r()},500)}}))}n(w).append(l),n(f).append(w)}),n("table thead",i.grid.hDiv).append(f),this.ftoolbar=!0,this.triggerToolbar=r,this.clearToolbar=s,this.toggleToolbar=o}})},destroyGroupHeader:function(t){return typeof t=="undefined"&&(t=!0),this.each(function(){var o=this,s,i,l,u,r,e,f=o.grid,c=n("table.ui-jqgrid-htable thead",f.hDiv),a=o.p.colModel,h;if(f){for(n(this).unbind(".setGroupHeaders"),s=n("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),u=f.headers,i=0,l=u.length;i<l;i++){h=a[i].hidden?"none":"",r=n(u[i].el).width(u[i].width).css("display",h);try{r.removeAttr("rowSpan")}catch(v){r.attr("rowSpan",1)}s.append(r),e=r.children("span.ui-jqgrid-resize"),e.length>0&&(e[0].style.height=""),r.children("div")[0].style.top=""}n(c).children("tr.ui-jqgrid-labels").remove(),n(c).prepend(s),t===!0&&n(o).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(t){return t=n.extend({useColSpanStyle:!1,groupHeaders:[]},t||{}),this.each(function(){var k,g;this.p.groupHeader=t;var i=this,u,a,b=0,c,o,f,v,d,r,p,w,nt,h,y=i.p.colModel,it=y.length,tt=i.grid.headers,e=n("table.ui-jqgrid-htable",i.grid.hDiv),rt=e.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),ut=e.children("thead"),l,s=e.find(".jqg-first-row-header");for(s.html()===null?s=n("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):s.empty(),g=function(n,t){for(var i=0,r=t.length;i<r;i++)if(t[i].startColumnName===n)return i;return-1},n(i).prepend(ut),c=n("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header"),u=0;u<it;u++)if(f=tt[u].el,v=n(f),a=y[u],d={height:"0px",width:tt[u].width+"px",display:a.hidden?"none":""},n("<th>",{role:"gridcell"}).css(d).addClass("ui-first-th-"+i.p.direction).appendTo(s),f.style.width="",r=g(a.name,t.groupHeaders),r>=0){for(p=t.groupHeaders[r],w=p.numberOfColumns,nt=p.titleText,h=0,r=0;r<w&&u+r<it;r++)y[u+r].hidden||h++;o=n("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+i.p.direction).css({height:"22px","border-top":"0px none"}).html(nt),h>0&&o.attr("colspan",String(h)),i.p.headertitles&&o.attr("title",o.text()),h===0&&o.hide(),v.before(o),c.append(f),b=w-1}else b===0?t.useColSpanStyle?v.attr("rowspan","2"):(n("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+i.p.direction).css({display:a.hidden?"none":"","border-top":"0px none"}).insertBefore(v),c.append(f)):(c.append(f),b--);l=n(i).children("thead"),l.prepend(s),c.insertAfter(rt),e.append(l),t.useColSpanStyle&&(e.find("span.ui-jqgrid-resize").each(function(){var t=n(this).parent();t.is(":visible")&&(this.style.cssText="height: "+t.height()+"px !important; cursor: col-resize;")}),e.find("div.ui-jqgrid-sortable").each(function(){var i=n(this),t=i.parent();t.is(":visible")&&t.is(":has(span.ui-jqgrid-resize)")&&i.css("top",(t.height()-i.outerHeight())/2+"px")})),k=l.find("tr.jqg-first-row-header"),n(i).bind("jqGridResizeStop.setGroupHeaders",function(n,t,i){k.find("th").eq(i).width(t)})})},setFrozenColumns:function(){return this.each(function(){var u,s,r,e,o;if(this.grid){var t=this,h=t.p.colModel,f=0,l=h.length,i=-1,c=!1;if(t.p.subGrid!==!0&&t.p.treeGrid!==!0&&t.p.cellEdit!==!0&&!t.p.sortable&&!t.p.scroll&&!t.p.grouping){for(t.p.rownumbers&&f++,t.p.multiselect&&f++;f<l;){if(h[f].frozen===!0)c=!0,i=f;else break;f++}i>=0&&c&&(u=t.p.caption?n(t.grid.cDiv).outerHeight():0,s=n(".ui-jqgrid-htable","#gview_"+n.jgrid.jqID(t.p.id)).height(),t.p.toppager&&(u=u+n(t.grid.topDiv).outerHeight()),t.p.toolbar[0]===!0&&t.p.toolbar[1]!="bottom"&&(u=u+n(t.grid.uDiv).outerHeight()),t.grid.fhDiv=n('<div style="position:absolute;left:0px;top:'+u+"px;height:"+s+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),t.grid.fbDiv=n('<div style="position:absolute;left:0px;top:'+(parseInt(u,10)+parseInt(s,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fhDiv),r=n(".ui-jqgrid-htable","#gview_"+n.jgrid.jqID(t.p.id)).clone(!0),t.p.groupHeader?(n("tr.jqg-first-row-header, tr.jqg-third-row-header",r).each(function(){n("th:gt("+i+")",this).remove()}),e=-1,o=-1,n("tr.jqg-second-row-header th",r).each(function(){var t=parseInt(n(this).attr("colspan"),10);return t&&(e=e+t,o++),e===i?!1:void 0}),e!==i&&(o=i),n("tr.jqg-second-row-header",r).each(function(){n("th:gt("+o+")",this).remove()})):n("tr",r).each(function(){n("th:gt("+i+")",this).remove()}),n(r).width(1),n(t.grid.fhDiv).append(r).mousemove(function(n){if(t.grid.resizing)return t.grid.dragMove(n),!1}),n(t).bind("jqGridResizeStop.setFrozenColumns",function(i,r,u){var e=n(".ui-jqgrid-htable",t.grid.fhDiv),f;n("th:eq("+u+")",e).width(r),f=n(".ui-jqgrid-btable",t.grid.fbDiv),n("tr:first td:eq("+u+")",f).width(r)}),n(t).bind("jqGridOnSortCol.setFrozenColumns",function(i,r){var f=n("tr.ui-jqgrid-labels:last th:eq("+t.p.lastsort+")",t.grid.fhDiv),u=n("tr.ui-jqgrid-labels:last th:eq("+r+")",t.grid.fhDiv);n("span.ui-grid-ico-sort",f).addClass("ui-state-disabled"),n(f).attr("aria-selected","false"),n("span.ui-icon-"+t.p.sortorder,u).removeClass("ui-state-disabled"),n(u).attr("aria-selected","true"),t.p.viewsortcols[0]||t.p.lastsort!=r&&(n("span.s-ico",f).hide(),n("span.s-ico",u).show())}),n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fbDiv),jQuery(t.grid.bDiv).scroll(function(){jQuery(t.grid.fbDiv).scrollTop(jQuery(this).scrollTop())}),t.p.hoverrows===!0&&n("#"+n.jgrid.jqID(t.p.id)).unbind("mouseover").unbind("mouseout"),n(t).bind("jqGridAfterGridComplete.setFrozenColumns",function(){n("#"+n.jgrid.jqID(t.p.id)+"_frozen").remove(),jQuery(t.grid.fbDiv).height(jQuery(t.grid.bDiv).height()-16);var r=n("#"+n.jgrid.jqID(t.p.id)).clone(!0);n("tr",r).each(function(){n("td:gt("+i+")",this).remove()}),n(r).width(1).attr("id",t.p.id+"_frozen"),n(t.grid.fbDiv).append(r),t.p.hoverrows===!0&&(n("tr.jqgrow",r).hover(function(){n(this).addClass("ui-state-hover"),n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover"),n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)).removeClass("ui-state-hover")}),n("tr.jqgrow","#"+n.jgrid.jqID(t.p.id)).hover(function(){n(this).addClass("ui-state-hover"),n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)+"_frozen").addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover"),n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)+"_frozen").removeClass("ui-state-hover")})),r=null}),t.p.frozenColumns=!0)}}})},destroyFrozenColumns:function(){return this.each(function(){var t,i;this.grid&&this.p.frozenColumns===!0&&(t=this,n(t.grid.fhDiv).remove(),n(t.grid.fbDiv).remove(),t.grid.fhDiv=null,t.grid.fbDiv=null,n(this).unbind(".setFrozenColumns"),t.p.hoverrows===!0&&n("#"+n.jgrid.jqID(t.p.id)).bind("mouseover",function(t){i=n(t.target).closest("tr.jqgrow"),n(i).attr("class")!=="ui-subgrid"&&n(i).addClass("ui-state-hover")}).bind("mouseout",function(t){i=n(t.target).closest("tr.jqgrow"),n(i).removeClass("ui-state-hover")}),this.p.frozenColumns=!1)})}})}(jQuery),function(n){n.fn.jqm=function(r){var f={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:t,ajaxText:"",target:t,modal:t,toTop:t,onShow:t,onHide:t,onLoad:t};return this.each(function(){if(this._jqm)return i[this._jqm].c=n.extend({},i[this._jqm].c,r);u++,this._jqm=u,i[u]={c:n.extend(f,n.jqm.params,r),a:t,w:n(this).addClass("jqmID"+u),s:u},f.trigger&&n(this).jqmAddTrigger(f.trigger)})},n.fn.jqmAddClose=function(n){return o(this,n,"jqmHide")},n.fn.jqmAddTrigger=function(n){return o(this,n,"jqmShow")},n.fn.jqmShow=function(t){return this.each(function(){n.jqm.open(this._jqm,t)})},n.fn.jqmHide=function(t){return this.each(function(){n.jqm.close(this._jqm,t)})},n.jqm={hash:{},open:function(u,f){var o=i[u],c=o.c,p="."+c.closeClass,y=parseInt(o.w.css("z-index")),l,w,a,v;if(y=y>0?y:3e3,l=n("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":y-1,opacity:c.overlay/100}),o.a)return t;if(o.t=f,o.a=!0,o.w.css("z-index",y),c.modal?(r[0]||setTimeout(function(){e("bind")},1),r.push(u)):c.overlay>0?c.closeoverlay&&o.w.jqmAddClose(l):l=t,o.o=l?l.addClass(c.overlayClass).prependTo("body"):t,s&&(n("html,body").css({height:"100%",width:"100%"}),l)){l=l.css({position:"absolute"})[0];for(w in{Top:1,Left:1})l.style.setExpression(w.toLowerCase(),"(_=(document.documentElement.scroll"+w+" || document.body.scroll"+w+"))+'px'")}return c.ajax?(a=c.target||o.w,v=c.ajax,a=typeof a=="string"?n(a,o.w):n(a),v=v.substr(0,1)=="@"?n(f).attr(v.substring(1)):v,a.html(c.ajaxText).load(v,function(){c.onLoad&&c.onLoad.call(this,o),p&&o.w.jqmAddClose(n(p,o.w)),h(o)})):p&&o.w.jqmAddClose(n(p,o.w)),c.toTop&&o.o&&o.w.before('<span id="jqmP'+o.w[0]._jqm+'"></span>').insertAfter(o.o),c.onShow?c.onShow(o):o.w.show(),h(o),t},close:function(u){var f=i[u];if(!f.a)return t;if(f.a=t,r[0]&&(r.pop(),r[0]||e("unbind")),f.c.toTop&&f.o&&n("#jqmP"+f.w[0]._jqm).after(f.w).remove(),f.c.onHide)f.c.onHide(f);else f.w.hide(),f.o&&f.o.remove();return t},params:{}};var u=0,i=n.jqm.hash,r=[],s=n.browser.msie&&n.browser.version=="6.0",t=!1,h=function(t){var i=n('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});s&&(t.o?t.o.html('<p style="width:100%;height:100%"/>').prepend(i):n("iframe.jqm",t.w)[0]||t.w.prepend(i)),c(t)},c=function(t){try{n(":input:visible",t.w)[0].focus()}catch(i){}},e=function(t){n(document)[t]("keypress",f)[t]("keydown",f)[t]("mousedown",f)},f=function(t){var f=i[r[r.length-1]],u=!n(t.target).parents(".jqmID"+f.s)[0];return u&&c(f),!u},o=function(r,u,f){return r.each(function(){var r=this._jqm;n(u).each(function(){this[f]||(this[f]=[],n(this).click(function(){var n,r;for(n in{jqmShow:1,jqmHide:1})for(r in this[n])i[this[n][r]]&&i[this[n][r]].w[n](this);return t})),this[f].push(r)})})}}(jQuery),function(n){n.fn.jqDrag=function(n){return s(this,n,"d")},n.fn.jqResize=function(n,t){return s(this,n,"r",t)},n.jqDnR={dnr:{},e:0,drag:function(n){return t.k=="d"?i.css({left:t.X+n.pageX-t.pX,top:t.Y+n.pageY-t.pY}):(i.css({width:Math.max(n.pageX-t.pX+t.W,0),height:Math.max(n.pageY-t.pY+t.H,0)}),r&&u.css({width:Math.max(n.pageX-r.pX+r.W,0),height:Math.max(n.pageY-r.pY+r.H,0)})),!1},stop:function(){n(document).unbind("mousemove",o.drag).unbind("mouseup",o.stop)}};var o=n.jqDnR,t=o.dnr,i=o.e,u,r,s=function(o,s,h,c){return o.each(function(){s=s?n(s,o):o,s.bind("mousedown",{e:o,k:h},function(o){var h=o.data,s={};if(i=h.e,u=c?n(c):!1,i.css("position")!="relative")try{i.position(s)}catch(a){}if(t={X:s.left||f("left")||0,Y:s.top||f("top")||0,W:f("width")||i[0].scrollWidth||0,H:f("height")||i[0].scrollHeight||0,pX:o.pageX,pY:o.pageY,k:h.k},r=u&&h.k!="d"?{X:s.left||e("left")||0,Y:s.top||e("top")||0,W:u[0].offsetWidth||e("width")||0,H:u[0].offsetHeight||e("height")||0,pX:o.pageX,pY:o.pageY,k:h.k}:!1,n("input.hasDatepicker",i[0])[0])try{n("input.hasDatepicker",i[0]).datepicker("hide")}catch(l){}return n(document).mousemove(n.jqDnR.drag).mouseup(n.jqDnR.stop),!1})})},f=function(n){return parseInt(i.css(n),10)||!1},e=function(n){return parseInt(u.css(n),10)||!1}}(jQuery);var xmlJsonClass={xml2json:function(n,t){n.nodeType===9&&(n=n.documentElement);var r=this.removeWhite(n),u=this.toObj(r),i=this.toJson(u,n.nodeName,"\t");return"{\n"+t+(t?i.replace(/\t/g,t):i.replace(/\t|\n/g,""))+"\n}"},json2xml:function(n,t){var r=function(n,t,i){var u="",o,s,h,e,f;if(n instanceof Array)if(n.length===0)u+=i+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(o=0,s=n.length;o<s;o+=1)h=i+r(n[o],t,i+"\t")+"\n",u+=h;else if(typeof n=="object"){e=!1,u+=i+"<"+t;for(f in n)n.hasOwnProperty(f)&&(f.charAt(0)==="@"?u+=" "+f.substr(1)+'="'+n[f].toString()+'"':e=!0);if(u+=e?">":"/>",e){for(f in n)n.hasOwnProperty(f)&&(f==="#text"?u+=n[f]:f==="#cdata"?u+="<![CDATA["+n[f]+"]\]>":f.charAt(0)!=="@"&&(u+=r(n[f],f,i+"\t")));u+=(u.charAt(u.length-1)==="\n"?i:"")+"</"+t+">"}}else typeof n=="function"?u+=i+"<"+t+"><![CDATA["+n+"]\]></"+t+">":(n===undefined&&(n=""),u+=n.toString()==='""'||n.toString().length===0?i+"<"+t+">__EMPTY_STRING_</"+t+">":i+"<"+t+">"+n.toString()+"</"+t+">");return u},u="",i;for(i in n)n.hasOwnProperty(i)&&(u+=r(n[i],i,""));return t?u.replace(/\t/g,t):u.replace(/\t|\n/g,"")},toObj:function(n){var i={},e=/function/i,r;if(n.nodeType===1){if(n.attributes.length)for(r=0;r<n.attributes.length;r+=1)i["@"+n.attributes[r].nodeName]=(n.attributes[r].nodeValue||"").toString();if(n.firstChild){for(var f=0,u=0,o=!1,t=n.firstChild;t;t=t.nextSibling)t.nodeType===1?o=!0:t.nodeType===3&&t.nodeValue.match(/[^ \f\n\r\t\v]/)?f+=1:t.nodeType===4&&(u+=1);if(o)if(f<2&&u<2)for(this.removeWhite(n),t=n.firstChild;t;t=t.nextSibling)t.nodeType===3?i["#text"]=this.escape(t.nodeValue):t.nodeType===4?e.test(t.nodeValue)?i[t.nodeName]=[i[t.nodeName],t.nodeValue]:i["#cdata"]=this.escape(t.nodeValue):i[t.nodeName]?i[t.nodeName]instanceof Array?i[t.nodeName][i[t.nodeName].length]=this.toObj(t):i[t.nodeName]=[i[t.nodeName],this.toObj(t)]:i[t.nodeName]=this.toObj(t);else n.attributes.length?i["#text"]=this.escape(this.innerXml(n)):i=this.escape(this.innerXml(n));else if(f)n.attributes.length?i["#text"]=this.escape(this.innerXml(n)):(i=this.escape(this.innerXml(n)),i==="__EMPTY_ARRAY_"?i="[]":i==="__EMPTY_STRING_"&&(i=""));else if(u)if(u>1)i=this.escape(this.innerXml(n));else for(t=n.firstChild;t;t=t.nextSibling)if(e.test(n.firstChild.nodeValue)){i=n.firstChild.nodeValue;break}else i["#cdata"]=this.escape(t.nodeValue)}n.attributes.length||n.firstChild||(i=null)}else n.nodeType===9?i=this.toObj(n.documentElement):alert("unhandled node type: "+n.nodeType);return i},toJson:function(n,t,i,r){var l,h,s,o,c;r===undefined&&(r=!0);var e=t?'"'+t+'"':"",f="\t",u="\n";if(r||(f="",u=""),n==="[]")e+=t?":[]":"[]";else if(n instanceof Array){for(s=[],h=0,l=n.length;h<l;h+=1)s[h]=this.toJson(n[h],"",i+f,r);e+=(t?":[":"[")+(s.length>1?u+i+f+s.join(","+u+i+f)+u+i:s.join(""))+"]"}else if(n===null)e+=(t&&":")+"null";else if(typeof n=="object"){o=[];for(c in n)n.hasOwnProperty(c)&&(o[o.length]=this.toJson(n[c],c,i+f,r));e+=(t?":{":"{")+(o.length>1?u+i+f+o.join(","+u+i+f)+u+i:o.join(""))+"}"}else e+=typeof n=="string"?(t&&":")+'"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+n.toString();return e},innerXml:function(n){var i="",r,t;if("innerHTML"in n)i=n.innerHTML;else for(r=function(n){var t="",u,i;if(n.nodeType===1){for(t+="<"+n.nodeName,u=0;u<n.attributes.length;u+=1)t+=" "+n.attributes[u].nodeName+'="'+(n.attributes[u].nodeValue||"").toString()+'"';if(n.firstChild){for(t+=">",i=n.firstChild;i;i=i.nextSibling)t+=r(i);t+="</"+n.nodeName+">"}else t+="/>"}else n.nodeType===3?t+=n.nodeValue:n.nodeType===4&&(t+="<![CDATA["+n.nodeValue+"]\]>");return t},t=n.firstChild;t;t=t.nextSibling)i+=r(t);return i},escape:function(n){return n.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(n){var t,i;for(n.normalize(),t=n.firstChild;t;)t.nodeType===3?t.nodeValue.match(/[^ \f\n\r\t\v]/)?t=t.nextSibling:(i=t.nextSibling,n.removeChild(t),t=i):t.nodeType===1?(this.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return n}};(function(n){"use strict";n.fmatter={},n.extend(n.fmatter,{isBoolean:function(n){return typeof n=="boolean"},isObject:function(t){return t&&(typeof t=="object"||n.isFunction(t))||!1},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isNull:function(n){return n===null},isUndefined:function(n){return typeof n=="undefined"},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=n.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0}}),n.fn.fmatter=function(t,i,r,u,f){var e=i;r=n.extend({},n.jgrid.formatter,r);try{e=n.fn.fmatter[t].call(this,i,r,u,f)}catch(o){}return e},n.fmatter.util={NumberFormat:function(t,i){var s,c,l,f,h,e;if(n.fmatter.isNumber(t)||(t*=1),n.fmatter.isNumber(t)){var a=t<0,r=t+"",o=i.decimalSeparator?i.decimalSeparator:".",u;if(n.fmatter.isNumber(i.decimalPlaces)&&(s=i.decimalPlaces,c=Math.pow(10,s),r=Math.round(t*c)/c+"",u=r.lastIndexOf("."),s>0))for(u<0?(r+=o,u=r.length-1):o!=="."&&(r=r.replace(".",o));r.length-1-u<s;)r+="0";if(i.thousandsSeparator){for(l=i.thousandsSeparator,u=r.lastIndexOf(o),u=u>-1?u:r.length,f=r.substring(u),h=-1,e=u;e>0;e--)h++,h%3==0&&e!==u&&(!a||e>1)&&(f=l+f),f=r.charAt(e-1)+f;r=f}return r=i.prefix?i.prefix+r:r,r=i.suffix?r+i.suffix:r}return t},DateFormat:function(t,i,r,u){var ft=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,ut=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,rt=/[^-+\dA-Z]/g,et=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),a=typeof i=="string"?i.match(et):null,h=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},e=0,s,o,it,c=["i18n"],d,v;if(c.i18n={dayNames:u.dayNames,monthNames:u.monthNames},t in u.masks&&(t=u.masks[t]),isNaN(+i)||String(t).toLowerCase()!="u")if(i.constructor===Date)e=i;else if(a!==null)e=new Date(parseInt(a[1],10)),a[3]&&(d=Number(a[5])*60+Number(a[6]),d*=a[4]=="-"?1:-1,d-=e.getTimezoneOffset(),e.setTime(Number(Number(e)+d*6e4)));else{for(i=String(i).split(/[\\\/:_;.,\t\T\s-]/),t=t.split(/[\\\/:_;.,\t\T\s-]/),o=0,it=t.length;o<it;o++)t[o]=="M"&&(s=n.inArray(i[o],c.i18n.monthNames),s!==-1&&s<12&&(i[o]=s+1)),t[o]=="F"&&(s=n.inArray(i[o],c.i18n.monthNames),s!==-1&&s>11&&(i[o]=s+1-12)),i[o]&&(f[t[o].toLowerCase()]=parseInt(i[o],10));if(f.f&&(f.m=f.f),f.m===0&&f.y===0&&f.d===0)return"&#160;";f.m=parseInt(f.m,10)-1,v=f.y,v>=70&&v<=99?f.y=1900+f.y:v>=0&&v<=69&&(f.y=2e3+f.y),e=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)}else e=new Date(parseFloat(i)*1e3);r in u.masks?r=u.masks[r]:r||(r="Y-m-d");var l=e.getHours(),ht=e.getMinutes(),b=e.getDate(),y=e.getMonth()+1,nt=e.getTimezoneOffset(),ot=e.getSeconds(),st=e.getMilliseconds(),k=e.getDay(),p=e.getFullYear(),w=(k+6)%7+1,g=(new Date(p,y-1,b)-new Date(p,0,1))/864e5,tt={d:h(b),D:c.i18n.dayNames[k],j:b,l:c.i18n.dayNames[k+7],N:w,S:u.S(b),w:k,z:g,W:w<5?Math.floor((g+w-1)/7)+1:Math.floor((g+w-1)/7)||((new Date(p-1,0,1).getDay()+6)%7<4?53:52),F:c.i18n.monthNames[y- -11],m:h(y),M:c.i18n.monthNames[y-1],n:y,t:"?",L:"?",o:"?",Y:p,y:String(p).substring(2),a:l<12?u.AmPm[0]:u.AmPm[1],A:l<12?u.AmPm[2]:u.AmPm[3],B:"?",g:l%12||12,G:l,h:h(l%12||12),H:h(l),i:h(ht),s:h(ot),u:st,e:"?",I:"?",O:(nt>0?"-":"+")+h(Math.floor(Math.abs(nt)/60)*100+Math.abs(nt)%60,4),P:"?",T:(String(e).match(ut)||[""]).pop().replace(rt,""),Z:"?",c:"?",r:"?",U:Math.floor(e/1e3)};return r.replace(ft,function(n){return n in tt?tt[n]:n.substring(1)})}},n.fn.fmatter.defaultFormat=function(t,i){return n.fmatter.isValue(t)&&t!==""?t:i.defaultValue?i.defaultValue:"&#160;"},n.fn.fmatter.email=function(t,i){return n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"</a>"},n.fn.fmatter.checkbox=function(t,i){var r=n.extend({},i.checkbox),u,f;return n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),u=r.disabled===!0?'disabled="disabled"':"",(n.fmatter.isEmpty(t)||n.fmatter.isUndefined(t))&&(t=n.fn.fmatter.defaultFormat(t,r)),t=t+"",t=t.toLowerCase(),f=t.search(/(false|0|no|off)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+f+' value="'+t+'" offval="no" '+u+"/>"},n.fn.fmatter.link=function(t,i){var r={target:i.target},u="";return n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):"<a "+u+' href="'+t+'">'+t+"</a>"},n.fn.fmatter.showlink=function(t,i){var r={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},f="",u;return n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(f="target="+r.target),u=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+i.rowId+r.addParam,n.fmatter.isString(t)||n.fmatter.isNumber(t)?"<a "+f+' href="'+u+'">'+t+"</a>":n.fn.fmatter.defaultFormat(t,i)},n.fn.fmatter.integer=function(t,i){var r=n.extend({},i.integer);return(n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)},n.fn.fmatter.number=function(t,i){var r=n.extend({},i.number);return(n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)},n.fn.fmatter.currency=function(t,i){var r=n.extend({},i.currency);return(n.fmatter.isUndefined(i.colModel.formatoptions)||(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)},n.fn.fmatter.date=function(t,i,r,u){var f=n.extend({},i.date);return n.fmatter.isUndefined(i.colModel.formatoptions)||(f=n.extend({},f,i.colModel.formatoptions)),f.reformatAfterEdit||u!="edit"?n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.fmatter.util.DateFormat(f.srcformat,t,f.newformat,f):n.fn.fmatter.defaultFormat(t,i)},n.fn.fmatter.select=function(t,i){var r,e,s,c,o,f,u,a,l,h;if(t=t+"",r=!1,e=[],n.fmatter.isUndefined(i.colModel.formatoptions)?n.fmatter.isUndefined(i.colModel.editoptions)||(r=i.colModel.editoptions.value,s=i.colModel.editoptions.separator===undefined?":":i.colModel.editoptions.separator,c=i.colModel.editoptions.delimiter===undefined?";":i.colModel.editoptions.delimiter):(r=i.colModel.formatoptions.value,s=i.colModel.formatoptions.separator===undefined?":":i.colModel.formatoptions.separator,c=i.colModel.formatoptions.delimiter===undefined?";":i.colModel.formatoptions.delimiter),r)if(o=i.colModel.editoptions.multiple===!0?!0:!1,f=[],o&&(f=t.split(","),f=n.map(f,function(t){return n.trim(t)})),n.fmatter.isString(r)){for(a=r.split(c),l=0,h=0;h<a.length;h++)if(u=a[h].split(s),u.length>2&&(u[1]=n.map(u,function(n,t){if(t>0)return n}).join(s)),o)n.inArray(u[0],f)>-1&&(e[l]=u[1],l++);else if(n.trim(u[0])==n.trim(t)){e[0]=u[1];break}}else n.fmatter.isObject(r)&&(o?e=n.map(f,function(n){return r[n]}):e[0]=r[t]||"");return t=e.join(", "),t===""?n.fn.fmatter.defaultFormat(t,i):t},n.fn.fmatter.rowactions=function(t,i,r,u){var f={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,delOptions:{},editOptions:{}},h,s,c;t=n.jgrid.jqID(t),i=n.jgrid.jqID(i),h=n("#"+i)[0].p.colModel[u],n.fmatter.isUndefined(h.formatoptions)||(f=n.extend(f,h.formatoptions)),n.fmatter.isUndefined(n("#"+i)[0].p.editOptions)||(f.editOptions=n("#"+i)[0].p.editOptions),n.fmatter.isUndefined(n("#"+i)[0].p.delOptions)||(f.delOptions=n("#"+i)[0].p.delOptions);var e=n("#"+i)[0],l=function(r,u){n.isFunction(f.afterSave)&&f.afterSave.call(e,r,u),n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").show(),n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").hide()},o=function(r){n.isFunction(f.afterRestore)&&f.afterRestore.call(e,r),n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").show(),n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").hide()};n("#"+t,"#"+i).hasClass("jqgrid-new-row")&&(s=e.p.prmNames,c=s.oper,f.extraparam[c]=s.addoper);switch(r){case"edit":n("#"+i).jqGrid("editRow",t,f.keys,f.onEdit,f.onSuccess,f.url,f.extraparam,l,f.onError,o),n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").hide(),n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").show(),n(e).triggerHandler("jqGridAfterGridComplete");break;case"save":n("#"+i).jqGrid("saveRow",t,f.onSuccess,f.url,f.extraparam,l,f.onError,o)&&(n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").show(),n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").hide(),n(e).triggerHandler("jqGridAfterGridComplete"));break;case"cancel":n("#"+i).jqGrid("restoreRow",t,o),n("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i+".ui-jqgrid-btable:first").show(),n("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i+".ui-jqgrid-btable:first").hide(),n(e).triggerHandler("jqGridAfterGridComplete");break;case"del":n("#"+i).jqGrid("delGridRow",t,f.delOptions);break;case"formedit":n("#"+i).jqGrid("setSelection",t),n("#"+i).jqGrid("editGridRow",t,f.editOptions)}},n.fn.fmatter.actions=function(t,i){var e={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},f,r,u;return(n.fmatter.isUndefined(i.colModel.formatoptions)||(e=n.extend(e,i.colModel.formatoptions)),f=i.rowId,r="",typeof f=="undefined"||n.fmatter.isEmpty(f))?"":(e.editformbutton?(u="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+i.gid+"','formedit',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",r=r+"<div title='"+n.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+u+"><span class='ui-icon ui-icon-pencil'></span></div>"):e.editbutton&&(u="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+i.gid+"','edit',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",r=r+"<div title='"+n.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+u+"><span class='ui-icon ui-icon-pencil'></span></div>"),e.delbutton&&(u="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+i.gid+"','del',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",r=r+"<div title='"+n.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+u+"><span class='ui-icon ui-icon-trash'></span></div>"),u="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+i.gid+"','save',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",r=r+"<div title='"+n.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+u+"><span class='ui-icon ui-icon-disk'></span></div>",u="onclick=jQuery.fn.fmatter.rowactions('"+f+"','"+i.gid+"','cancel',"+i.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",r=r+"<div title='"+n.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+u+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+r+"</div>")},n.unformat=function(t,i,r,u){var e,h=i.colModel.formatter,f=i.colModel.formatoptions||{},s,a=/([\.\*\_\'\(\)\{\}\+\?\\])/g,v=i.colModel.unformat||n.fn.fmatter[h]&&n.fn.fmatter[h].unformat,c,o,l;if(typeof v!="undefined"&&n.isFunction(v))e=v.call(this,n(t).text(),i,t);else if(!n.fmatter.isUndefined(h)&&n.fmatter.isString(h)){c=n.jgrid.formatter||{};switch(h){case"integer":f=n.extend({},c.integer,f),s=f.thousandsSeparator.replace(a,"\\$1"),o=new RegExp(s,"g"),e=n(t).text().replace(o,"");break;case"number":f=n.extend({},c.number,f),s=f.thousandsSeparator.replace(a,"\\$1"),o=new RegExp(s,"g"),e=n(t).text().replace(o,"").replace(f.decimalSeparator,".");break;case"currency":f=n.extend({},c.currency,f),s=f.thousandsSeparator.replace(a,"\\$1"),o=new RegExp(s,"g"),e=n(t).text(),f.prefix&&f.prefix.length&&(e=e.substr(f.prefix.length)),f.suffix&&f.suffix.length&&(e=e.substr(0,e.length-f.suffix.length)),e=e.replace(o,"").replace(f.decimalSeparator,".");break;case"checkbox":l=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"],e=n("input",t).is(":checked")?l[0]:l[1];break;case"select":e=n.unformat.select(t,i,r,u);break;case"actions":return"";default:e=n(t).text()}}return e!==undefined?e:u===!0?n(t).text():n.jgrid.htmlDecode(n(t).html())},n.unformat.select=function(t,i,r,u){var l=[],h=n(t).text(),a,v,c;if(u===!0)return h;var e=n.extend({},n.fmatter.isUndefined(i.colModel.formatoptions)?i.colModel.editoptions:i.colModel.formatoptions),p=e.separator===undefined?":":e.separator,w=e.delimiter===undefined?";":e.delimiter;if(e.value){var s=e.value,y=e.multiple===!0?!0:!1,o=[],f;if(y&&(o=h.split(","),o=n.map(o,function(t){return n.trim(t)})),n.fmatter.isString(s)){for(a=s.split(w),v=0,c=0;c<a.length;c++)if(f=a[c].split(p),f.length>2&&(f[1]=n.map(f,function(n,t){if(t>0)return n}).join(p)),y)n.inArray(f[1],o)>-1&&(l[v]=f[0],v++);else if(n.trim(f[1])==n.trim(h)){l[0]=f[0];break}}else(n.fmatter.isObject(s)||n.isArray(s))&&(y||(o[0]=h),l=n.map(o,function(t){var i;return n.each(s,function(n,r){if(r==t)return i=n,!1}),typeof i!="undefined"?i:void 0}));return l.join(", ")}return h||""},n.unformat.date=function(t,i){var r=n.jgrid.formatter.date||{};return n.fmatter.isUndefined(i.formatoptions)||(r=n.extend({},r,i.formatoptions)),n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.fmatter.util.DateFormat(r.newformat,t,r.srcformat,r)}})(jQuery),function(n){n.extend(n.jgrid,{showModal:function(n){n.w.show()},closeModal:function(n){n.w.hide().attr("aria-hidden","true"),n.o&&n.o.remove()},hideModal:function(t,i){if(i=n.extend({jqm:!0,gb:""},i||{}),i.onClose){var r=i.onClose(t);if(typeof r=="boolean"&&!r)return}if(n.fn.jqm&&i.jqm===!0)n(t).attr("aria-hidden","true").jqmHide();else{if(i.gb!=="")try{n(".jqgrid-overlay:first",i.gb).hide()}catch(u){}n(t).hide().attr("aria-hidden","true")}},findPos:function(n){var i=0,t=0;if(n.offsetParent)do i+=n.offsetLeft,t+=n.offsetTop;while(n=n.offsetParent);return[i,t]},createModal:function(t,i,r,u,f,e,o){var s=document.createElement("div"),w,b=this,h,a,l,c,v,y,p;if(o=n.extend({},o||{}),w=n(r.gbox).attr("dir")=="rtl"?!0:!1,s.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",s.id=t.themodal,h=document.createElement("div"),h.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",h.id=t.modalhead,n(h).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>"),a=n("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>"),n(h).append(a),w?(s.dir="rtl",n(".ui-jqdialog-title",h).css("float","right"),n(".ui-jqdialog-titlebar-close",h).css("left",.3+"em")):(s.dir="ltr",n(".ui-jqdialog-title",h).css("float","left"),n(".ui-jqdialog-titlebar-close",h).css("right",.3+"em")),l=document.createElement("div"),n(l).addClass("ui-jqdialog-content ui-widget-content").attr("id",t.modalcontent),n(l).append(i),s.appendChild(l),n(s).prepend(h),e===!0?n("body").append(s):typeof e=="string"?n(e).append(s):n(s).insertBefore(u),n(s).css(o),typeof r.jqModal=="undefined"&&(r.jqModal=!0),c={},n.fn.jqm&&r.jqModal===!0?(r.left===0&&r.top===0&&r.overlay&&(v=[],v=this.findPos(f),r.left=v[0]+4,r.top=v[1]+4),c.top=r.top+"px",c.left=r.left):(r.left!==0||r.top!==0)&&(c.left=r.left,c.top=r.top+"px"),n("a.ui-jqdialog-titlebar-close",h).click(function(){var u=n("#"+n.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,i=n("#"+n.jgrid.jqID(t.themodal)).data("gbox")||r.gbox;return b.hideModal("#"+n.jgrid.jqID(t.themodal),{gb:i,jqm:r.jqModal,onClose:u}),!1}),r.width!==0&&r.width||(r.width=300),r.height!==0&&r.height||(r.height=200),r.zIndex||(y=n(u).parents("*[role=dialog]").filter(":first").css("z-index"),r.zIndex=y?parseInt(y,10)+2:950),p=0,w&&c.left&&!e&&(p=n(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,c.left=parseInt(c.left,10)+parseInt(p,10)),c.left&&(c.left+="px"),n(s).css(n.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),typeof r.drag=="undefined"&&(r.drag=!0),typeof r.resize=="undefined"&&(r.resize=!0),r.drag)if(n(h).css("cursor","move"),n.fn.jqDrag)n(s).jqDrag(h);else try{n(s).draggable({handle:n("#"+n.jgrid.jqID(h.id))})}catch(d){}if(r.resize)if(n.fn.jqResize)n(s).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),n("#"+n.jgrid.jqID(t.themodal)).jqResize(".jqResize",t.scrollelm?"#"+n.jgrid.jqID(t.scrollelm):!1);else try{n(s).resizable({handles:"se, sw",alsoResize:t.scrollelm?"#"+n.jgrid.jqID(t.scrollelm):!1})}catch(k){}r.closeOnEscape===!0&&n(s).keydown(function(i){if(i.which==27){var u=n("#"+n.jgrid.jqID(t.themodal)).data("onClose")||r.onClose;b.hideModal(this,{gb:r.gbox,jqm:r.jqModal,onClose:u})}})},viewModal:function(t,i){if(i=n.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:!0,jqM:!0},i||{}),n.fn.jqm&&i.jqm===!0)i.jqM?n(t).attr("aria-hidden","false").jqm(i).jqmShow():n(t).attr("aria-hidden","false").jqmShow();else{i.gbox!==""&&(n(".jqgrid-overlay:first",i.gbox).show(),n(t).data("gbox",i.gbox)),n(t).show().attr("aria-hidden","false");try{n(":input:visible",t)[0].focus()}catch(r){}}},info_dialog:function(t,i,r,u){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+t+"</b>",left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},s,c,o,e;if(n.extend(f,u||{}),s=f.jqModal,c=this,n.fn.jqm&&!s&&(s=!1),o="",f.buttons.length>0)for(e=0;e<f.buttons.length;e++)typeof f.buttons[e].id=="undefined"&&(f.buttons[e].id="info_button_"+e),o+="<a href='javascript:void(0)' id='"+f.buttons[e].id+"' class='fm-button ui-state-default ui-corner-all'>"+f.buttons[e].text+"</a>";var l=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",a="text-align:"+f.align+";",h="<div id='info_id'>";h+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+a+"'>"+i+"</div>",h+=r?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+r+"</a>"+o+"</div>":o!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+o+"</div>":"",h+="</div>";try{n("#info_dialog").attr("aria-hidden")=="false"&&this.hideModal("#info_dialog",{jqm:s}),n("#info_dialog").remove()}catch(y){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},h,f,"","",!0),o&&n.each(f.buttons,function(t){n("#"+n.jgrid.jqID(this.id),"#info_id").bind("click",function(){return f.buttons[t].onClick.call(n("#info_dialog")),!1})}),n("#closedialog","#info_id").click(function(){return c.hideModal("#info_dialog",{jqm:s}),!1}),n(".fm-button","#info_dialog").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),n.isFunction(f.beforeOpen)&&f.beforeOpen(),this.viewModal("#info_dialog",{onHide:function(n){n.w.hide().remove(),n.o&&n.o.remove()},modal:f.modal,jqm:s}),n.isFunction(f.afterOpen)&&f.afterOpen();try{n("#info_dialog").focus()}catch(v){}},createEl:function(t,i,r,u,f){function a(t,i){return n.isFunction(i.dataInit)&&i.dataInit.call(d,t),i.dataEvents&&n.each(i.dataEvents,function(){this.data!==undefined?n(t).bind(this.type,this.data,this.fn):n(t).bind(this.type,this.fn)}),i}function v(t,i,r){var u=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr"];typeof r!="undefined"&&n.isArray(r)&&n.merge(u,r),n.each(i,function(i,r){n.inArray(i,u)===-1&&n(t).attr(i,r)}),i.hasOwnProperty("id")||n(t).attr("id",n.jgrid.randId())}var e="",d=this,g,b,h,c,w,tt,s,o,nt,it,y,l,k,p;switch(t){case"textarea":e=document.createElement("textarea"),u?i.cols||n(e).css({width:"98%"}):i.cols||(i.cols=20),i.rows||(i.rows=2),(r=="&nbsp;"||r=="&#160;"||r.length==1&&r.charCodeAt(0)==160)&&(r=""),e.value=r,v(e,i),i=a(e,i),n(e).attr({role:"textbox",multiline:"true"});break;case"checkbox":e=document.createElement("input"),e.type="checkbox",i.value?(b=i.value.split(":"),r===b[0]&&(e.checked=!0,e.defaultChecked=!0),e.value=b[0],n(e).attr("offval",b[1])):(g=r.toLowerCase(),g.search(/(false|0|no|off|undefined)/i)<0&&g!==""?(e.checked=!0,e.defaultChecked=!0,e.value=r):e.value="on",n(e).attr("offval","off")),v(e,i,["value"]),i=a(e,i),n(e).attr("role","checkbox");break;case"select":if(e=document.createElement("select"),e.setAttribute("role","select"),c=[],i.multiple===!0?(h=!0,e.multiple="multiple",n(e).attr("aria-multiselectable","true")):h=!1,typeof i.dataUrl!="undefined")n.ajax(n.extend({url:i.dataUrl,type:"GET",dataType:"html",context:{elem:e,options:i,vl:r},success:function(t){var f,r=[],u=this.elem,s=this.vl,i=n.extend({},this.options),o=i.multiple===!0,e;n.isFunction(i.buildSelect)?(e=i.buildSelect.call(d,t),f=n(e).html()):f=n(t).html(),f&&(n(u).append(f),v(u,i),i=a(u,i),typeof i.size=="undefined"&&(i.size=o?3:1),o?(r=s.split(","),r=n.map(r,function(t){return n.trim(t)})):r[0]=n.trim(s),setTimeout(function(){n("option",u).each(function(t){t===0&&u.multiple&&(this.selected=!1),n(this).attr("role","option"),(n.inArray(n.trim(n(this).text()),r)>-1||n.inArray(n.trim(n(this).val()),r)>-1)&&(this.selected="selected")})},0))}},f||{}));else if(i.value){if(typeof i.size=="undefined"&&(i.size=h?3:1),h&&(c=r.split(","),c=n.map(c,function(t){return n.trim(t)})),typeof i.value=="function"&&(i.value=i.value()),nt=i.separator===undefined?":":i.separator,it=i.delimiter===undefined?";":i.delimiter,typeof i.value=="string")for(tt=i.value.split(it),w=0;w<tt.length;w++)s=tt[w].split(nt),s.length>2&&(s[1]=n.map(s,function(n,t){if(t>0)return n}).join(nt)),o=document.createElement("option"),o.setAttribute("role","option"),o.value=s[0],o.innerHTML=s[1],e.appendChild(o),h||n.trim(s[0])!=n.trim(r)&&n.trim(s[1])!=n.trim(r)||(o.selected="selected"),h&&(n.inArray(n.trim(s[1]),c)>-1||n.inArray(n.trim(s[0]),c)>-1)&&(o.selected="selected");else if(typeof i.value=="object"){y=i.value;for(l in y)y.hasOwnProperty(l)&&(o=document.createElement("option"),o.setAttribute("role","option"),o.value=l,o.innerHTML=y[l],e.appendChild(o),h||n.trim(l)!=n.trim(r)&&n.trim(y[l])!=n.trim(r)||(o.selected="selected"),h&&(n.inArray(n.trim(y[l]),c)>-1||n.inArray(n.trim(l),c)>-1)&&(o.selected="selected"))}v(e,i,["value"]),i=a(e,i)}break;case"text":case"password":case"button":k=t=="button"?"button":"textbox",e=document.createElement("input"),e.type=t,e.value=r,v(e,i),i=a(e,i),t!="button"&&(u?i.size||n(e).css({width:"98%"}):i.size||(i.size=20)),n(e).attr("role",k);break;case"image":case"file":e=document.createElement("input"),e.type=t,v(e,i),i=a(e,i);break;case"custom":e=document.createElement("span");try{if(n.isFunction(i.custom_element))if(p=i.custom_element.call(d,r,i),p)p=n(p).addClass("customelement").attr({id:i.id,name:i.name}),n(e).empty().append(p);else throw"e2";else throw"e1";}catch(rt){rt=="e1"&&n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_element' "+n.jgrid.edit.msg.nodefined,n.jgrid.edit.bClose),rt=="e2"?n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_element' "+n.jgrid.edit.msg.novalue,n.jgrid.edit.bClose):n.jgrid.info_dialog(n.jgrid.errors.errcap,typeof rt=="string"?rt:rt.message,n.jgrid.edit.bClose)}}return e},checkDate:function(n,t){var v=function(n){return n%4==0&&(n%100!=0||n%400==0)?29:28},a=function(n){for(var t=1;t<=n;t++)this[t]=31,(t==4||t==6||t==9||t==11)&&(this[t]=30),t==2&&(this[t]=29);return this},i={},h,u,c,l,o;if(n=n.toLowerCase(),h=n.indexOf("/")!=-1?"/":n.indexOf("-")!=-1?"-":n.indexOf(".")!=-1?".":"/",n=n.split(h),t=t.split(h),t.length!=3)return!1;var f=-1,r,e=-1,s=-1;for(u=0;u<n.length;u++)c=isNaN(t[u])?0:parseInt(t[u],10),i[n[u]]=c,r=n[u],r.indexOf("y")!=-1&&(f=u),r.indexOf("m")!=-1&&(s=u),r.indexOf("d")!=-1&&(e=u);return(r=n[f]=="y"||n[f]=="yyyy"?4:n[f]=="yy"?2:-1,l=a(12),f===-1)?!1:(o=i[n[f]].toString(),r==2&&o.length==1&&(r=1),o.length!=r||i[n[f]]===0&&t[f]!="00")?!1:s===-1?!1:(o=i[n[s]].toString(),o.length<1||i[n[s]]<1||i[n[s]]>12)?!1:e===-1?!1:(o=i[n[e]].toString(),o.length<1||i[n[e]]<1||i[n[e]]>31||i[n[s]]==2&&i[n[e]]>v(i[n[f]])||i[n[e]]>l[i[n[s]]])?!1:!0},isEmpty:function(n){return n.match(/^\s+$/)||n===""?!0:!1},checkTime:function(t){var r=/^(\d{1,2}):(\d{2})([ap]m)?$/,i;if(!n.jgrid.isEmpty(t))if(i=t.match(r),i){if(i[3]){if(i[1]<1||i[1]>12)return!1}else if(i[1]>23)return!1;if(i[2]>59)return!1}else return!1;return!0},checkValues:function(t,i,r,u,f){var e,c,o,l,y,h=n.jgrid.isEmpty,s,a,v;if(typeof u=="undefined")if(typeof i=="string"){for(c=0,y=r.p.colModel.length;c<y;c++)if(r.p.colModel[c].name==i){e=r.p.colModel[c].editrules,i=c;try{o=r.p.colModel[c].formoptions.label}catch(p){}break}}else i>=0&&(e=r.p.colModel[i].editrules);else e=u,o=f===undefined?"_":f;if(e){if(o||(o=r.p.colNames[i]),e.required===!0&&h(t))return[!1,o+": "+n.jgrid.edit.msg.required,""];if(s=e.required===!1?!1:!0,e.number===!0&&!(s===!1&&h(t))&&isNaN(t))return[!1,o+": "+n.jgrid.edit.msg.number,""];if(typeof e.minValue!="undefined"&&!isNaN(e.minValue)&&parseFloat(t)<parseFloat(e.minValue))return[!1,o+": "+n.jgrid.edit.msg.minValue+" "+e.minValue,""];if(typeof e.maxValue!="undefined"&&!isNaN(e.maxValue)&&parseFloat(t)>parseFloat(e.maxValue))return[!1,o+": "+n.jgrid.edit.msg.maxValue+" "+e.maxValue,""];if(e.email===!0&&!(s===!1&&h(t))&&(a=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!a.test(t)))return[!1,o+": "+n.jgrid.edit.msg.email,""];if(e.integer===!0&&!(s===!1&&h(t))){if(isNaN(t))return[!1,o+": "+n.jgrid.edit.msg.integer,""];if(t%1!=0||t.indexOf(".")!=-1)return[!1,o+": "+n.jgrid.edit.msg.integer,""]}if(e.date===!0&&!(s===!1&&h(t))&&(l=r.p.colModel[i].formatoptions&&r.p.colModel[i].formatoptions.newformat?r.p.colModel[i].formatoptions.newformat:r.p.colModel[i].datefmt||"Y-m-d",!n.jgrid.checkDate(l,t)))return[!1,o+": "+n.jgrid.edit.msg.date+" - "+l,""];if(e.time===!0&&!(s===!1&&h(t))&&!n.jgrid.checkTime(t))return[!1,o+": "+n.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(e.url===!0&&!(s===!1&&h(t))&&(a=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!a.test(t)))return[!1,o+": "+n.jgrid.edit.msg.url,""];if(e.custom===!0&&!(s===!1&&h(t)))return n.isFunction(e.custom_func)?(v=e.custom_func.call(r,t,o),n.isArray(v)?v:[!1,n.jgrid.edit.msg.customarray,""]):[!1,n.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})}(jQuery),function(n){n.fn.jqFilter=function(t){var r,u,i;if(typeof t=="string"){if(r=n.fn.jqFilter[t],!r)throw"jqFilter - No such method: "+t;return u=n.makeArray(arguments).slice(1),r.apply(this,u)}return i=n.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],_gridsopt:[],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},n.jgrid.filter,t||{}),this.each(function(){var r,e,t,f,u;if(!this.filter){if(this.p=i,(this.p.filter===null||this.p.filter===undefined)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),e=this.p.columns.length,f=/msie/i.test(navigator.userAgent)&&!window.opera,this.p._gridsopt.length)for(r=0;r<this.p._gridsopt.length;r++)this.p.ops[r].description=this.p._gridsopt[r];if(this.p.initFilter=n.extend(!0,{},this.p.filter),e){for(r=0;r<e;r++)t=this.p.columns[r],t.stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),t.hidden===undefined&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={});this.p.showQuery&&n(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>"),u=function(t,r){var u=[!0,""];if(n.isFunction(r.searchrules))u=r.searchrules(t,r);else if(n.jgrid&&n.jgrid.checkValues)try{u=n.jgrid.checkValues(t,-1,null,r.searchrules,r.label)}catch(f){}u&&u.length&&u[0]===!1&&(i.error=!u[0],i.errmsg=u[1])},this.onchange=function(){return this.p.error=!1,this.p.errmsg="",n.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){n("table.group:first",this).remove();var t=this.createTableForGroup(i.filter,null);n(this).append(t),n.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(t,r){var f=this,u,o=n("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),y="left",p,e,l,w,k,h,b,s,a,c,d,v;if(this.p.direction=="rtl"&&(y="right",o.attr("dir","rtl")),r===null&&o.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+y+"'></th></tr>"),p=n("<tr></tr>"),o.append(p),e=n("<th colspan='5' align='"+y+"'></th>"),p.append(e),this.p.ruleButtons===!0){for(l=n("<select class='opsel'></select>"),e.append(l),w="",u=0;u<i.groupOps.length;u++)k=t.groupOp===f.p.groupOps[u].op?" selected='selected'":"",w+="<option value='"+f.p.groupOps[u].op+"'"+k+">"+f.p.groupOps[u].text+"</option>";l.append(w).bind("change",function(){t.groupOp=n(l).val(),f.onchange()})}if(h="<span></span>",this.p.groupButton&&(h=n("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),h.bind("click",function(){return t.groups===undefined&&(t.groups=[]),t.groups.push({groupOp:i.groupOps[0].op,rules:[],groups:[]}),f.reDraw(),f.onchange(),!1})),e.append(h),this.p.ruleButtons===!0&&(b=n("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),b.bind("click",function(){var n;for(t.rules===undefined&&(t.rules=[]),u=0;u<f.p.columns.length;u++){var i=typeof f.p.columns[u].search=="undefined"?!0:f.p.columns[u].search,r=f.p.columns[u].hidden===!0,e=f.p.columns[u].searchoptions.searchhidden===!0;if(e&&i||i&&!r){s=f.p.columns[u];break}}return n=s.searchoptions.sopt?s.searchoptions.sopt:f.p.sopt?f.p.sopt:s.searchtype==="string"?f.p.stropts:f.p.numopts,t.rules.push({field:s.name,op:n[0],data:""}),f.reDraw(),!1}),e.append(b)),r!==null&&(a=n("<input type='button' value='-' title='Delete group' class='delete-group'/>"),e.append(a),a.bind("click",function(){for(u=0;u<r.groups.length;u++)if(r.groups[u]===t){r.groups.splice(u,1);break}return f.reDraw(),f.onchange(),!1})),t.groups!==undefined)for(u=0;u<t.groups.length;u++)c=n("<tr></tr>"),o.append(c),d=n("<td class='first'></td>"),c.append(d),v=n("<td colspan='4'></td>"),v.append(this.createTableForGroup(t.groups[u],t)),c.append(v);if(t.groupOp===undefined&&(t.groupOp=f.p.groupOps[0].op),t.rules!==undefined)for(u=0;u<t.rules.length;u++)o.append(this.createTableRowForRule(t.rules[u],t));return o},this.createTableRowForRule=function(t,r){var u=this,a=n("<tr></tr>"),e,s,c,o,p="",w,tt,y,h,l,nt,b,k,v,g,d,it;for(a.append("<td class='first'></td>"),tt=n("<td class='columns'></td>"),a.append(tt),y=n("<select></select>"),l=[],tt.append(y),y.bind("change",function(){var i,a,r,v;for(t.field=n(y).val(),c=n(this).parents("tr:first"),e=0;e<u.p.columns.length;e++)if(u.p.columns[e].name===t.field){o=u.p.columns[e];break}if(o){for(o.searchoptions.id=n.jgrid.randId(),f&&o.inputtype==="text"&&(o.searchoptions.size||(o.searchoptions.size=10)),i=n.jgrid.createEl(o.inputtype,o.searchoptions,"",!0,u.p.ajaxSelectOptions,!0),n(i).addClass("input-elm"),s=o.searchoptions.sopt?o.searchoptions.sopt:u.p.sopt?u.p.sopt:o.searchtype==="string"?u.p.stropts:u.p.numopts,a="",r=0,l=[],n.each(u.p.ops,function(){l.push(this.name)}),e=0;e<s.length;e++)h=n.inArray(s[e],l),h!==-1&&(r===0&&(t.op=u.p.ops[h].name),a+="<option value='"+u.p.ops[h].name+"'>"+u.p.ops[h].description+"</option>",r++);n(".selectopts",c).empty().append(a),n(".selectopts",c)[0].selectedIndex=0,n.browser.msie&&n.browser.version<9&&(v=parseInt(n("select.selectopts",c)[0].offsetWidth)+1,n(".selectopts",c).width(v),n(".selectopts",c).css("width","auto")),n(".data",c).empty().append(i),n(".input-elm",c).bind("change",function(i){var r=n(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var r=i.target;t.data=r.nodeName.toUpperCase()==="SPAN"&&o.searchoptions&&n.isFunction(o.searchoptions.custom_value)?o.searchoptions.custom_value(n(r).children(".customelement:first"),"get"):r.value,u.onchange()},r)}),setTimeout(function(){t.data=n(i).val(),u.onchange()},0)}}),nt=0,e=0;e<u.p.columns.length;e++){var rt=typeof u.p.columns[e].search=="undefined"?!0:u.p.columns[e].search,ft=u.p.columns[e].hidden===!0,ut=u.p.columns[e].searchoptions.searchhidden===!0;(ut&&rt||rt&&!ft)&&(w="",t.field===u.p.columns[e].name&&(w=" selected='selected'",nt=e),p+="<option value='"+u.p.columns[e].name+"'"+w+">"+u.p.columns[e].label+"</option>")}for(y.append(p),b=n("<td class='operators'></td>"),a.append(b),o=i.columns[nt],o.searchoptions.id=n.jgrid.randId(),f&&o.inputtype==="text"&&(o.searchoptions.size||(o.searchoptions.size=10)),k=n.jgrid.createEl(o.inputtype,o.searchoptions,t.data,!0,u.p.ajaxSelectOptions,!0),v=n("<select class='selectopts'></select>"),b.append(v),v.bind("change",function(){t.op=n(v).val(),c=n(this).parents("tr:first");var i=n(".input-elm",c)[0];t.op==="nu"||t.op==="nn"?(t.data="",i.value="",i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):(i.removeAttribute("readonly"),i.removeAttribute("disabled")),u.onchange()}),s=o.searchoptions.sopt?o.searchoptions.sopt:u.p.sopt?u.p.sopt:o.searchtype==="string"?i.stropts:u.p.numopts,p="",n.each(u.p.ops,function(){l.push(this.name)}),e=0;e<s.length;e++)h=n.inArray(s[e],l),h!==-1&&(w=t.op===u.p.ops[h].name?" selected='selected'":"",p+="<option value='"+u.p.ops[h].name+"'"+w+">"+u.p.ops[h].description+"</option>");return v.append(p),g=n("<td class='data'></td>"),a.append(g),g.append(k),n(k).addClass("input-elm").bind("change",function(){t.data=o.inputtype==="custom"?o.searchoptions.custom_value(n(this).children(".customelement:first"),"get"):n(this).val(),u.onchange()}),d=n("<td></td>"),a.append(d),this.p.ruleButtons===!0&&(it=n("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),d.append(it),it.bind("click",function(){for(e=0;e<r.rules.length;e++)if(r.rules[e]===t){r.rules.splice(e,1);break}return u.reDraw(),u.onchange(),!1})),a},this.getStringForGroup=function(n){var t="(",i;if(n.groups!==undefined)for(i=0;i<n.groups.length;i++){t.length>1&&(t+=" "+n.groupOp+" ");try{t+=this.getStringForGroup(n.groups[i])}catch(u){alert(u)}}if(n.rules!==undefined)try{for(i=0;i<n.rules.length;i++)t.length>1&&(t+=" "+n.groupOp+" "),t+=this.getStringForRule(n.rules[i])}catch(r){alert(r)}return t+=")",t==="()"?"":t},this.getStringForRule=function(t){for(var o="",e="",h,s,f,c=["int","integer","float","number","currency"],r=0;r<this.p.ops.length;r++)if(this.p.ops[r].name===t.op){o=this.p.ops[r].operator,e=this.p.ops[r].name;break}for(r=0;r<this.p.columns.length;r++)if(this.p.columns[r].name===t.field){h=this.p.columns[r];break}return f=t.data,(e==="bw"||e==="bn")&&(f=f+"%"),(e==="ew"||e==="en")&&(f="%"+f),(e==="cn"||e==="nc")&&(f="%"+f+"%"),(e==="in"||e==="ni")&&(f=" ("+f+")"),i.errorcheck&&u(t.data,h),s=n.inArray(h.searchtype,c)!==-1||e==="nn"||e==="nu"?t.field+" "+o+" "+f:t.field+" "+o+' "'+f+'"'},this.resetFilter=function(){this.p.filter=n.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){n("th.ui-state-error",this).html(""),n("tr.error",this).hide()},this.showError=function(){n("th.ui-state-error",this).html(this.p.errmsg),n("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(i.filter)},this.toString=function(){function i(t){if(n.p.errorcheck){for(var r,i=0;i<n.p.columns.length;i++)if(n.p.columns[i].name===t.field){r=n.p.columns[i];break}r&&u(t.data,r)}return t.op+"(item."+t.field+",'"+t.data+"')"}function t(n){var r="(",u;if(n.groups!==undefined)for(u=0;u<n.groups.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=t(n.groups[u]);if(n.rules!==undefined)for(u=0;u<n.rules.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=i(n.rules[u]);return r+=")",r==="()"?"":r}var n=this;return t(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},n.extend(n.fn.jqFilter,{toSQLString:function(){var n="";return this.each(function(){n=this.toUserFriendlyString()}),n},filterData:function(){var n;return this.each(function(){n=this.p.filter}),n},getParameter:function(n){return n!==undefined&&this.p.hasOwnProperty(n)?this.p[n]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(n){typeof n=="string"&&(n=jQuery.jgrid.parse(n)),this.each(function(){this.p.filter=n,this.reDraw(),this.onchange()})}})}(jQuery),function(n){"use strict";var t={};n.jgrid.extend({searchGrid:function(t){return t=n.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null},n.jgrid.search,t||{}),this.each(function(){function k(u){c=n(i).triggerHandler("jqGridFilterBeforeShow",[u]),typeof c=="undefined"&&(c=!0),c&&n.isFunction(t.beforeShowSearch)&&(c=t.beforeShowSearch.call(i,u)),c&&(n.jgrid.viewModal("#"+n.jgrid.jqID(f.themodal),{gbox:"#gbox_"+n.jgrid.jqID(r),jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),n(i).triggerHandler("jqGridFilterAfterShow",[u]),n.isFunction(t.afterShowSearch)&&t.afterShowSearch.call(i,u))}var i=this,a;if(i.grid){var r="fbox_"+i.p.id,c=!0,f={themodal:"searchmod"+r,modalhead:"searchhd"+r,modalcontent:"searchcnt"+r,scrollelm:r},e=i.p.postData[t.sFilter];if(typeof e=="string"&&(e=n.jgrid.parse(e)),t.recreateFilter===!0&&n("#"+n.jgrid.jqID(f.themodal)).remove(),n("#"+n.jgrid.jqID(f.themodal)).html()!==null)k(n("#fbox_"+n.jgrid.jqID(+i.p.id)));else{var u=n("<div><div id='"+r+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+n.jgrid.jqID(i.p.id)),b="left",w="";i.p.direction=="rtl"&&(b="right",w=" style='text-align:left'",u.attr("dir","rtl"));var o=n.extend([],i.p.colModel),g="<a href='javascript:void(0)' id='"+r+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+t.Find+"</a>",d="<a href='javascript:void(0)' id='"+r+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+t.Reset+"</a>",v="",h="",y,s=!1,p,l=-1;t.showQuery&&(v="<a href='javascript:void(0)' id='"+r+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),t.columns.length?o=t.columns:n.each(o,function(n,t){if(t.label||(t.label=i.p.colNames[n]),!s){var r=typeof t.search=="undefined"?!0:t.search,f=t.hidden===!0,u=t.searchoptions&&t.searchoptions.searchhidden===!0;(u&&r||r&&!f)&&(s=!0,y=t.index||t.name,l=n)}}),(!e&&y||t.multipleSearch===!1)&&(a="eq",l>=0&&o[l].searchoptions&&o[l].searchoptions.sopt?a=o[l].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(a=t.sopt[0]),e={groupOp:"AND",rules:[{field:y,op:a,data:""}]}),s=!1,t.tmplNames&&t.tmplNames.length&&(s=!0,h=t.tmplLabel,h+="<select class='ui-template'>",h+="<option value='default'>Default</option>",n.each(t.tmplNames,function(n,t){h+="<option value='"+n+"'>"+t+"</option>"}),h+="</select>"),p="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+r+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+b+"'>"+d+h+"</td><td class='EditButton' "+w+">"+v+g+"</td></tr></tbody></table>",r=n.jgrid.jqID(r),n("#"+r).jqFilter({columns:o,filter:t.loadDefaults?e:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,afterRedraw:t.afterRedraw,_gridsopt:n.jgrid.search.odata,ajaxSelectOptions:i.p.ajaxSelectOptions,groupOps:t.groupOps,onChange:function(){this.p.showQuery&&n(".query",this).html(this.toUserFriendlyString()),n.isFunction(t.afterChange)&&t.afterChange.call(i,n("#"+r),t)},direction:i.p.direction}),u.append(p),s&&t.tmplFilters&&t.tmplFilters.length&&n(".ui-template",u).bind("change",function(){var i=n(this).val();return i=="default"?n("#"+r).jqFilter("addFilter",e):n("#"+r).jqFilter("addFilter",t.tmplFilters[parseInt(i,10)]),!1}),t.multipleGroup===!0&&(t.multipleSearch=!0),n(i).triggerHandler("jqGridFilterInitialize",[n("#"+r)]),n.isFunction(t.onInitializeSearch)&&t.onInitializeSearch.call(i,n("#"+r)),t.gbox="#gbox_"+r,t.layer?n.jgrid.createModal(f,u,t,"#gview_"+n.jgrid.jqID(i.p.id),n("#gbox_"+n.jgrid.jqID(i.p.id))[0],"#"+n.jgrid.jqID(t.layer),{position:"relative"}):n.jgrid.createModal(f,u,t,"#gview_"+n.jgrid.jqID(i.p.id),n("#gbox_"+n.jgrid.jqID(i.p.id))[0]),(t.searchOnEnter||t.closeOnEscape)&&n("#"+n.jgrid.jqID(f.themodal)).keydown(function(i){var u=n(i.target);return t.searchOnEnter&&i.which===13&&!u.hasClass("add-group")&&!u.hasClass("add-rule")&&!u.hasClass("delete-group")&&!u.hasClass("delete-rule")&&(!u.hasClass("fm-button")||!u.is("[id$=_query]"))?(n("#"+r+"_search").focus().click(),!1):t.closeOnEscape&&i.which===27?(n("#"+n.jgrid.jqID(f.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click(),!1):void 0}),v&&n("#"+r+"_query").bind("click",function(){return n(".queryresult",u).toggle(),!1}),t.stringResult===undefined&&(t.stringResult=t.multipleSearch),n("#"+r+"_search").bind("click",function(){var o=n("#"+r),u={},s,e=o.jqFilter("filterData");if(t.errorcheck&&(o[0].hideError(),t.showQuery||o.jqFilter("toSQLString"),o[0].p.error))return o[0].showError(),!1;if(t.stringResult){try{s=xmlJsonClass.toJson(e,"","",!1)}catch(c){try{s=JSON.stringify(e)}catch(h){}}typeof s=="string"&&(u[t.sFilter]=s,n.each([t.sField,t.sValue,t.sOper],function(){u[this]=""}))}else t.multipleSearch?(u[t.sFilter]=e,n.each([t.sField,t.sValue,t.sOper],function(){u[this]=""})):(u[t.sField]=e.rules[0].field,u[t.sValue]=e.rules[0].data,u[t.sOper]=e.rules[0].op,u[t.sFilter]="");return i.p.search=!0,n.extend(i.p.postData,u),n(i).triggerHandler("jqGridFilterSearch"),n.isFunction(t.onSearch)&&t.onSearch.call(i),n(i).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&n.jgrid.hideModal("#"+n.jgrid.jqID(f.themodal),{gb:"#gbox_"+n.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1}),n("#"+r+"_reset").bind("click",function(){var f={},e=n("#"+r);return i.p.search=!1,t.multipleSearch===!1?f[t.sField]=f[t.sValue]=f[t.sOper]="":f[t.sFilter]="",e[0].resetFilter(),s&&n(".ui-template",u).val("default"),n.extend(i.p.postData,f),n(i).triggerHandler("jqGridFilterReset"),n.isFunction(t.onReset)&&t.onReset.call(i),n(i).trigger("reloadGrid",[{page:1}]),!1}),k(n("#"+r)),n(".fm-button:not(.ui-state-disabled)",u).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")})}}})},editGridRow:function(i,r){return r=n.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},n.jgrid.edit,r||{}),t[n(this)[0].p.id]=r,this.each(function(){function ri(){return n(o+" > tbody > tr > td > .FormElement").each(function(){var r=n(".customelement",this),s,t,e,i;if(r.length)s=r[0],t=n(s).attr("name"),n.each(u.p.colModel,function(){if(this.name===t&&this.editoptions&&n.isFunction(this.editoptions.custom_value)){try{if(f[t]=this.editoptions.custom_value.call(u,n("#"+n.jgrid.jqID(t),o),"get"),f[t]===undefined)throw"e1";}catch(i){i==="e1"?n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,i.message,jQuery.jgrid.edit.bClose)}return!0}});else{switch(n(this).get(0).type){case"checkbox":n(this).is(":checked")?f[this.name]=n(this).val():(e=n(this).attr("offval"),f[this.name]=e);break;case"select-one":f[this.name]=n("option:selected",this).val(),a[this.name]=n("option:selected",this).text();break;case"select-multiple":f[this.name]=n(this).val(),f[this.name]=f[this.name]?f[this.name].join(","):"",i=[],n("option:selected",this).each(function(t,r){i[t]=n(r).text()}),a[this.name]=i.join(",");break;case"password":case"text":case"textarea":case"button":f[this.name]=n(this).val()}u.p.autoencode&&(f[this.name]=n.jgrid.htmlEncode(f[this.name]))}}),!0}function ui(i,r,f,e){for(var s,p,h,a=0,o,w,l,k=[],c=!1,d="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",b="",v,y=1;y<=e;y++)b+=d;return i!="_empty"&&(c=n(r).jqGrid("getInd",i)),n(r.p.colModel).each(function(v){var nt;if(s=this.name,p=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,w=p?"style='display:none'":"",s!=="cb"&&s!=="subgrid"&&this.editable===!0&&s!=="rn"){if(c===!1)o="";else if(s==r.p.ExpandColumn&&r.p.treeGrid===!0)o=n("td:eq("+v+")",r.rows[c]).text();else{try{o=n.unformat.call(r,n("td:eq("+v+")",r.rows[c]),{rowId:i,colModel:this},v)}catch(it){o=this.edittype&&this.edittype=="textarea"?n("td:eq("+v+")",r.rows[c]).text():n("td:eq("+v+")",r.rows[c]).html()}o&&o!="&nbsp;"&&o!="&#160;"&&(o.length!=1||o.charCodeAt(0)!=160)||(o="")}var d=n.extend({},this.editoptions||{},{id:s,name:s}),y=n.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),g=parseInt(y.rowpos,10)||a+1,tt=parseInt((parseInt(y.colpos,10)||1)*2,10);i=="_empty"&&d.defaultValue&&(o=n.isFunction(d.defaultValue)?d.defaultValue.call(u):d.defaultValue),this.edittype||(this.edittype="text"),u.p.autoencode&&(o=n.jgrid.htmlDecode(o)),l=n.jgrid.createEl.call(u,this.edittype,d,o,!1,n.extend({},n.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{})),o===""&&this.edittype=="checkbox"&&(o=n(l).attr("offval")),o===""&&this.edittype=="select"&&(o=n("option:eq(0)",l).text()),(t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData[s]=o),n(l).addClass("FormElement"),(this.edittype=="text"||this.edittype=="textarea")&&n(l).addClass("ui-widget-content ui-corner-all"),h=n(f).find("tr[rowpos="+g+"]"),y.rowabove&&(nt=n("<tr><td class='contentinfo' colspan='"+e*2+"'>"+y.rowcontent+"</td></tr>"),n(f).append(nt),nt[0].rp=g),h.length===0&&(h=n("<tr "+w+" rowpos='"+g+"'></tr>").addClass("FormData").attr("id","tr_"+s),n(h).append(b),n(f).append(h),h[0].rp=g),n("td:eq("+(tt-2)+")",h[0]).html(typeof y.label=="undefined"?r.p.colNames[v]:y.label),n("td:eq("+(tt-1)+")",h[0]).append(y.elmprefix).append(l).append(y.elmsuffix),k[a]=v,a++}}),a>0&&(v=n("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(e*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/></td></tr>"),v[0].rp=a+999,n(f).append(v),(t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData[r.p.id+"_id"]=i)),k}function k(i,r,f){var s,p=0,e,h,a,l,v,c,y;if((t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData={},t[u.p.id]._savedData[r.p.id+"_id"]=i),c=r.p.colModel,i=="_empty"){n(c).each(function(){s=this.name,a=n.extend({},this.editoptions||{}),h=n("#"+n.jgrid.jqID(s),"#"+f),h&&h.length&&h[0]!==null&&(l="",a.defaultValue?(l=n.isFunction(a.defaultValue)?a.defaultValue.call(u):a.defaultValue,h[0].type=="checkbox"?(v=l.toLowerCase(),v.search(/(false|0|no|off|undefined)/i)<0&&v!==""?(h[0].checked=!0,h[0].defaultChecked=!0,h[0].value=l):(h[0].checked=!1,h[0].defaultChecked=!1)):h.val(l)):h[0].type=="checkbox"?(h[0].checked=!1,h[0].defaultChecked=!1,l=n(h).attr("offval")):h[0].type&&h[0].type.substr(0,6)=="select"?h[0].selectedIndex=0:h.val(l),(t[u.p.id].checkOnSubmit===!0||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData[s]=l))}),n("#id_g","#"+f).val(i);return}(y=n(r).jqGrid("getInd",i,!0),y)&&(n('td[role="gridcell"]',y).each(function(o){var h,l;if(s=c[o].name,s!=="cb"&&s!=="subgrid"&&s!=="rn"&&c[o].editable===!0){if(s==r.p.ExpandColumn&&r.p.treeGrid===!0)e=n(this).text();else try{e=n.unformat.call(r,n(this),{rowId:i,colModel:c[o]},o)}catch(v){e=c[o].edittype=="textarea"?n(this).text():n(this).html()}u.p.autoencode&&(e=n.jgrid.htmlDecode(e)),(t[u.p.id].checkOnSubmit===!0||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData[s]=e),s=n.jgrid.jqID(s);switch(c[o].edittype){case"password":case"text":case"button":case"image":case"textarea":(e=="&nbsp;"||e=="&#160;"||e.length==1&&e.charCodeAt(0)==160)&&(e=""),n("#"+s,"#"+f).val(e);break;case"select":h=e.split(","),h=n.map(h,function(t){return n.trim(t)}),n("#"+s+" option","#"+f).each(function(){this.selected=c[o].editoptions.multiple||n.trim(e)!=n.trim(n(this).text())&&h[0]!=n.trim(n(this).text())&&h[0]!=n.trim(n(this).val())?c[o].editoptions.multiple?n.inArray(n.trim(n(this).text()),h)>-1||n.inArray(n.trim(n(this).val()),h)>-1?!0:!1:!1:!0});break;case"checkbox":e=e+"",c[o].editoptions&&c[o].editoptions.value?(l=c[o].editoptions.value.split(":"),l[0]==e?(n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("checked",!0),n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("defaultChecked",!0)):(n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("checked",!1),n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("defaultChecked",!1))):(e=e.toLowerCase(),e.search(/(false|0|no|off|undefined)/i)<0&&e!==""?(n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("checked",!0),n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("defaultChecked",!0)):(n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("checked",!1),n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("defaultChecked",!1)));break;case"custom":try{if(c[o].editoptions&&n.isFunction(c[o].editoptions.custom_value))c[o].editoptions.custom_value.call(u,n("#"+s,"#"+f),"set",e);else throw"e1";}catch(a){a=="e1"?n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,a.message,jQuery.jgrid.edit.bClose)}}p++}}),p>0&&n("#id_g",o).val(i))}function fi(){n.each(u.p.colModel,function(n,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&f.hasOwnProperty(t.name)&&f[t.name]===""&&(f[t.name]="null")})}function b(){var g,i=[!0,"",""],nt={},l=u.p.prmNames,v,p,tt,b,it,y=n(u).triggerHandler("jqGridAddEditBeforeCheckValues",[n("#"+e),c]),ut,rt,w,d;y&&typeof y=="object"&&(f=y),n.isFunction(t[u.p.id].beforeCheckValues)&&(y=t[u.p.id].beforeCheckValues.call(u,f,n("#"+e),f[u.p.id+"_id"]=="_empty"?l.addoper:l.editoper),y&&typeof y=="object"&&(f=y));for(tt in f)if(f.hasOwnProperty(tt)&&(i=n.jgrid.checkValues.call(u,f[tt],tt,u),i[0]===!1))break;if(fi(),i[0]&&(nt=n(u).triggerHandler("jqGridAddEditClickSubmit",[t[u.p.id],f,c]),nt===undefined&&n.isFunction(t[u.p.id].onclickSubmit)&&(nt=t[u.p.id].onclickSubmit.call(u,t[u.p.id],f)||{}),i=n(u).triggerHandler("jqGridAddEditBeforeSubmit",[f,n("#"+e),c]),i===undefined&&(i=[!0,"",""]),i[0]&&n.isFunction(t[u.p.id].beforeSubmit)&&(i=t[u.p.id].beforeSubmit.call(u,f,n("#"+e)))),i[0]&&!t[u.p.id].processing){if(t[u.p.id].processing=!0,n("#sData",o+"_2").addClass("ui-state-active"),p=l.oper,v=l.id,f[p]=n.trim(f[u.p.id+"_id"])=="_empty"?l.addoper:l.editoper,f[p]!=l.addoper?f[v]=f[u.p.id+"_id"]:f[v]===undefined&&(f[v]=f[u.p.id+"_id"]),delete f[u.p.id+"_id"],f=n.extend(f,t[u.p.id].editData,nt),u.p.treeGrid===!0){f[p]==l.addoper&&(b=n(u).jqGrid("getGridParam","selrow"),ut=u.p.treeGridModel=="adjacency"?u.p.treeReader.parent_id_field:"parent_id",f[ut]=b);for(it in u.p.treeReader)if(u.p.treeReader.hasOwnProperty(it)&&(rt=u.p.treeReader[it],f.hasOwnProperty(rt))){if(f[p]==l.addoper&&it==="parent_id_field")continue;delete f[rt]}}f[v]=n.jgrid.stripPref(u.p.idPrefix,f[v]),w=n.extend({url:t[u.p.id].url?t[u.p.id].url:n(u).jqGrid("getGridParam","editurl"),type:t[u.p.id].mtype,data:n.isFunction(t[u.p.id].serializeEditData)?t[u.p.id].serializeEditData.call(u,f):f,complete:function(y,w){if(f[v]=u.p.idPrefix+f[v],w!="success"?(i[0]=!1,i[1]=n(u).triggerHandler("jqGridAddEditErrorTextFormat",[y,c]),i[1]=n.isFunction(t[u.p.id].errorTextFormat)?t[u.p.id].errorTextFormat.call(u,y):w+" Status: '"+y.statusText+"'. Error code: "+y.status):(i=n(u).triggerHandler("jqGridAddEditAfterSubmit",[y,f,c]),i===undefined&&(i=[!0,"",""]),i[0]&&n.isFunction(t[u.p.id].afterSubmit)&&(i=t[u.p.id].afterSubmit.call(u,y,f))),i[0]===!1)n("#FormError>td",o).html(i[1]),n("#FormError",o).show();else if(n.each(u.p.colModel,function(){if(a[this.name]&&this.formatter&&this.formatter=="select")try{delete a[this.name]}catch(n){}}),f=n.extend(f,a),u.p.autoencode&&n.each(f,function(t,i){f[t]=n.jgrid.htmlDecode(i)}),f[p]==l.addoper?(i[2]||(i[2]=n.jgrid.randId()),f[v]=i[2],t[u.p.id].closeAfterAdd?(t[u.p.id].reloadAfterSubmit?n(u).trigger("reloadGrid"):u.p.treeGrid===!0?n(u).jqGrid("addChildNode",i[2],b,f):(n(u).jqGrid("addRowData",i[2],f,r.addedrow),n(u).jqGrid("setSelection",i[2])),n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose})):t[u.p.id].clearAfterAdd?(t[u.p.id].reloadAfterSubmit?n(u).trigger("reloadGrid"):u.p.treeGrid===!0?n(u).jqGrid("addChildNode",i[2],b,f):n(u).jqGrid("addRowData",i[2],f,r.addedrow),k("_empty",u,e)):t[u.p.id].reloadAfterSubmit?n(u).trigger("reloadGrid"):u.p.treeGrid===!0?n(u).jqGrid("addChildNode",i[2],b,f):n(u).jqGrid("addRowData",i[2],f,r.addedrow)):(t[u.p.id].reloadAfterSubmit?(n(u).trigger("reloadGrid"),t[u.p.id].closeAfterEdit||setTimeout(function(){n(u).jqGrid("setSelection",f[v])},1e3)):u.p.treeGrid===!0?n(u).jqGrid("setTreeRow",f[v],f):n(u).jqGrid("setRowData",f[v],f),t[u.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose})),n.isFunction(t[u.p.id].afterComplete)&&(g=y,setTimeout(function(){n(u).triggerHandler("jqGridAddEditAfterComplete",[g,f,n("#"+e),c]),t[u.p.id].afterComplete.call(u,g,f,n("#"+e)),g=null},500)),(t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(n("#"+e).data("disabled",!1),t[u.p.id]._savedData[u.p.id+"_id"]!="_empty"))for(var d in t[u.p.id]._savedData)f[d]&&(t[u.p.id]._savedData[d]=f[d]);t[u.p.id].processing=!1,n("#sData",o+"_2").removeClass("ui-state-active");try{n(":input:visible","#"+e)[0].focus()}catch(nt){}}},n.jgrid.ajaxOptions,t[u.p.id].ajaxEditOptions),w.url||t[u.p.id].useDataProxy||(n.isFunction(u.p.dataProxy)?t[u.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+n.jgrid.errors.nourl)),i[0]&&(t[u.p.id].useDataProxy?(d=u.p.dataProxy.call(u,w,"set_"+u.p.id),typeof d=="undefined"&&(d=[!0,""]),d[0]===!1?(i[0]=!1,i[1]=d[1]||"Error deleting the selected row!"):(w.data.oper==l.addoper&&t[u.p.id].closeAfterAdd&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose}),w.data.oper==l.editoper&&t[u.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose}))):n.ajax(w))}i[0]===!1&&(n("#FormError>td",o).html(i[1]),n("#FormError",o).show())}function gt(n,t){var r=!1,i;for(i in n)if(n[i]!=t[i]){r=!0;break}return r}function v(){var i=!0;return n("#FormError",o).hide(),t[u.p.id].checkOnUpdate&&(f={},a={},ri(),et=n.extend({},f,a),rt=gt(et,t[u.p.id]._savedData),rt&&(n("#"+e).data("disabled",!0),n(".confirm","#"+s.themodal).show(),i=!1)),i}function ni(){if(i!=="_empty"&&typeof u.p.savedRow!="undefined"&&u.p.savedRow.length>0&&n.isFunction(n.fn.jqGrid.restoreRow))for(var t=0;t<u.p.savedRow.length;t++)if(u.p.savedRow[t].id==i){n(u).jqGrid("restoreRow",i);break}}function bt(t,i){t===0?n("#pData",o+"_2").addClass("ui-state-disabled"):n("#pData",o+"_2").removeClass("ui-state-disabled"),t==i?n("#nData",o+"_2").addClass("ui-state-disabled"):n("#nData",o+"_2").removeClass("ui-state-disabled")}function wt(){var t=n(u).jqGrid("getDataIDs"),r=n("#id_g",o).val(),i=n.inArray(r,t);return[i,t]}var u=this,st,y,d,kt,vt,yt,g,ct;if(u.grid&&i){var h=u.p.id,e="FrmGrid_"+h,pt="TblGrid_"+h,o="#"+n.jgrid.jqID(pt),s={themodal:"editmod"+h,modalhead:"edithd"+h,modalcontent:"editcnt"+h,scrollelm:e},ut=n.isFunction(t[u.p.id].beforeShowForm)?t[u.p.id].beforeShowForm:!1,ft=n.isFunction(t[u.p.id].afterShowForm)?t[u.p.id].afterShowForm:!1,ot=n.isFunction(t[u.p.id].beforeInitData)?t[u.p.id].beforeInitData:!1,ti=n.isFunction(t[u.p.id].onInitializeForm)?t[u.p.id].onInitializeForm:!1,l=!0,w=1,at=0,f,a,et,rt,c;if(e=n.jgrid.jqID(e),i==="new"?(i="_empty",c="add",r.caption=t[u.p.id].addCaption):(r.caption=t[u.p.id].editCaption,c="edit"),r.recreateForm===!0&&n("#"+n.jgrid.jqID(s.themodal)).html()!==null&&n("#"+n.jgrid.jqID(s.themodal)).remove(),st=!0,r.checkOnUpdate&&r.jqModal&&!r.modal&&(st=!1),n("#"+n.jgrid.jqID(s.themodal)).html()!==null){if(l=n(u).triggerHandler("jqGridAddEditBeforeInitData",[n("#"+n.jgrid.jqID(e))]),typeof l=="undefined"&&(l=!0),l&&ot&&(l=ot.call(u,n("#"+e))),l===!1)return;ni(),n(".ui-jqdialog-title","#"+n.jgrid.jqID(s.modalhead)).html(r.caption),n("#FormError",o).hide(),t[u.p.id].topinfo?(n(".topinfo",o).html(t[u.p.id].topinfo),n(".tinfo",o).show()):n(".tinfo",o).hide(),t[u.p.id].bottominfo?(n(".bottominfo",o+"_2").html(t[u.p.id].bottominfo),n(".binfo",o+"_2").show()):n(".binfo",o+"_2").hide(),k(i,u,e),i!="_empty"&&t[u.p.id].viewPagerButtons?n("#pData, #nData",o+"_2").show():n("#pData, #nData",o+"_2").hide(),t[u.p.id].processing===!0&&(t[u.p.id].processing=!1,n("#sData",o+"_2").removeClass("ui-state-active")),n("#"+e).data("disabled")===!0&&(n(".confirm","#"+n.jgrid.jqID(s.themodal)).hide(),n("#"+e).data("disabled",!1)),n(u).triggerHandler("jqGridAddEditBeforeShowForm",[n("#"+e),c]),ut&&ut.call(u,n("#"+e)),n("#"+n.jgrid.jqID(s.themodal)).data("onClose",t[u.p.id].onClose),n.jgrid.viewModal("#"+n.jgrid.jqID(s.themodal),{gbox:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,jqM:!1,overlay:r.overlay,modal:r.modal}),st||n(".jqmOverlay").click(function(){return v()?(n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1}),n(u).triggerHandler("jqGridAddEditAfterShowForm",[n("#"+e),c]),ft&&ft.call(u,n("#"+e))}else{var si=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px",ii=n("<form name='FormPost' id='"+e+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+si+";'></form>").data("disabled",!1),p=n("<table id='"+pt+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(l=n(u).triggerHandler("jqGridAddEditBeforeInitData",[n("#"+e),c]),typeof l=="undefined"&&(l=!0),l&&ot&&(l=ot.call(u,n("#"+e))),l===!1)return;ni(),n(u.p.colModel).each(function(){var n=this.formoptions;w=Math.max(w,n?n.colpos||0:0),at=Math.max(at,n?n.rowpos||0:0)}),n(ii).append(p),y=n("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+w*2+"'></td></tr>"),y[0].rp=0,n(p).append(y),y=n("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+w*2+"'>"+t[u.p.id].topinfo+"</td></tr>"),y[0].rp=0,n(p).append(y);var tt=u.p.direction=="rtl"?!0:!1,oi=tt?"nData":"pData",ei=tt?"pData":"nData";ui(i,u,p,w);var dt="<a href='javascript:void(0)' id='"+oi+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",it="<a href='javascript:void(0)' id='"+ei+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",lt="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"</a>",ht="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"</a>",nt="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+pt+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(tt?it+dt:dt+it)+"</td><td class='EditButton'>"+lt+ht+"</td></tr>";nt+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+t[u.p.id].bottominfo+"</td></tr>",nt+="</tbody></table>",at>0&&(d=[],n.each(n(p)[0].rows,function(n,t){d[n]=t}),d.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(d,function(t,i){n("tbody",p).append(i)})),r.gbox="#gbox_"+n.jgrid.jqID(h),kt=!1,r.closeOnEscape===!0&&(r.closeOnEscape=!1,kt=!0),vt=n("<span></span>").append(ii).append(nt),n.jgrid.createModal(s,vt,r,"#gview_"+n.jgrid.jqID(u.p.id),n("#gbox_"+n.jgrid.jqID(u.p.id))[0]),tt&&(n("#pData, #nData",o+"_2").css("float","right"),n(".EditButton",o+"_2").css("text-align","left")),t[u.p.id].topinfo&&n(".tinfo",o).show(),t[u.p.id].bottominfo&&n(".binfo",o+"_2").show(),vt=null,nt=null,n("#"+n.jgrid.jqID(s.themodal)).keydown(function(i){var f=i.target;if(n("#"+e).data("disabled")===!0)return!1;if(t[u.p.id].savekey[0]===!0&&i.which==t[u.p.id].savekey[1]&&f.tagName!="TEXTAREA")return n("#sData",o+"_2").trigger("click"),!1;if(i.which===27)return v()?(kt&&n.jgrid.hideModal(this,{gb:r.gbox,jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1;if(t[u.p.id].navkeys[0]===!0){if(n("#id_g",o).val()=="_empty")return!0;if(i.which==t[u.p.id].navkeys[1])return n("#pData",o+"_2").trigger("click"),!1;if(i.which==t[u.p.id].navkeys[2])return n("#nData",o+"_2").trigger("click"),!1}}),r.checkOnUpdate&&(n("a.ui-jqdialog-titlebar-close span","#"+n.jgrid.jqID(s.themodal)).removeClass("jqmClose"),n("a.ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(s.themodal)).unbind("click").click(function(){return v()?(n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1})),r.saveicon=n.extend([!0,"left","ui-icon-disk"],r.saveicon),r.closeicon=n.extend([!0,"left","ui-icon-close"],r.closeicon),r.saveicon[0]===!0&&n("#sData",o+"_2").addClass(r.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.saveicon[2]+"'></span>"),r.closeicon[0]===!0&&n("#cData",o+"_2").addClass(r.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.closeicon[2]+"'></span>"),(t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(lt="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bYes+"</a>",it="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bNo+"</a>",ht="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bExit+"</a>",g=r.zIndex||999,g++,yt=n.browser.msie&&n.browser.version==6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",n("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+g+";display:none;'>&#160;"+yt+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(g+1)+"'>"+r.saveData+"<br/><br/>"+lt+it+ht+"</div>").insertAfter("#"+e),n("#sNew","#"+n.jgrid.jqID(s.themodal)).click(function(){return b(),n("#"+e).data("disabled",!1),n(".confirm","#"+n.jgrid.jqID(s.themodal)).hide(),!1}),n("#nNew","#"+n.jgrid.jqID(s.themodal)).click(function(){return n(".confirm","#"+n.jgrid.jqID(s.themodal)).hide(),n("#"+e).data("disabled",!1),setTimeout(function(){n(":input","#"+e)[0].focus()},0),!1}),n("#cNew","#"+n.jgrid.jqID(s.themodal)).click(function(){return n(".confirm","#"+n.jgrid.jqID(s.themodal)).hide(),n("#"+e).data("disabled",!1),n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1})),n(u).triggerHandler("jqGridAddEditInitializeForm",[n("#"+e),c]),ti&&ti.call(u,n("#"+e)),i!="_empty"&&t[u.p.id].viewPagerButtons?n("#pData,#nData",o+"_2").show():n("#pData,#nData",o+"_2").hide(),n(u).triggerHandler("jqGridAddEditBeforeShowForm",[n("#"+e),c]),ut&&ut.call(u,n("#"+e)),n("#"+n.jgrid.jqID(s.themodal)).data("onClose",t[u.p.id].onClose),n.jgrid.viewModal("#"+n.jgrid.jqID(s.themodal),{gbox:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,overlay:r.overlay,modal:r.modal}),st||n(".jqmOverlay").click(function(){return v()?(n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1}),n(u).triggerHandler("jqGridAddEditAfterShowForm",[n("#"+e),c]),ft&&ft.call(u,n("#"+e)),n(".fm-button","#"+n.jgrid.jqID(s.themodal)).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),n("#sData",o+"_2").click(function(){return f={},a={},n("#FormError",o).hide(),ri(),f[u.p.id+"_id"]=="_empty"?b():r.checkOnSubmit===!0?(et=n.extend({},f,a),rt=gt(et,t[u.p.id]._savedData),rt?(n("#"+e).data("disabled",!0),n(".confirm","#"+n.jgrid.jqID(s.themodal)).show()):b()):b(),!1}),n("#cData",o+"_2").click(function(){return v()?(n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1}),n("#nData",o+"_2").click(function(){if(!v())return!1;n("#FormError",o).hide();var t=wt();return t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]&&(n(u).triggerHandler("jqGridAddEditClickPgButtons",["next",n("#"+e),t[1][t[0]]]),n.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(u,"next",n("#"+e),t[1][t[0]]),k(t[1][t[0]+1],u,e),n(u).jqGrid("setSelection",t[1][t[0]+1]),n(u).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",n("#"+e),t[1][t[0]]]),n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(u,"next",n("#"+e),t[1][t[0]+1]),bt(t[0]+1,t[1].length-1)),!1}),n("#pData",o+"_2").click(function(){if(!v())return!1;n("#FormError",o).hide();var t=wt();return t[0]!=-1&&t[1][t[0]-1]&&(n(u).triggerHandler("jqGridAddEditClickPgButtons",["prev",n("#"+e),t[1][t[0]]]),n.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(u,"prev",n("#"+e),t[1][t[0]]),k(t[1][t[0]-1],u,e),n(u).jqGrid("setSelection",t[1][t[0]-1]),n(u).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",n("#"+e),t[1][t[0]]]),n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(u,"prev",n("#"+e),t[1][t[0]-1]),bt(t[0]-1,t[1].length-1)),!1})}ct=wt(),bt(ct[0],ct[1].length-1)}})},viewGridRow:function(t,i){return i=n.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0},n.jgrid.view,i||{}),this.each(function(){function c(){(i.closeOnEscape===!0||i.navkeys[0]===!0)&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(s.modalhead)).focus()},0)}function ot(t,r,u,f){for(var o,s,e,h=0,y,d,nt=[],v=!1,tt="<td class='CaptionTD form-view-label ui-widget-content' width='"+i.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",g="",rt="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",it=["integer","number","currency"],c=0,l=0,w,p,k,b,a=1;a<=f;a++)g+=a==1?tt:rt;return n(r.p.colModel).each(function(){s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,s||this.align!=="right"||(this.formatter&&n.inArray(this.formatter,it)!==-1?c=Math.max(c,parseInt(this.width,10)):l=Math.max(l,parseInt(this.width,10)))}),w=c!==0?c:l!==0?l:0,v=n(r).jqGrid("getInd",t),n(r.p.colModel).each(function(t){var a;if(o=this.name,p=!1,s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,d=s?"style='display:none'":"",k=typeof this.viewable!="boolean"?!0:this.viewable,o!=="cb"&&o!=="subgrid"&&o!=="rn"&&k){y=v===!1?"":o==r.p.ExpandColumn&&r.p.treeGrid===!0?n("td:eq("+t+")",r.rows[v]).text():n("td:eq("+t+")",r.rows[v]).html(),p=this.align==="right"&&w!==0?!0:!1;var b=n.extend({},this.editoptions||{},{id:o,name:o}),i=n.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),c=parseInt(i.rowpos,10)||h+1,l=parseInt((parseInt(i.colpos,10)||1)*2,10);i.rowabove&&(a=n("<tr><td class='contentinfo' colspan='"+f*2+"'>"+i.rowcontent+"</td></tr>"),n(u).append(a),a[0].rp=c),e=n(u).find("tr[rowpos="+c+"]"),e.length===0&&(e=n("<tr "+d+" rowpos='"+c+"'></tr>").addClass("FormData").attr("id","trv_"+o),n(e).append(g),n(u).append(e),e[0].rp=c),n("td:eq("+(l-2)+")",e[0]).html("<b>"+(typeof i.label=="undefined"?r.p.colNames[t]:i.label)+"</b>"),n("td:eq("+(l-1)+")",e[0]).append("<span>"+y+"</span>").attr("id","v_"+o),p&&n("td:eq("+(l-1)+") span",e[0]).css({"text-align":"right",width:w+"px"}),nt[h]=t,h++}}),h>0&&(b=n("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(f*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>"),b[0].rp=h+99,n(u).append(b)),nt}function k(t,i){var u,o,s=0,f,h,e;(e=n(i).jqGrid("getInd",t,!0),e)&&(n("td",e).each(function(t){u=i.p.colModel[t].name,o=i.p.colModel[t].editrules&&i.p.colModel[t].editrules.edithidden===!0?!1:i.p.colModel[t].hidden===!0?!0:!1,u!=="cb"&&u!=="subgrid"&&u!=="rn"&&(f=u==i.p.ExpandColumn&&i.p.treeGrid===!0?n(this).text():n(this).html(),h=n.extend({},i.p.colModel[t].editoptions||{}),u=n.jgrid.jqID("v_"+u),n("#"+u+" span","#"+r).html(f),o&&n("#"+u,"#"+r).parents("tr:first").hide(),s++)}),s>0&&n("#id_g","#"+r).val(t))}function nt(t,i){t===0?n("#pData","#"+r+"_2").addClass("ui-state-disabled"):n("#pData","#"+r+"_2").removeClass("ui-state-disabled"),t==i?n("#nData","#"+r+"_2").addClass("ui-state-disabled"):n("#nData","#"+r+"_2").removeClass("ui-state-disabled")}function p(){var t=n(u).jqGrid("getDataIDs"),f=n("#id_g","#"+r).val(),i=n.inArray(f,t);return[i,t]}var u=this,h,w,b,y;if(u.grid&&t){var f=u.p.id,e="ViewGrid_"+n.jgrid.jqID(f),r="ViewTbl_"+n.jgrid.jqID(f),ft="ViewGrid_"+f,ut="ViewTbl_"+f,s={themodal:"viewmod"+f,modalhead:"viewhd"+f,modalcontent:"viewcnt"+f,scrollelm:e},v=n.isFunction(i.beforeInitData)?i.beforeInitData:!1,o=!0,d=1,g=0;if(n("#"+n.jgrid.jqID(s.themodal)).html()!==null){if(v&&(o=v.call(u,n("#"+e)),typeof o=="undefined"&&(o=!0)),o===!1)return;n(".ui-jqdialog-title","#"+n.jgrid.jqID(s.modalhead)).html(i.caption),n("#FormError","#"+r).hide(),k(t,u),n.isFunction(i.beforeShowForm)&&i.beforeShowForm.call(u,n("#"+e)),n.jgrid.viewModal("#"+n.jgrid.jqID(s.themodal),{gbox:"#gbox_"+n.jgrid.jqID(f),jqm:i.jqModal,jqM:!1,overlay:i.overlay,modal:i.modal}),c()}else{var st=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",it=n("<form name='FormPost' id='"+ft+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+st+";'></form>"),l=n("<table id='"+ut+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(v&&(o=v.call(u,n("#"+e)),typeof o=="undefined"&&(o=!0)),o===!1)return;n(u.p.colModel).each(function(){var n=this.formoptions;d=Math.max(d,n?n.colpos||0:0),g=Math.max(g,n?n.rowpos||0:0)}),n(it).append(l),ot(t,u,l,d);var a=u.p.direction=="rtl"?!0:!1,ct=a?"nData":"pData",ht=a?"pData":"nData",tt="<a href='javascript:void(0)' id='"+ct+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",rt="<a href='javascript:void(0)' id='"+ht+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",et="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+i.bClose+"</a>";g>0&&(h=[],n.each(n(l)[0].rows,function(n,t){h[n]=t}),h.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(h,function(t,i){n("tbody",l).append(i)})),i.gbox="#gbox_"+n.jgrid.jqID(f),w=!1,i.closeOnEscape===!0&&(i.closeOnEscape=!1,w=!0),b=n("<span></span>").append(it).append("<table border='0' class='EditTable' id='"+r+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+i.labelswidth+"'>"+(a?rt+tt:tt+rt)+"</td><td class='EditButton'>"+et+"</td></tr></tbody></table>"),n.jgrid.createModal(s,b,i,"#gview_"+n.jgrid.jqID(u.p.id),n("#gview_"+n.jgrid.jqID(u.p.id))[0]),a&&(n("#pData, #nData","#"+r+"_2").css("float","right"),n(".EditButton","#"+r+"_2").css("text-align","left")),i.viewPagerButtons||n("#pData, #nData","#"+r+"_2").hide(),b=null,n("#"+s.themodal).keydown(function(t){if(t.which===27)return w&&n.jgrid.hideModal(this,{gb:i.gbox,jqm:i.jqModal,onClose:i.onClose}),!1;if(i.navkeys[0]===!0){if(t.which===i.navkeys[1])return n("#pData","#"+r+"_2").trigger("click"),!1;if(t.which===i.navkeys[2])return n("#nData","#"+r+"_2").trigger("click"),!1}}),i.closeicon=n.extend([!0,"left","ui-icon-close"],i.closeicon),i.closeicon[0]===!0&&n("#cData","#"+r+"_2").addClass(i.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.closeicon[2]+"'></span>"),n.isFunction(i.beforeShowForm)&&i.beforeShowForm.call(u,n("#"+e)),n.jgrid.viewModal("#"+n.jgrid.jqID(s.themodal),{gbox:"#gbox_"+n.jgrid.jqID(f),jqm:i.jqModal,modal:i.modal}),n(".fm-button:not(.ui-state-disabled)","#"+r+"_2").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),c(),n("#cData","#"+r+"_2").click(function(){return n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(f),jqm:i.jqModal,onClose:i.onClose}),!1}),n("#nData","#"+r+"_2").click(function(){n("#FormError","#"+r).hide();var t=p();return t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]&&(n.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(u,"next",n("#"+e),t[1][t[0]]),k(t[1][t[0]+1],u),n(u).jqGrid("setSelection",t[1][t[0]+1]),n.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(u,"next",n("#"+e),t[1][t[0]+1]),nt(t[0]+1,t[1].length-1)),c(),!1}),n("#pData","#"+r+"_2").click(function(){n("#FormError","#"+r).hide();var t=p();return t[0]!=-1&&t[1][t[0]-1]&&(n.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(u,"prev",n("#"+e),t[1][t[0]]),k(t[1][t[0]-1],u),n(u).jqGrid("setSelection",t[1][t[0]-1]),n.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(u,"prev",n("#"+e),t[1][t[0]-1]),nt(t[0]-1,t[1].length-1)),c(),!1})}y=p(),nt(y[0],y[1].length-1)}})},delGridRow:function(i,r){return r=n.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},n.jgrid.del,r||{}),t[n(this)[0].p.id]=r,this.each(function(){var u=this,y,s,w,g;if(u.grid&&i){var p=n.isFunction(t[u.p.id].beforeShowForm),b=n.isFunction(t[u.p.id].afterShowForm),a=n.isFunction(t[u.p.id].beforeInitData)?t[u.p.id].beforeInitData:!1,e=u.p.id,v={},o=!0,f="DelTbl_"+n.jgrid.jqID(e),c,k,l,d,nt="DelTbl_"+e,h={themodal:"delmod"+e,modalhead:"delhd"+e,modalcontent:"delcnt"+e,scrollelm:f};if(jQuery.isArray(i)&&(i=i.join()),n("#"+n.jgrid.jqID(h.themodal)).html()!==null){if(a&&(o=a.call(u,n("#"+f)),typeof o=="undefined"&&(o=!0)),o===!1)return;n("#DelData>td","#"+f).text(i),n("#DelError","#"+f).hide(),t[u.p.id].processing===!0&&(t[u.p.id].processing=!1,n("#dData","#"+f).removeClass("ui-state-active")),p&&t[u.p.id].beforeShowForm.call(u,n("#"+f)),n.jgrid.viewModal("#"+n.jgrid.jqID(h.themodal),{gbox:"#gbox_"+n.jgrid.jqID(e),jqm:t[u.p.id].jqModal,jqM:!1,overlay:t[u.p.id].overlay,modal:t[u.p.id].modal}),b&&t[u.p.id].afterShowForm.call(u,n("#"+f))}else{if(y=isNaN(t[u.p.id].dataheight)?t[u.p.id].dataheight:t[u.p.id].dataheight+"px",s="<div id='"+nt+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+y+";'>",s+="<table class='DelTable'><tbody>",s+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",s+="<tr id='DelData' style='display:none'><td >"+i+"</td></tr>",s+='<tr><td class="delmsg" style="white-space:pre;">'+t[u.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",s+="</tbody></table></div>",w="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"</a>",g="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"</a>",s+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+f+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+w+"&#160;"+g+"</td></tr></tbody></table>",r.gbox="#gbox_"+n.jgrid.jqID(e),n.jgrid.createModal(h,s,r,"#gview_"+n.jgrid.jqID(u.p.id),n("#gview_"+n.jgrid.jqID(u.p.id))[0]),a&&(o=a.call(u,n("#"+f)),typeof o=="undefined"&&(o=!0)),o===!1)return;n(".fm-button","#"+f+"_2").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),r.delicon=n.extend([!0,"left","ui-icon-scissors"],t[u.p.id].delicon),r.cancelicon=n.extend([!0,"left","ui-icon-cancel"],t[u.p.id].cancelicon),r.delicon[0]===!0&&n("#dData","#"+f+"_2").addClass(r.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.delicon[2]+"'></span>"),r.cancelicon[0]===!0&&n("#eData","#"+f+"_2").addClass(r.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.cancelicon[2]+"'></span>"),n("#dData","#"+f+"_2").click(function(){var i=[!0,""],o,a,y,s;if(v={},o=n("#DelData>td","#"+f).text(),n.isFunction(t[u.p.id].onclickSubmit)&&(v=t[u.p.id].onclickSubmit.call(u,t[u.p.id],o)||{}),n.isFunction(t[u.p.id].beforeSubmit)&&(i=t[u.p.id].beforeSubmit.call(u,o)),i[0]&&!t[u.p.id].processing){if(t[u.p.id].processing=!0,l=u.p.prmNames,c=n.extend({},t[u.p.id].delData,v),d=l.oper,c[d]=l.deloper,k=l.id,o=String(o).split(","),!o.length)return!1;for(a in o)o.hasOwnProperty(a)&&(o[a]=n.jgrid.stripPref(u.p.idPrefix,o[a]));c[k]=o.join(),n(this).addClass("ui-state-active"),y=n.extend({url:t[u.p.id].url?t[u.p.id].url:n(u).jqGrid("getGridParam","editurl"),type:t[u.p.id].mtype,data:n.isFunction(t[u.p.id].serializeDelData)?t[u.p.id].serializeDelData.call(u,c):c,complete:function(s,l){if(l!="success"?(i[0]=!1,i[1]=n.isFunction(t[u.p.id].errorTextFormat)?t[u.p.id].errorTextFormat.call(u,s):l+" Status: '"+s.statusText+"'. Error code: "+s.status):n.isFunction(t[u.p.id].afterSubmit)&&(i=t[u.p.id].afterSubmit.call(u,s,c)),i[0]===!1)n("#DelError>td","#"+f).html(i[1]),n("#DelError","#"+f).show();else{if(t[u.p.id].reloadAfterSubmit&&u.p.datatype!="local")n(u).trigger("reloadGrid");else{if(u.p.treeGrid===!0)try{n(u).jqGrid("delTreeNode",u.p.idPrefix+o[0])}catch(v){}else for(var a=0;a<o.length;a++)n(u).jqGrid("delRowData",u.p.idPrefix+o[a]);u.p.selrow=null,u.p.selarrrow=[]}n.isFunction(t[u.p.id].afterComplete)&&setTimeout(function(){t[u.p.id].afterComplete.call(u,s,o)},500)}t[u.p.id].processing=!1,n("#dData","#"+f+"_2").removeClass("ui-state-active"),i[0]&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(e),jqm:r.jqModal,onClose:t[u.p.id].onClose})}},n.jgrid.ajaxOptions,t[u.p.id].ajaxDelOptions),y.url||t[u.p.id].useDataProxy||(n.isFunction(u.p.dataProxy)?t[u.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+n.jgrid.errors.nourl)),i[0]&&(t[u.p.id].useDataProxy?(s=u.p.dataProxy.call(u,y,"del_"+u.p.id),typeof s=="undefined"&&(s=[!0,""]),s[0]===!1?(i[0]=!1,i[1]=s[1]||"Error deleting the selected row!"):n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(e),jqm:r.jqModal,onClose:t[u.p.id].onClose})):n.ajax(y))}return i[0]===!1&&(n("#DelError>td","#"+f).html(i[1]),n("#DelError","#"+f).show()),!1}),n("#eData","#"+f+"_2").click(function(){return n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(e),jqm:t[u.p.id].jqModal,onClose:t[u.p.id].onClose}),!1}),p&&t[u.p.id].beforeShowForm.call(u,n("#"+f)),n.jgrid.viewModal("#"+n.jgrid.jqID(h.themodal),{gbox:"#gbox_"+n.jgrid.jqID(e),jqm:t[u.p.id].jqModal,overlay:t[u.p.id].overlay,modal:t[u.p.id].modal}),b&&t[u.p.id].afterShowForm.call(u,n("#"+f))}t[u.p.id].closeOnEscape===!0&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(h.modalhead)).focus()},0)}})},navGrid:function(t,i,r,u,f,e,o){return i=n.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},n.jgrid.nav,i||{}),this.each(function(){var v,s,y,b,w,p,h,c,k,a,l;if(!this.nav&&(v={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},s=this,s.grid&&typeof t=="string"))for(n("#"+v.themodal).html()===null&&(i.alerttop||i.alertleft||(typeof window.innerWidth!="undefined"?(i.alertleft=window.innerWidth,i.alerttop=window.innerHeight):typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0?(i.alertleft=document.documentElement.clientWidth,i.alerttop=document.documentElement.clientHeight):(i.alertleft=1024,i.alerttop=768),i.alertleft=i.alertleft/2-parseInt(i.alertwidth,10)/2,i.alerttop=i.alerttop/2-25),n.jgrid.createModal(v,"<div>"+i.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+n.jgrid.jqID(s.p.id),jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:i.alerttop,left:i.alertleft,width:i.alertwidth,height:i.alertheight,closeOnEscape:i.closeOnEscape,zIndex:i.alertzIndex},"","",!0)),w=1,i.cloneToTop&&s.p.toppager&&(w=2),p=0;p<w;p++)c=n("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),k="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",p===0?(a=t,l=s.p.id,a==s.p.toppager&&(l+="_top",w=1)):(a=s.p.toppager,l=s.p.id+"_top"),s.p.direction=="rtl"&&n(c).attr("dir","rtl").css("float","right"),i.add&&(u=u||{},h=n("<td class='ui-pg-button ui-corner-all'></td>"),n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.addicon+"'></span>"+i.addtext+"</div>"),n("tr",c).append(h),n(h,c).attr({title:i.addtitle||"",id:u.id||"add_"+l}).click(function(){return n(this).hasClass("ui-state-disabled")||(n.isFunction(i.addfunc)?i.addfunc.call(s):n(s).jqGrid("editGridRow","new",u)),!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),i.edit&&(h=n("<td class='ui-pg-button ui-corner-all'></td>"),r=r||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.editicon+"'></span>"+i.edittext+"</div>"),n("tr",c).append(h),n(h,c).attr({title:i.edittitle||"",id:r.id||"edit_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t=s.p.selrow;t?n.isFunction(i.editfunc)?i.editfunc.call(s,t):n(s).jqGrid("editGridRow",t,r):(n.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+n.jgrid.jqID(s.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),i.view&&(h=n("<td class='ui-pg-button ui-corner-all'></td>"),o=o||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.viewicon+"'></span>"+i.viewtext+"</div>"),n("tr",c).append(h),n(h,c).attr({title:i.viewtitle||"",id:o.id||"view_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t=s.p.selrow;t?n.isFunction(i.viewfunc)?i.viewfunc.call(s,t):n(s).jqGrid("viewGridRow",t,o):(n.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+n.jgrid.jqID(s.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),i.del&&(h=n("<td class='ui-pg-button ui-corner-all'></td>"),f=f||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.delicon+"'></span>"+i.deltext+"</div>"),n("tr",c).append(h),n(h,c).attr({title:i.deltitle||"",id:f.id||"del_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t;s.p.multiselect?(t=s.p.selarrrow,t.length===0&&(t=null)):t=s.p.selrow,t?n.isFunction(i.delfunc)?i.delfunc.call(s,t):n(s).jqGrid("delGridRow",t,f):(n.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+n.jgrid.jqID(s.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),(i.add||i.edit||i.del||i.view)&&n("tr",c).append(k),i.search&&(h=n("<td class='ui-pg-button ui-corner-all'></td>"),e=e||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.searchicon+"'></span>"+i.searchtext+"</div>"),n("tr",c).append(h),n(h,c).attr({title:i.searchtitle||"",id:e.id||"search_"+l}).click(function(){return n(this).hasClass("ui-state-disabled")||(n.isFunction(i.searchfunc)?i.searchfunc.call(s,e):n(s).jqGrid("searchGrid",e)),!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),e.showOnLoad&&e.showOnLoad===!0&&n(h,c).click(),h=null),i.refresh&&(h=n("<td class='ui-pg-button ui-corner-all'></td>"),n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.refreshicon+"'></span>"+i.refreshtext+"</div>"),n("tr",c).append(h),n(h,c).attr({title:i.refreshtitle||"",id:"refresh_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){n.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(s),s.p.search=!1;try{var t=s.p.id;s.p.postData.filters="",n("#fbox_"+n.jgrid.jqID(t)).jqFilter("resetFilter"),n.isFunction(s.clearToolbar)&&s.clearToolbar.call(s,!1)}catch(r){}switch(i.refreshstate){case"firstpage":n(s).trigger("reloadGrid",[{page:1}]);break;case"current":n(s).trigger("reloadGrid",[{current:!0}])}n.isFunction(i.afterRefresh)&&i.afterRefresh.call(s)}return!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}),h=null),b=n(".ui-jqgrid").css("font-size")||"11px",n("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+b+";visibility:hidden;' ></div>"),y=n(c).clone().appendTo("#testpg2").width(),n("#testpg2").remove(),n(a+"_"+i.position,a).append(c),s.p._nvtd&&(y>s.p._nvtd[0]&&(n(a+"_"+i.position,a).width(y),s.p._nvtd[0]=y),s.p._nvtd[1]=y),b=null,y=null,c=null,this.nav=!0})},navButtonAdd:function(t,i){return i=n.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},i||{}),this.each(function(){var u,f,r;if(this.grid&&(typeof t=="string"&&t.indexOf("#")!==0&&(t="#"+n.jgrid.jqID(t)),u=n(".navtable",t)[0],f=this,u)){if(i.id&&n("#"+n.jgrid.jqID(i.id),u).html()!==null)return;r=n("<td></td>"),i.buttonicon.toString().toUpperCase()=="NONE"?n(r).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+i.caption+"</div>"):n(r).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+i.buttonicon+"'></span>"+i.caption+"</div>"),i.id&&n(r).attr("id",i.id),i.position=="first"?u.rows[0].cells.length===0?n("tr",u).append(r):n("tr td:eq(0)",u).before(r):n("tr",u).append(r),n(r,u).attr("title",i.title||"").click(function(t){return n(this).hasClass("ui-state-disabled")||n.isFunction(i.onClickButton)&&i.onClickButton.call(f,t),!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")})}})},navSeparatorAdd:function(t,i){return i=n.extend({sepclass:"ui-separator",sepcontent:""},i||{}),this.each(function(){var r,u;this.grid&&(typeof t=="string"&&t.indexOf("#")!==0&&(t="#"+n.jgrid.jqID(t)),r=n(".navtable",t)[0],r&&(u="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</td>",n("tr",r).append(u)))})},GridToForm:function(t,i){return this.each(function(){var f=this,u,r;if(f.grid&&(u=n(f).jqGrid("getRowData",t),u))for(r in u)n("[name="+n.jgrid.jqID(r)+"]",i).is("input:radio")||n("[name="+n.jgrid.jqID(r)+"]",i).is("input:checkbox")?n("[name="+n.jgrid.jqID(r)+"]",i).each(function(){n(this).val()==u[r]?n(this)[f.p.useProp?"prop":"attr"]("checked",!0):n(this)[f.p.useProp?"prop":"attr"]("checked",!1)}):n("[name="+n.jgrid.jqID(r)+"]",i).val(u[r])})},FormToGrid:function(t,i,r,u){return this.each(function(){var e=this,o,f;e.grid&&(r||(r="set"),u||(u="first"),o=n(i).serializeArray(),f={},n.each(o,function(n,t){f[t.name]=t.value}),r=="add"?n(e).jqGrid("addRowData",t,f,u):r=="set"&&n(e).jqGrid("setRowData",t,f))})}})}(jQuery),function(n){"use strict";n.jgrid.inlineEdit=n.jgrid.inlineEdit||{},n.jgrid.extend({editRow:function(t,i,r,u,f,e,o,s,h){var c={},l=n.makeArray(arguments).slice(1);return n.type(l[0])==="object"?c=l[0]:(typeof i!="undefined"&&(c.keys=i),n.isFunction(r)&&(c.oneditfunc=r),n.isFunction(u)&&(c.successfunc=u),typeof f!="undefined"&&(c.url=f),typeof e!="undefined"&&(c.extraparam=e),n.isFunction(o)&&(c.aftersavefunc=o),n.isFunction(s)&&(c.errorfunc=s),n.isFunction(h)&&(c.afterrestorefunc=h)),c=n.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},n.jgrid.inlineEdit,c),this.each(function(){var i=this,f,u,l,h=0,s=null,o={},e,r;i.grid&&(e=n(i).jqGrid("getInd",t,!0),e!==!1)&&(l=n(e).attr("editable")||"0",l!="0"||n(e).hasClass("not-editable-row")||(r=i.p.colModel,n('td[role="gridcell"]',e).each(function(e){var l,a,c;if(f=r[e].name,l=i.p.treeGrid===!0&&f==i.p.ExpandColumn,l)u=n("span:first",this).html();else try{u=n.unformat.call(i,this,{rowId:t,colModel:r[e]},e)}catch(v){u=r[e].edittype&&r[e].edittype=="textarea"?n(this).text():n(this).html()}f!="cb"&&f!="subgrid"&&f!="rn"&&(i.p.autoencode&&(u=n.jgrid.htmlDecode(u)),o[f]=u,r[e].editable===!0&&(s===null&&(s=e),l?n("span:first",this).html(""):n(this).html(""),a=n.extend({},r[e].editoptions||{},{id:t+"_"+f,name:f}),r[e].edittype||(r[e].edittype="text"),(u=="&nbsp;"||u=="&#160;"||u.length==1&&u.charCodeAt(0)==160)&&(u=""),c=n.jgrid.createEl.call(i,r[e].edittype,a,u,!0,n.extend({},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{})),n(c).addClass("editable"),l?n("span:first",this).append(c):n(this).append(c),r[e].edittype=="select"&&typeof r[e].editoptions!="undefined"&&r[e].editoptions.multiple===!0&&typeof r[e].editoptions.dataUrl=="undefined"&&n.browser.msie&&n(c).width(n(c).width()),h++))}),h>0&&(o.id=t,i.p.savedRow.push(o),n(e).attr("editable","1"),n("td:eq("+s+") input",e).focus(),c.keys===!0&&n(e).bind("keydown",function(r){if(r.keyCode===27){if(n(i).jqGrid("restoreRow",t,c.afterrestorefunc),i.p._inlinenav)try{n(i).jqGrid("showAddEditButtons")}catch(e){}return!1}if(r.keyCode===13){var u=r.target;if(u.tagName=="TEXTAREA")return!0;if(n(i).jqGrid("saveRow",t,c)&&i.p._inlinenav)try{n(i).jqGrid("showAddEditButtons")}catch(f){}return!1}}),n(i).triggerHandler("jqGridInlineEditRow",[t,c]),n.isFunction(c.oneditfunc)&&c.oneditfunc.call(i,t))))})},saveRow:function(t,i,r,u,f,e,o){var rt=n.makeArray(arguments).slice(1),c={},a,it,g,nt,ft,tt,k;n.type(rt[0])==="object"?c=rt[0]:(n.isFunction(i)&&(c.successfunc=i),typeof r!="undefined"&&(c.url=r),typeof u!="undefined"&&(c.extraparam=u),n.isFunction(f)&&(c.aftersavefunc=f),n.isFunction(e)&&(c.errorfunc=e),n.isFunction(o)&&(c.afterrestorefunc=o)),c=n.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},n.jgrid.inlineEdit,c);var b=!1,s=this[0],l,h={},d={},y={},ut,w,p,v;if(!s.grid||(v=n(s).jqGrid("getInd",t,!0),v===!1))return b;if(ut=n(v).attr("editable"),c.url=c.url?c.url:s.p.editurl,ut==="1"){if(n('td[role="gridcell"]',v).each(function(t){var i,u,r;if(a=s.p.colModel[t],l=a.name,l!="cb"&&l!="subgrid"&&a.editable===!0&&l!="rn"&&!n(this).hasClass("not-editable-cell")){switch(a.edittype){case"checkbox":i=["Yes","No"],a.editoptions&&(i=a.editoptions.value.split(":")),h[l]=n("input",this).is(":checked")?i[0]:i[1];break;case"text":case"password":case"textarea":case"button":h[l]=n("input, textarea",this).val();break;case"select":a.editoptions.multiple?(u=n("select",this),r=[],h[l]=n(u).val(),h[l]=h[l]?h[l].join(","):"",n("select option:selected",this).each(function(t,i){r[t]=n(i).text()}),d[l]=r.join(",")):(h[l]=n("select option:selected",this).val(),d[l]=n("select option:selected",this).text()),a.formatter&&a.formatter=="select"&&(d={});break;case"custom":try{if(a.editoptions&&n.isFunction(a.editoptions.custom_value)){if(h[l]=a.editoptions.custom_value.call(s,n(".customelement",this),"get"),h[l]===undefined)throw"e2";}else throw"e1";}catch(f){f=="e1"&&n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,n.jgrid.edit.bClose),f=="e2"?n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,n.jgrid.edit.bClose):n.jgrid.info_dialog(n.jgrid.errors.errcap,f.message,n.jgrid.edit.bClose)}}if(p=n.jgrid.checkValues(h[l],t,s),p[0]===!1)return p[1]=h[l]+" "+p[1],!1;s.p.autoencode&&(h[l]=n.jgrid.htmlEncode(h[l])),c.url!=="clientArray"&&a.editoptions&&a.editoptions.NullIfEmpty===!0&&h[l]===""&&(y[l]="null")}}),p[0]===!1){try{it=n.jgrid.findPos(n("#"+n.jgrid.jqID(t),s.grid.bDiv)[0]),n.jgrid.info_dialog(n.jgrid.errors.errcap,p[1],n.jgrid.edit.bClose,{left:it[0],top:it[1]})}catch(et){alert(p[1])}return b}if(nt=s.p.prmNames,ft=nt.oper,g=nt.id,h&&(h[ft]=nt.editoper,h[g]=t,typeof s.p.inlineData=="undefined"&&(s.p.inlineData={}),h=n.extend({},h,s.p.inlineData,c.extraparam)),c.url=="clientArray"){for(h=n.extend({},h,d),s.p.autoencode&&n.each(h,function(t,i){h[t]=n.jgrid.htmlDecode(i)}),tt=n(s).jqGrid("setRowData",t,h),n(v).attr("editable","0"),k=0;k<s.p.savedRow.length;k++)if(s.p.savedRow[k].id==t){w=k;break}w>=0&&s.p.savedRow.splice(w,1),n(s).triggerHandler("jqGridInlineAfterSaveRow",[t,tt,h,c]),n.isFunction(c.aftersavefunc)&&c.aftersavefunc.call(s,t,tt),b=!0,n(v).unbind("keydown")}else n("#lui_"+n.jgrid.jqID(s.p.id)).show(),y=n.extend({},h,y),y[g]=n.jgrid.stripPref(s.p.idPrefix,y[g]),n.ajax(n.extend({url:c.url,data:n.isFunction(s.p.serializeRowData)?s.p.serializeRowData.call(s,y):y,type:c.mtype,async:!1,complete:function(i,r){var e,u,f;if(n("#lui_"+n.jgrid.jqID(s.p.id)).hide(),r==="success")if(e=!0,u=n(s).triggerHandler("jqGridInlineSuccessSaveRow",[i,t,c]),n.isArray(u)||(u=[!0,h]),u[0]&&n.isFunction(c.successfunc)&&(u=c.successfunc.call(s,i)),n.isArray(u)?(e=u[0],h=u[1]?u[1]:h):e=u,e===!0){for(s.p.autoencode&&n.each(h,function(t,i){h[t]=n.jgrid.htmlDecode(i)}),h=n.extend({},h,d),n(s).jqGrid("setRowData",t,h),n(v).attr("editable","0"),f=0;f<s.p.savedRow.length;f++)if(s.p.savedRow[f].id==t){w=f;break}w>=0&&s.p.savedRow.splice(w,1),n(s).triggerHandler("jqGridInlineAfterSaveRow",[t,i,h,c]),n.isFunction(c.aftersavefunc)&&c.aftersavefunc.call(s,t,i),b=!0,n(v).unbind("keydown")}else n(s).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,null,c]),n.isFunction(c.errorfunc)&&c.errorfunc.call(s,t,i,r,null),c.restoreAfterError===!0&&n(s).jqGrid("restoreRow",t,c.afterrestorefunc)},error:function(i,r,u){if(n("#lui_"+n.jgrid.jqID(s.p.id)).hide(),n(s).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,u,c]),n.isFunction(c.errorfunc))c.errorfunc.call(s,t,i,r,u);else try{n.jgrid.info_dialog(n.jgrid.errors.errcap,'<div class="ui-state-error">'+i.responseText+"</div>",n.jgrid.edit.bClose,{buttonalign:"right"})}catch(f){alert(i.responseText)}c.restoreAfterError===!0&&n(s).jqGrid("restoreRow",t,c.afterrestorefunc)}},n.jgrid.ajaxOptions,s.p.ajaxRowOptions||{}))}return b},restoreRow:function(t,i){var u=n.makeArray(arguments).slice(1),r={};return n.type(u[0])==="object"?r=u[0]:n.isFunction(i)&&(r.afterrestorefunc=i),r=n.extend(!0,n.jgrid.inlineEdit,r),this.each(function(){var i=this,f,e,o={},u;if(i.grid&&(e=n(i).jqGrid("getInd",t,!0),e!==!1)){for(u=0;u<i.p.savedRow.length;u++)if(i.p.savedRow[u].id==t){f=u;break}if(f>=0){if(n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker","#"+n.jgrid.jqID(e.id)).datepicker("hide")}catch(s){}n.each(i.p.colModel,function(){this.editable===!0&&this.name in i.p.savedRow[f]&&(o[this.name]=i.p.savedRow[f][this.name])}),n(i).jqGrid("setRowData",t,o),n(e).attr("editable","0").unbind("keydown"),i.p.savedRow.splice(f,1),n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(i.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){n(i).jqGrid("delRowData",t)},0)}n(i).triggerHandler("jqGridInlineAfterRestoreRow",[t]),n.isFunction(r.afterrestorefunc)&&r.afterrestorefunc.call(i,t)}})},addRow:function(t){return t=n.extend(!0,{rowID:"new_row",initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){var i,r,u;this.grid&&(i=this,t.useDefValues===!0&&n(i.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,u=n.isFunction(r)?r.call(i):r;t.initdata[this.name]=u}}),n(i).jqGrid("addRowData",t.rowID,t.initdata,t.position),n("#"+n.jgrid.jqID(t.rowID),"#"+n.jgrid.jqID(i.p.id)).addClass("jqgrid-new-row"),t.useFormatter?n("#"+n.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+n.jgrid.jqID(i.p.id)).click():(r=i.p.prmNames,u=r.oper,t.addRowParams.extraparam[u]=r.addoper,n(i).jqGrid("editRow",t.rowID,t.addRowParams),n(i).jqGrid("setSelection",t.rowID)))})},inlineNav:function(t,i){return i=n.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{useFormatter:!1,rowID:"new_row"},editParams:{},restoreAfterSelect:!0},n.jgrid.nav,i||{}),this.each(function(){var r,s,u,o,e,h,f;if(this.grid){if(r=this,u=n.jgrid.jqID(r.p.id),r.p._inlinenav=!0,i.addParams.useFormatter===!0)for(o=r.p.colModel,e=0;e<o.length;e++)if(o[e].formatter&&o[e].formatter==="actions"){o[e].formatoptions&&(h={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},f=n.extend(h,o[e].formatoptions),i.addParams.addRowParams={keys:f.keys,oneditfunc:f.onEdit,successfunc:f.onSuccess,url:f.url,extraparam:f.extraparam,aftersavefunc:f.afterSavef,errorfunc:f.onError,afterrestorefunc:f.afterRestore});break}i.add&&n(r).jqGrid("navButtonAdd",t,{caption:i.addtext,title:i.addtitle,buttonicon:i.addicon,id:r.p.id+"_iladd",onClickButton:function(){n(r).jqGrid("addRow",i.addParams),i.addParams.useFormatter||(n("#"+u+"_ilsave").removeClass("ui-state-disabled"),n("#"+u+"_ilcancel").removeClass("ui-state-disabled"),n("#"+u+"_iladd").addClass("ui-state-disabled"),n("#"+u+"_iledit").addClass("ui-state-disabled"))}}),i.edit&&n(r).jqGrid("navButtonAdd",t,{caption:i.edittext,title:i.edittitle,buttonicon:i.editicon,id:r.p.id+"_iledit",onClickButton:function(){var t=n(r).jqGrid("getGridParam","selrow");t?(n(r).jqGrid("editRow",t,i.editParams),n("#"+u+"_ilsave").removeClass("ui-state-disabled"),n("#"+u+"_ilcancel").removeClass("ui-state-disabled"),n("#"+u+"_iladd").addClass("ui-state-disabled"),n("#"+u+"_iledit").addClass("ui-state-disabled")):(n.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}}),i.save&&(n(r).jqGrid("navButtonAdd",t,{caption:i.savetext||"",title:i.savetitle||"Save row",buttonicon:i.saveicon,id:r.p.id+"_ilsave",onClickButton:function(){var e=r.p.savedRow[0].id,t,f;e?(t=r.p.prmNames,f=t.oper,i.editParams.extraparam||(i.editParams.extraparam={}),i.editParams.extraparam[f]=n("#"+n.jgrid.jqID(e),"#"+u).hasClass("jqgrid-new-row")?t.addoper:t.editoper,n(r).jqGrid("saveRow",e,i.editParams)&&n(r).jqGrid("showAddEditButtons")):(n.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}}),n("#"+u+"_ilsave").addClass("ui-state-disabled")),i.cancel&&(n(r).jqGrid("navButtonAdd",t,{caption:i.canceltext||"",title:i.canceltitle||"Cancel row editing",buttonicon:i.cancelicon,id:r.p.id+"_ilcancel",onClickButton:function(){var t=r.p.savedRow[0].id;t?(n(r).jqGrid("restoreRow",t,i.editParams),n(r).jqGrid("showAddEditButtons")):(n.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}}),n("#"+u+"_ilcancel").addClass("ui-state-disabled")),i.restoreAfterSelect===!0&&(s=n.isFunction(r.p.beforeSelectRow)?r.p.beforeSelectRow:!1,r.p.beforeSelectRow=function(t,u){var f=!0;return r.p.savedRow.length>0&&r.p._inlinenav===!0&&t!==r.p.selrow&&r.p.selrow!==null&&(r.p.selrow==i.addParams.rowID?n(r).jqGrid("delRowData",r.p.selrow):n(r).jqGrid("restoreRow",r.p.selrow,i.editParams),n(r).jqGrid("showAddEditButtons")),s&&(f=s.call(r,t,u)),f})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var t=n.jgrid.jqID(this.p.id);n("#"+t+"_ilsave").addClass("ui-state-disabled"),n("#"+t+"_ilcancel").addClass("ui-state-disabled"),n("#"+t+"_iladd").removeClass("ui-state-disabled"),n("#"+t+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function(n){"use strict";n.jgrid.extend({editCell:function(t,i,r){return this.each(function(){var u=this,e,f,o,s,c,l,h;if(u.grid&&u.p.cellEdit===!0){if(i=parseInt(i,10),u.p.selrow=u.rows[t].id,u.p.knv||n(u).jqGrid("GridNav"),u.p.savedRow.length>0){if(r===!0&&t==u.p.iRow&&i==u.p.iCol)return;n(u).jqGrid("saveCell",u.p.savedRow[0].id,u.p.savedRow[0].ic)}else window.setTimeout(function(){n("#"+n.jgrid.jqID(u.p.knv)).attr("tabindex","-1").focus()},0);if(s=u.p.colModel[i],e=s.name,e!="subgrid"&&e!="cb"&&e!="rn"){if(o=n("td:eq("+i+")",u.rows[t]),s.editable!==!0||r!==!0||o.hasClass("not-editable-cell"))parseInt(u.p.iCol,10)>=0&&parseInt(u.p.iRow,10)>=0&&(n("td:eq("+u.p.iCol+")",u.rows[u.p.iRow]).removeClass("edit-cell ui-state-highlight"),n(u.rows[u.p.iRow]).removeClass("selected-row ui-state-hover")),o.addClass("edit-cell ui-state-highlight"),n(u.rows[t]).addClass("selected-row ui-state-hover"),f=o.html().replace(/\&#160\;/ig,""),n(u).triggerHandler("jqGridSelectCell",[u.rows[t].id,e,f,t,i]),n.isFunction(u.p.onSelectCell)&&u.p.onSelectCell.call(u,u.rows[t].id,e,f,t,i);else{parseInt(u.p.iCol,10)>=0&&parseInt(u.p.iRow,10)>=0&&(n("td:eq("+u.p.iCol+")",u.rows[u.p.iRow]).removeClass("edit-cell ui-state-highlight"),n(u.rows[u.p.iRow]).removeClass("selected-row ui-state-hover")),n(o).addClass("edit-cell ui-state-highlight"),n(u.rows[t]).addClass("selected-row ui-state-hover");try{f=n.unformat.call(u,o,{rowId:u.rows[t].id,colModel:s},i)}catch(a){f=s.edittype&&s.edittype=="textarea"?n(o).text():n(o).html()}u.p.autoencode&&(f=n.jgrid.htmlDecode(f)),s.edittype||(s.edittype="text"),u.p.savedRow.push({id:t,ic:i,name:e,v:f}),(f==="&nbsp;"||f==="&#160;"||f.length===1&&f.charCodeAt(0)===160)&&(f=""),n.isFunction(u.p.formatCell)&&(c=u.p.formatCell.call(u,u.rows[t].id,e,f,t,i),c!==undefined&&(f=c)),l=n.extend({},s.editoptions||{},{id:t+"_"+e,name:e}),h=n.jgrid.createEl.call(u,s.edittype,l,f,!0,n.extend({},n.jgrid.ajaxOptions,u.p.ajaxSelectOptions||{})),n(u).triggerHandler("jqGridBeforeEditCell",[u.rows[t].id,e,f,t,i]),n.isFunction(u.p.beforeEditCell)&&u.p.beforeEditCell.call(u,u.rows[t].id,e,f,t,i),n(o).html("").append(h).attr("tabindex","0"),window.setTimeout(function(){n(h).focus()},0),n("input, select, textarea",o).bind("keydown",function(r){if(r.keyCode===27&&(n("input.hasDatepicker",o).length>0?n(".ui-datepicker").is(":hidden")?n(u).jqGrid("restoreCell",t,i):n("input.hasDatepicker",o).datepicker("hide"):n(u).jqGrid("restoreCell",t,i)),r.keyCode===13)return n(u).jqGrid("saveCell",t,i),!1;if(r.keyCode===9){if(u.grid.hDiv.loading)return!1;r.shiftKey?n(u).jqGrid("prevCell",t,i):n(u).jqGrid("nextCell",t,i)}r.stopPropagation()}),n(u).triggerHandler("jqGridAfterEditCell",[u.rows[t].id,e,f,t,i]),n.isFunction(u.p.afterEditCell)&&u.p.afterEditCell.call(u,u.rows[t].id,e,f,t,i)}u.p.iCol=i,u.p.iRow=t}}})},saveCell:function(t,i){return this.each(function(){var r=this,p,b,k,w,y,a,d,c,o,nt,g,v;if(r.grid&&r.p.cellEdit===!0){if(p=r.p.savedRow.length>=1?0:null,p!==null){var h=n("td:eq("+i+")",r.rows[t]),u,e,s=r.p.colModel[i],f=s.name,l=n.jgrid.jqID(f);switch(s.edittype){case"select":s.editoptions.multiple?(b=n("#"+t+"_"+l,r.rows[t]),k=[],u=n(b).val(),u?u.join(","):u="",n("option:selected",b).each(function(t,i){k[t]=n(i).text()}),e=k.join(",")):(u=n("#"+t+"_"+l+" option:selected",r.rows[t]).val(),e=n("#"+t+"_"+l+" option:selected",r.rows[t]).text()),s.formatter&&(e=u);break;case"checkbox":w=["Yes","No"],s.editoptions&&(w=s.editoptions.value.split(":")),u=n("#"+t+"_"+l,r.rows[t]).is(":checked")?w[0]:w[1],e=u;break;case"password":case"text":case"textarea":case"button":u=n("#"+t+"_"+l,r.rows[t]).val(),e=u;break;case"custom":try{if(s.editoptions&&n.isFunction(s.editoptions.custom_value))if(u=s.editoptions.custom_value.call(r,n(".customelement",h),"get"),u===undefined)throw"e2";else e=u;else throw"e1";}catch(tt){tt=="e1"&&n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose),tt=="e2"?n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):n.jgrid.info_dialog(jQuery.jgrid.errors.errcap,tt.message,jQuery.jgrid.edit.bClose)}}if(e!==r.p.savedRow[p].v)if(y=n(r).triggerHandler("jqGridBeforeSaveCell",[r.rows[t].id,f,u,t,i]),y&&(u=y,e=y),n.isFunction(r.p.beforeSaveCell)&&(a=r.p.beforeSaveCell.call(r,r.rows[t].id,f,u,t,i),a&&(u=a,e=a)),d=n.jgrid.checkValues(u,i,r),d[0]===!0){if(c=n(r).triggerHandler("jqGridBeforeSubmitCell",[r.rows[t].id,f,u,t,i])||{},n.isFunction(r.p.beforeSubmitCell)&&(c=r.p.beforeSubmitCell.call(r,r.rows[t].id,f,u,t,i),c||(c={})),n("input.hasDatepicker",h).length>0&&n("input.hasDatepicker",h).datepicker("hide"),r.p.cellsubmit=="remote")if(r.p.cellurl)o={},r.p.autoencode&&(u=n.jgrid.htmlEncode(u)),o[f]=u,v=r.p.prmNames,nt=v.id,g=v.oper,o[nt]=n.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),o[g]=v.editoper,o=n.extend(c,o),n("#lui_"+n.jgrid.jqID(r.p.id)).show(),r.grid.hDiv.loading=!0,n.ajax(n.extend({url:r.p.cellurl,data:n.isFunction(r.p.serializeCellData)?r.p.serializeCellData.call(r,o):o,type:"POST",complete:function(s,c){if(n("#lui_"+r.p.id).hide(),r.grid.hDiv.loading=!1,c=="success"){var l=n(r).triggerHandler("jqGridAfterSubmitCell",[r,s,o.id,f,u,t,i])||[!0,""];l[0]===!0&&n.isFunction(r.p.afterSubmitCell)&&(l=r.p.afterSubmitCell.call(r,s,o.id,f,u,t,i)),l[0]===!0?(n(h).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,e,!1,!1,!0),n(h).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,f,u,t,i]),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,f,u,t,i),r.p.savedRow.splice(0,1)):(n.jgrid.info_dialog(n.jgrid.errors.errcap,l[1],n.jgrid.edit.bClose),n(r).jqGrid("restoreCell",t,i))}},error:function(u,f,e){n("#lui_"+n.jgrid.jqID(r.p.id)).hide(),r.grid.hDiv.loading=!1,n(r).triggerHandler("jqGridErrorCell",[u,f,e]),n.isFunction(r.p.errorCell)?(r.p.errorCell.call(r,u,f,e),n(r).jqGrid("restoreCell",t,i)):(n.jgrid.info_dialog(n.jgrid.errors.errcap,u.status+" : "+u.statusText+"<br/>"+f,n.jgrid.edit.bClose),n(r).jqGrid("restoreCell",t,i))}},n.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}));else try{n.jgrid.info_dialog(n.jgrid.errors.errcap,n.jgrid.errors.nourl,n.jgrid.edit.bClose),n(r).jqGrid("restoreCell",t,i)}catch(tt){}r.p.cellsubmit=="clientArray"&&(n(h).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,e,!1,!1,!0),n(h).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,f,u,t,i]),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,f,u,t,i),r.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){n.jgrid.info_dialog(n.jgrid.errors.errcap,u+" "+d[1],n.jgrid.edit.bClose)},100),n(r).jqGrid("restoreCell",t,i)}catch(tt){}else n(r).jqGrid("restoreCell",t,i)}n.browser.opera?n("#"+n.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus():window.setTimeout(function(){n("#"+n.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,i){return this.each(function(){var r=this,u,f;if(r.grid&&r.p.cellEdit===!0){if(u=r.p.savedRow.length>=1?0:null,u!==null){if(f=n("td:eq("+i+")",r.rows[t]),n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker",f).datepicker("hide")}catch(e){}n(f).empty().attr("tabindex","-1"),n(r).jqGrid("setCell",r.rows[t].id,i,r.p.savedRow[u].v,!1,!1,!0),n(r).triggerHandler("jqGridAfterRestoreCell",[r.rows[t].id,r.p.savedRow[u].v,t,i]),n.isFunction(r.p.afterRestoreCell)&&r.p.afterRestoreCell.call(r,r.rows[t].id,r.p.savedRow[u].v,t,i),r.p.savedRow.splice(0,1)}window.setTimeout(function(){n("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,i){return this.each(function(){var r=this,f=!1,u;if(r.grid&&r.p.cellEdit===!0){for(u=i+1;u<r.p.colModel.length;u++)if(r.p.colModel[u].editable===!0){f=u;break}f!==!1?n(r).jqGrid("editCell",t,f,!0):r.p.savedRow.length>0&&n(r).jqGrid("saveCell",t,i)}})},prevCell:function(t,i){return this.each(function(){var r=this,f=!1,u;if(r.grid&&r.p.cellEdit===!0){for(u=i-1;u>=0;u--)if(r.p.colModel[u].editable===!0){f=u;break}f!==!1?n(r).jqGrid("editCell",t,f,!0):r.p.savedRow.length>0&&n(r).jqGrid("saveCell",t,i)}})},GridNav:function(){return this.each(function(){function u(i,r,u){if(u.substr(0,1)=="v"){var c=n(t.grid.bDiv)[0].clientHeight,h=n(t.grid.bDiv)[0].scrollTop,a=t.rows[i].offsetTop+t.rows[i].clientHeight,l=t.rows[i].offsetTop;u=="vd"&&a>=c&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop+t.rows[i].clientHeight),u=="vu"&&l<h&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop-t.rows[i].clientHeight)}if(u=="h"){var e=n(t.grid.bDiv)[0].clientWidth,f=n(t.grid.bDiv)[0].scrollLeft,s=t.rows[i].cells[r].offsetLeft+t.rows[i].cells[r].clientWidth,o=t.rows[i].cells[r].offsetLeft;s>=e+parseInt(f,10)?n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft+t.rows[i].cells[r].clientWidth:o<f&&(n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft-t.rows[i].cells[r].clientWidth)}}function f(n,i){var u,r;if(i=="lft")for(u=n+1,r=n;r>=0;r--)if(t.p.colModel[r].hidden!==!0){u=r;break}if(i=="rgt")for(u=n-1,r=n;r<t.p.colModel.length;r++)if(t.p.colModel[r].hidden!==!0){u=r;break}return u}var t=this,e,r,i;t.grid&&t.p.cellEdit===!0&&(t.p.knv=t.p.id+"_kn",e=n("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+t.p.knv+"'></span></span>"),n(e).insertBefore(t.grid.cDiv),n("#"+t.p.knv).focus().keydown(function(e){i=e.keyCode,t.p.direction=="rtl"&&(i===37?i=39:i===39&&(i=37));switch(i){case 38:t.p.iRow-1>0&&(u(t.p.iRow-1,t.p.iCol,"vu"),n(t).jqGrid("editCell",t.p.iRow-1,t.p.iCol,!1));break;case 40:t.p.iRow+1<=t.rows.length-1&&(u(t.p.iRow+1,t.p.iCol,"vd"),n(t).jqGrid("editCell",t.p.iRow+1,t.p.iCol,!1));break;case 37:t.p.iCol-1>=0&&(r=f(t.p.iCol-1,"lft"),u(t.p.iRow,r,"h"),n(t).jqGrid("editCell",t.p.iRow,r,!1));break;case 39:t.p.iCol+1<=t.p.colModel.length-1&&(r=f(t.p.iCol+1,"rgt"),u(t.p.iRow,r,"h"),n(t).jqGrid("editCell",t.p.iRow,r,!1));break;case 13:parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&n(t).jqGrid("editCell",t.p.iRow,t.p.iCol,!0);break;default:return!0}return!1}))})},getChangedCells:function(t){var i=[];return t||(t="all"),this.each(function(){var r=this,u;r.grid&&r.p.cellEdit===!0&&n(r.rows).each(function(f){var e={};n(this).hasClass("edited")&&(n("td",this).each(function(i){if(u=r.p.colModel[i].name,u!=="cb"&&u!=="subgrid")if(t=="dirty"){if(n(this).hasClass("dirty-cell"))try{e[u]=n.unformat.call(r,this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(o){e[u]=n.jgrid.htmlDecode(n(this).html())}}else try{e[u]=n.unformat.call(r,this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(o){e[u]=n.jgrid.htmlDecode(n(this).html())}}),e.id=this.id,i.push(e))})}),i}})}(jQuery),function(n){"use strict";n.jgrid.extend({setSubGrid:function(){return this.each(function(){var t=this,i,u={plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0},r;if(t.p.subGridOptions=n.extend(u,t.p.subGridOptions||{}),t.p.colNames.unshift(""),t.p.colModel.unshift({name:"subgrid",width:n.browser.safari?t.p.subGridWidth+t.p.cellLayout:t.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),i=t.p.subGridModel,i[0])for(i[0].align=n.extend([],i[0].align||[]),r=0;r<i[0].name.length;r++)i[0].align[r]=i[0].align[r]||"left"})},addSubGridCell:function(n,t){var u="",r,i;return this.each(function(){u=this.formatCol(n,t),i=this.p.id,r=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+i+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+u+"><a href='javascript:void(0);'><span class='ui-icon "+r+"'></span></a></td>"},addSubGrid:function(t,i){return this.each(function(){var r=this,c,o;if(r.grid){var h=function(t,i,u){var f=n("<td align='"+r.p.subGridModel[0].align[u]+"'></td>").html(i);n(t).append(f)},v=function(t,i){for(var o,e,s=n("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),f=n("<tr></tr>"),c,u=0;u<r.p.subGridModel[0].name.length;u++)o=n("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'></th>"),n(o).html(r.p.subGridModel[0].name[u]),n(o).width(r.p.subGridModel[0].width[u]),n(f).append(o);return n(s).append(f),t&&(e=r.p.xmlReader.subgrid,n(e.root+" "+e.row,t).each(function(){if(f=n("<tr class='ui-widget-content ui-subtblcell'></tr>"),e.repeatitems===!0)n(e.cell,this).each(function(t){h(f,n(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(u=0;u<t.length;u++)h(f,n(t[u],this).text()||"&#160;",u)}n(s).append(f)})),c=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+n.jgrid.jqID(c+i)).append(s),r.grid.hDiv.loading=!1,n("#load_"+n.jgrid.jqID(r.p.id)).hide(),!1},a=function(t,i){for(var c,a,o,s,u,v=n("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),e=n("<tr></tr>"),l,y,f=0;f<r.p.subGridModel[0].name.length;f++)c=n("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'></th>"),n(c).html(r.p.subGridModel[0].name[f]),n(c).width(r.p.subGridModel[0].width[f]),n(e).append(c);if(n(v).append(e),t&&(s=r.p.jsonReader.subgrid,a=t[s.root],typeof a!="undefined"))for(f=0;f<a.length;f++){if(o=a[f],e=n("<tr class='ui-widget-content ui-subtblcell'></tr>"),s.repeatitems===!0)for(s.cell&&(o=o[s.cell]),u=0;u<o.length;u++)h(e,o[u]||"&#160;",u);else if(l=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name,l.length)for(u=0;u<l.length;u++)h(e,o[l[u]]||"&#160;",u);n(v).append(e)}return y=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+n.jgrid.jqID(y+i)).append(v),r.grid.hDiv.loading=!1,n("#load_"+n.jgrid.jqID(r.p.id)).hide(),!1},p=function(t){var e,u,i,f;if(e=n(t).attr("id"),u={nd_:+new Date},u[r.p.prmNames.subgridid]=e,!r.p.subGridModel[0])return!1;if(r.p.subGridModel[0].params)for(f=0;f<r.p.subGridModel[0].params.length;f++)for(i=0;i<r.p.colModel.length;i++)r.p.colModel[i].name===r.p.subGridModel[0].params[f]&&(u[r.p.colModel[i].name]=n("td:eq("+i+")",t).text().replace(/\&#160\;/ig,""));if(!r.grid.hDiv.loading){r.grid.hDiv.loading=!0,n("#load_"+n.jgrid.jqID(r.p.id)).show(),r.p.subgridtype||(r.p.subgridtype=r.p.datatype),n.isFunction(r.p.subgridtype)?r.p.subgridtype.call(r,u):r.p.subgridtype=r.p.subgridtype.toLowerCase();switch(r.p.subgridtype){case"xml":case"json":n.ajax(n.extend({type:r.p.mtype,url:r.p.subGridUrl,dataType:r.p.subgridtype,data:n.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData.call(r,u):u,complete:function(t){r.p.subgridtype==="xml"?v(t.responseXML,e):a(n.jgrid.parse(t.responseText),e),t=null}},n.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}))}}return!1},u,e,y,l=0,f,s;for(n.each(r.p.colModel,function(){(this.hidden===!0||this.name==="rn"||this.name==="cb")&&l++}),c=r.rows.length,o=1,i!==undefined&&i>0&&(o=i,c=i+1);o<c;)n(r.rows[o]).hasClass("jqgrow")&&n(r.rows[o].cells[t]).bind("click",function(){var i=n(this).parent("tr")[0];if(s=i.nextSibling,n(this).hasClass("sgcollapsed")){if(e=r.p.id,u=i.id,r.p.subGridOptions.reloadOnExpand!==!0&&(r.p.subGridOptions.reloadOnExpand!==!1||n(s).hasClass("ui-subgrid")))n(s).show();else{if(y=t>=1?"<td colspan='"+t+"'>&#160;</td>":"",f=n(r).triggerHandler("jqGridSubGridBeforeExpand",[e+"_"+u,u]),f=f===!1||f==="stop"?!1:!0,f&&n.isFunction(r.p.subGridBeforeExpand)&&(f=r.p.subGridBeforeExpand.call(r,e+"_"+u,u)),f===!1)return!1;n(i).after("<tr role='row' class='ui-subgrid'>"+y+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+r.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(r.p.colNames.length-1-l,10)+"' class='ui-widget-content subgrid-data'><div id="+e+"_"+u+" class='tablediv'></div></td></tr>"),n(r).triggerHandler("jqGridSubGridRowExpanded",[e+"_"+u,u]),n.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded.call(r,e+"_"+u,u):p(i)}n(this).html("<a href='javascript:void(0);'><span class='ui-icon "+r.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),r.p.subGridOptions.selectOnExpand&&n(r).jqGrid("setSelection",u)}else if(n(this).hasClass("sgexpanded")){if(f=n(r).triggerHandler("jqGridSubGridRowColapsed",[e+"_"+u,u]),f=f===!1||f==="stop"?!1:!0,f&&n.isFunction(r.p.subGridRowColapsed)&&(u=i.id,f=r.p.subGridRowColapsed.call(r,e+"_"+u,u)),f===!1)return!1;r.p.subGridOptions.reloadOnExpand===!0?n(s).remove(".ui-subgrid"):n(s).hasClass("ui-subgrid")&&n(s).hide(),n(this).html("<a href='javascript:void(0);'><span class='ui-icon "+r.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1}),r.p.subGridOptions.expandOnLoad===!0&&n(r.rows[o].cells[t]).trigger("click"),o++;r.subGridXml=function(n,t){v(n,t)},r.subGridJson=function(n,t){a(n,t)}}})},expandSubGridRow:function(t){return this.each(function(){var u=this,r,i;(u.grid||t)&&u.p.subGrid===!0&&(r=n(this).jqGrid("getInd",t,!0),r&&(i=n("td.sgcollapsed",r)[0],i&&n(i).trigger("click")))})},collapseSubGridRow:function(t){return this.each(function(){var u=this,r,i;(u.grid||t)&&u.p.subGrid===!0&&(r=n(this).jqGrid("getInd",t,!0),r&&(i=n("td.sgexpanded",r)[0],i&&n(i).trigger("click")))})},toggleSubGridRow:function(t){return this.each(function(){var u=this,r,i;(u.grid||t)&&u.p.subGrid===!0&&(r=n(this).jqGrid("getInd",t,!0),r&&(i=n("td.sgcollapsed",r)[0],i?n(i).trigger("click"):(i=n("td.sgexpanded",r)[0],i&&n(i).trigger("click"))))})}})}(jQuery),function(n){"use strict";n.jgrid.extend({setTreeNode:function(t,i){return this.each(function(){var r=this,k,b,w,c;if(r.grid&&r.p.treeGrid)for(var a=r.p.expColInd,e=r.p.treeReader.expanded_field,f=r.p.treeReader.leaf_field,nt=r.p.treeReader.level_field,y=r.p.treeReader.icon_field,h=r.p.treeReader.loaded,g,d,s,p,l,o,u,v;t<i;)k=r.rows[t].id,b=r.p._index[k],u=r.p.data[b],r.p.treeGridModel=="nested"&&(u[f]||(g=parseInt(u[r.p.treeReader.left_field],10),d=parseInt(u[r.p.treeReader.right_field],10),u[f]=d===g+1?"true":"false",r.rows[t].cells[r.p._treeleafpos].innerHTML=u[f])),s=parseInt(u[nt],10),r.p.tree_root_level===0?(p=s+1,l=s):(p=s,l=s-1),o="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+p*18+"px;'>",o+="<div style='"+(r.p.direction=="rtl"?"right:":"left:")+l*18+"px;' class='ui-icon ",u[h]!==undefined&&(u[h]=u[h]=="true"||u[h]===!0?!0:!1),u[f]=="true"||u[f]===!0?(o+=(u[y]!==undefined&&u[y]!==""?u[y]:r.p.treeIcons.leaf)+" tree-leaf treeclick",u[f]=!0,v="leaf"):(u[f]=!1,v=""),u[e]=(u[e]=="true"||u[e]===!0?!0:!1)&&u[h],o+=u[e]===!1?u[f]===!0?"'":r.p.treeIcons.plus+" tree-plus treeclick'":u[f]===!0?"'":r.p.treeIcons.minus+" tree-minus treeclick'",o+="></div></div>",n(r.rows[t].cells[a]).wrapInner("<span class='cell-wrapper"+v+"'></span>").prepend(o),s!==parseInt(r.p.tree_root_level,10)&&(c=n(r).jqGrid("getNodeParent",u),w=c&&c.hasOwnProperty(e)?c[e]:!0,w||n(r.rows[t]).css("display","none")),n(r.rows[t].cells[a]).find("div.treeclick").bind("click",function(t){var u=t.target||t.srcElement,o=n(u,r.rows).closest("tr.jqgrow")[0].id,i=r.p._index[o];return r.p.data[i][f]||(r.p.data[i][e]?(n(r).jqGrid("collapseRow",r.p.data[i]),n(r).jqGrid("collapseNode",r.p.data[i])):(n(r).jqGrid("expandRow",r.p.data[i]),n(r).jqGrid("expandNode",r.p.data[i]))),!1}),r.p.ExpandColClick===!0&&n(r.rows[t].cells[a]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(t){var o=t.target||t.srcElement,u=n(o,r.rows).closest("tr.jqgrow")[0].id,i=r.p._index[u];return r.p.data[i][f]||(r.p.data[i][e]?(n(r).jqGrid("collapseRow",r.p.data[i]),n(r).jqGrid("collapseNode",r.p.data[i])):(n(r).jqGrid("expandRow",r.p.data[i]),n(r).jqGrid("expandNode",r.p.data[i]))),n(r).jqGrid("setSelection",u),!1}),t++})},setTreeGrid:function(){return this.each(function(){var t=this,r=0,o,s=!1,i,u,e=[],f;if(t.p.treeGrid){t.p.treedatatype||n.extend(t.p,{treedatatype:t.p.datatype}),t.p.subGrid=!1,t.p.altRows=!1,t.p.pgbuttons=!1,t.p.pginput=!1,t.p.gridview=!0,t.p.rowTotal===null&&(t.p.rowNum=1e4),t.p.multiselect=!1,t.p.rowList=[],t.p.expColInd=0,o="ui-icon-triangle-1-"+(t.p.direction=="rtl"?"w":"e"),t.p.treeIcons=n.extend({plus:o,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},t.p.treeIcons||{}),t.p.treeGridModel=="nested"?t.p.treeReader=n.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader):t.p.treeGridModel=="adjacency"&&(t.p.treeReader=n.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader));for(u in t.p.colModel)if(t.p.colModel.hasOwnProperty(u)){i=t.p.colModel[u].name,i!=t.p.ExpandColumn||s||(s=!0,t.p.expColInd=r),r++;for(f in t.p.treeReader)t.p.treeReader[f]==i&&e.push(i)}n.each(t.p.treeReader,function(i,u){u&&n.inArray(u,e)===-1&&(i==="leaf_field"&&(t.p._treeleafpos=r),r++,t.p.colNames.push(u),t.p.colModel.push({name:u,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var f=n(i).jqGrid("getNodeChildren",t),u=i.p.treeReader.expanded_field,r=i.rows;n(f).each(function(){var t=n.jgrid.getAccessor(this,i.p.localReader.id);n(r.namedItem(t)).css("display",""),this[u]&&n(i).jqGrid("expandRow",this)})}})},collapseRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var f=n(i).jqGrid("getNodeChildren",t),u=i.p.treeReader.expanded_field,r=i.rows;n(f).each(function(){var t=n.jgrid.getAccessor(this,i.p.localReader.id);n(r.namedItem(t)).css("display","none"),this[u]&&n(i).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var t=[];return this.each(function(){var i=this,u,r;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":u=i.p.treeReader.level_field,n(i.p.data).each(function(){parseInt(this[u],10)===parseInt(i.p.tree_root_level,10)&&t.push(this)});break;case"adjacency":r=i.p.treeReader.parent_id_field,n(i.p.data).each(function(){(this[r]===null||String(this[r]).toLowerCase()=="null")&&t.push(this)})}}),t},getNodeDepth:function(t){var i=null;return this.each(function(){var r,u;if(this.grid&&this.p.treeGrid){r=this;switch(r.p.treeGridModel){case"nested":u=r.p.treeReader.level_field,i=parseInt(t[u],10)-parseInt(r.p.tree_root_level,10);break;case"adjacency":i=n(r).jqGrid("getNodeAncestors",t).length}}}),i},getNodeParent:function(t){var i=null;return this.each(function(){var r=this,f,u;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var o=r.p.treeReader.left_field,s=r.p.treeReader.right_field,e=r.p.treeReader.level_field,h=parseInt(t[o],10),c=parseInt(t[s],10),l=parseInt(t[e],10);n(this.p.data).each(function(){if(parseInt(this[e],10)===l-1&&parseInt(this[o],10)<h&&parseInt(this[s],10)>c)return i=this,!1});break;case"adjacency":f=r.p.treeReader.parent_id_field,u=r.p.localReader.id,n(this.p.data).each(function(){if(this[u]==t[f])return i=this,!1})}}),i},getNodeChildren:function(t){var i=[];return this.each(function(){var r=this,f,u;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var o=r.p.treeReader.left_field,s=r.p.treeReader.right_field,e=r.p.treeReader.level_field,h=parseInt(t[o],10),c=parseInt(t[s],10),l=parseInt(t[e],10);n(this.p.data).each(function(){parseInt(this[e],10)===l+1&&parseInt(this[o],10)>h&&parseInt(this[s],10)<c&&i.push(this)});break;case"adjacency":f=r.p.treeReader.parent_id_field,u=r.p.localReader.id,n(this.p.data).each(function(){this[f]==t[u]&&i.push(this)})}}),i},getFullTreeNode:function(t){var i=[];return this.each(function(){var r=this,s,f,e;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var u=r.p.treeReader.left_field,h=r.p.treeReader.right_field,o=r.p.treeReader.level_field,c=parseInt(t[u],10),l=parseInt(t[h],10),a=parseInt(t[o],10);n(this.p.data).each(function(){parseInt(this[o],10)>=a&&parseInt(this[u],10)>=c&&parseInt(this[u],10)<=l&&i.push(this)});break;case"adjacency":t&&(i.push(t),f=r.p.treeReader.parent_id_field,e=r.p.localReader.id,n(this.p.data).each(function(n){for(s=i.length,n=0;n<s;n++)if(i[n][e]==this[f]){i.push(this);break}}))}}),i},getNodeAncestors:function(t){var i=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var r=n(this).jqGrid("getNodeParent",t);r;)i.push(r),r=n(this).jqGrid("getNodeParent",r)}),i},isVisibleNode:function(t){var i=!0;return this.each(function(){var r=this,f,u;r.grid&&r.p.treeGrid&&(f=n(r).jqGrid("getNodeAncestors",t),u=r.p.treeReader.expanded_field,n(f).each(function(){return i=i&&this[u],i?void 0:!1}))}),i},isNodeLoaded:function(t){var i;return this.each(function(){var r=this,u;r.grid&&r.p.treeGrid&&(u=r.p.treeReader.leaf_field,i=t!==undefined?t.loaded!==undefined?t.loaded:t[u]||n(r).jqGrid("getNodeChildren",t).length>0?!0:!1:!1)}),i},expandNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var r=this.p.treeReader.expanded_field,s=this.p.treeReader.parent_id_field,h=this.p.treeReader.loaded,f=this.p.treeReader.level_field,c=this.p.treeReader.left_field,o=this.p.treeReader.right_field;if(!t[r]){var i=n.jgrid.getAccessor(t,this.p.localReader.id),u=n("#"+n.jgrid.jqID(i),this.grid.bDiv)[0],e=this.p._index[i];n(this).jqGrid("isNodeLoaded",this.p.data[e])?(t[r]=!0,n("div.treeclick",u).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(t[r]=!0,n("div.treeclick",u).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=u.rowIndex,this.p.datatype=this.p.treedatatype,this.p.treeGridModel=="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:i,n_left:t[c],n_right:t[o],n_level:t[f]}}):n(this).jqGrid("setGridParam",{postData:{nodeid:i,parentid:t[s],n_level:t[f]}}),n(this).trigger("reloadGrid"),t[h]=!0,this.p.treeGridModel=="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):n(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(t){return this.each(function(){var i,u,r;this.grid&&this.p.treeGrid&&(i=this.p.treeReader.expanded_field,t[i]&&(t[i]=!1,u=n.jgrid.getAccessor(t,this.p.localReader.id),r=n("#"+n.jgrid.jqID(u),this.grid.bDiv)[0],n("div.treeclick",r).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")))})},SortTree:function(t,i,r,u){return this.each(function(){if(this.grid&&this.p.treeGrid){var s,l,h,f=[],c=this,e,o,a=n(this).jqGrid("getRootNodes");for(e=n.jgrid.from(a),e.orderBy(t,i,r,u),o=e.select(),s=0,l=o.length;s<l;s++)h=o[s],f.push(h),n(this).jqGrid("collectChildrenSortTree",f,h,t,i,r,u);n.each(f,function(t){var i=n.jgrid.getAccessor(this,c.p.localReader.id);n("#"+n.jgrid.jqID(c.p.id)+" tbody tr:eq("+t+")").after(n("tr#"+n.jgrid.jqID(i),c.grid.bDiv))}),e=null,o=null,f=null}})},collectChildrenSortTree:function(t,i,r,u,f,e){return this.each(function(){if(this.grid&&this.p.treeGrid){var o,l,c,a,s,h;for(a=n(this).jqGrid("getNodeChildren",i),s=n.jgrid.from(a),s.orderBy(r,u,f,e),h=s.select(),o=0,l=h.length;o<l;o++)c=h[o],t.push(c),n(this).jqGrid("collectChildrenSortTree",t,c,r,u,f,e)}})},setTreeRow:function(t,i){var r=!1;return this.each(function(){var u=this;u.grid&&u.p.treeGrid&&(r=n(u).jqGrid("setRowData",t,i))}),r},delTreeNode:function(t){return this.each(function(){var i=this,a=i.p.localReader.id,s=i.p.treeReader.left_field,h=i.p.treeReader.right_field,c,l,r,u,f,e,o;if(i.grid&&i.p.treeGrid&&(f=i.p._index[t],f!==undefined)){if(c=parseInt(i.p.data[f][h],10),l=c-parseInt(i.p.data[f][s],10)+1,e=n(i).jqGrid("getFullTreeNode",i.p.data[f]),e.length>0)for(o=0;o<e.length;o++)n(i).jqGrid("delRowData",e[o][a]);if(i.p.treeGridModel==="nested"){if(r=n.jgrid.from(i.p.data).greater(s,c,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][s]=parseInt(r[u][s],10)-l);if(r=n.jgrid.from(i.p.data).greater(h,c,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][h]=parseInt(r[u][h],10)-l)}}})},addChildNode:function(t,i,r){var u=this[0],b,v,y,f,e;if(r){var p=u.p.treeReader.expanded_field,nt=u.p.treeReader.leaf_field,it=u.p.treeReader.level_field,ft=u.p.treeReader.parent_id_field,l=u.p.treeReader.left_field,o=u.p.treeReader.right_field,rt=u.p.treeReader.loaded,g,tt,c,d,s,ut,k=0,a=i,w,h;if(typeof t=="undefined"||t===null){if(s=u.p.data.length-1,s>=0)while(s>=0)k=Math.max(k,parseInt(u.p.data[s][u.p.localReader.id],10)),s--;t=k+1}if(b=n(u).jqGrid("getInd",i),w=!1,i===undefined||i===null||i===""?(i=null,a=null,g="last",d=u.p.tree_root_level,s=u.p.data.length+1):(g="after",tt=u.p._index[i],c=u.p.data[tt],i=c[u.p.localReader.id],d=parseInt(c[it],10)+1,v=n(u).jqGrid("getFullTreeNode",c),v.length?(s=v[v.length-1][u.p.localReader.id],a=s,s=n(u).jqGrid("getInd",a)+1):s=n(u).jqGrid("getInd",i)+1,c[nt]&&(w=!0,c[p]=!0,n(u.rows[b]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(u.p.treeIcons.leaf+" tree-leaf").addClass(u.p.treeIcons.minus+" tree-minus"),u.p.data[tt][nt]=!1,c[rt]=!0)),ut=s+1,r[p]=!1,r[rt]=!0,r[it]=d,r[nt]=!0,u.p.treeGridModel==="adjacency"&&(r[ft]=i),u.p.treeGridModel==="nested")if(i!==null){if(h=parseInt(c[o],10),y=n.jgrid.from(u.p.data),y=y.greaterOrEquals(o,h,{stype:"integer"}),f=y.select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][l]=f[e][l]>h?parseInt(f[e][l],10)+2:f[e][l],f[e][o]=f[e][o]>=h?parseInt(f[e][o],10)+2:f[e][o]);r[l]=h,r[o]=h+1}else{if(h=parseInt(n(u).jqGrid("getCol",o,!1,"max"),10),f=n.jgrid.from(u.p.data).greater(l,h,{stype:"integer"}).select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][l]=parseInt(f[e][l],10)+2);if(f=n.jgrid.from(u.p.data).greater(o,h,{stype:"integer"}).select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][o]=parseInt(f[e][o],10)+2);r[l]=h+1,r[o]=h+2}(i===null||n(u).jqGrid("isNodeLoaded",c)||w)&&(n(u).jqGrid("addRowData",t,r,g,a),n(u).jqGrid("setTreeNode",s,ut)),c&&!c[p]&&n(u.rows[b]).find("div.treeclick").click()}}})}(jQuery),function(n){"use strict";n.jgrid.extend({groupingSetup:function(){return this.each(function(){var r=this,t=r.p.groupingView,i,f,u,e;if(t!==null&&(typeof t=="object"||n.isFunction(t)))if(t.groupField.length){for(typeof t.visibiltyOnNextGrouping=="undefined"&&(t.visibiltyOnNextGrouping=[]),i=0;i<t.groupField.length;i++)if(t.groupOrder[i]||(t.groupOrder[i]="asc"),t.groupText[i]||(t.groupText[i]="{0}"),typeof t.groupColumnShow[i]!="boolean"&&(t.groupColumnShow[i]=!0),typeof t.groupSummary[i]!="boolean"&&(t.groupSummary[i]=!1),t.groupColumnShow[i]===!0?(t.visibiltyOnNextGrouping[i]=!0,n(r).jqGrid("showCol",t.groupField[i])):(t.visibiltyOnNextGrouping[i]=n("#"+n.jgrid.jqID(r.p.id+"_"+t.groupField[i])).is(":visible"),n(r).jqGrid("hideCol",t.groupField[i])),t.sortitems[i]=[],t.sortnames[i]=[],t.summaryval[i]=[],t.groupSummary[i])for(t.summary[i]=[],f=r.p.colModel,u=0,e=f.length;u<e;u++)f[u].summaryType&&t.summary[i].push({nm:f[u].name,st:f[u].summaryType,v:""})}else r.p.grouping=!1;else r.p.grouping=!1})},groupingPrepare:function(t,i,r,u){return this.each(function(){i[0]+="";var f=i[0].toString().split(" ").join(""),e=this.p.groupingView,o=this;r.hasOwnProperty(f)?r[f].push(t):(r[f]=[],r[f].push(t),e.sortitems[0].push(f),e.sortnames[0].push(n.trim(i[0].toString())),e.summaryval[0][f]=n.extend(!0,[],e.summary[0])),e.groupSummary[0]&&n.each(e.summaryval[0][f],function(){this.v=n.isFunction(this.st)?this.st.call(o,this.v,this.nm,u):n(o).jqGrid("groupingCalculations."+this.st,this.v,this.nm,u)})}),r},groupingToggle:function(t){return this.each(function(){var r=this,u=r.p.groupingView,h=t.lastIndexOf("_"),s=t.substring(0,h+1),c=parseInt(t.substring(h+1),10)+1,o=u.minusicon,l=u.plusicon,a=n("#"+n.jgrid.jqID(t)),i=a.length?a[0].nextSibling:null,e=n("#"+n.jgrid.jqID(t)+" span.tree-wrap-"+r.p.direction),f=!1;if(e.hasClass(o)){if(u.showSummaryOnHide&&u.groupSummary[0]){if(i)while(i){if(n(i).hasClass("jqfoot"))break;n(i).hide(),i=i.nextSibling}}else if(i)while(i){if(n(i).attr("id")==s+String(c))break;n(i).hide(),i=i.nextSibling}e.removeClass(o).addClass(l),f=!0}else{if(i)while(i){if(n(i).attr("id")==s+String(c))break;n(i).show(),i=i.nextSibling}e.removeClass(l).addClass(o)}n(r).triggerHandler("jqGridGroupingClickGroup",[t,f]),n.isFunction(r.p.onClickGroup)&&r.p.onClickGroup.call(r,t,f)}),!1},groupingRender:function(t,i){return this.each(function(){var u=this,r=u.p.groupingView,f="",h="",o,l=r.groupCollapse?r.plusicon:r.minusicon,s,c,e;for(r.groupDataSorted||(r.sortitems[0].sort(),r.sortnames[0].sort(),r.groupOrder[0].toLowerCase()=="desc"&&(r.sortitems[0].reverse(),r.sortnames[0].reverse())),l+=" tree-wrap-"+u.p.direction,e=0;e<i;){if(u.p.colModel[e].name==r.groupField[0]){c=e;break}e++}n.each(r.sortitems[0],function(e,a){var y,k,v,w,p;o=u.p.id+"ghead_"+e,h="<span style='cursor:pointer;' class='ui-icon "+l+"' onclick=\"jQuery('#"+n.jgrid.jqID(u.p.id)+"').jqGrid('groupingToggle','"+o+"');return false;\"></span>";try{s=u.formatter(o,r.sortnames[0][e],c,r.sortitems[0])}catch(tt){s=r.sortnames[0][e]}for(f+='<tr id="'+o+'" role="row" class= "ui-widget-content jqgroup ui-row-'+u.p.direction+'"><td colspan="'+i+'">'+h+n.jgrid.format(r.groupText[0],s,t[a].length)+"</td></tr>",y=0;y<t[a].length;y++)f+=t[a][y].join("");if(r.groupSummary[0]){k="",r.groupCollapse&&!r.showSummaryOnHide&&(k=' style="display:none;"'),f+="<tr"+k+' role="row" class="ui-widget-content jqfoot ui-row-'+u.p.direction+'">';var nt=r.summaryval[0][a],d=u.p.colModel,b,g=t[a].length;for(v=0;v<i;v++)w="<td "+u.formatCol(v,1,"")+">&#160;</td>",p="{0}",n.each(nt,function(){if(this.nm==d[v].name){d[v].summaryTpl&&(p=d[v].summaryTpl),this.st=="avg"&&this.v&&g>0&&(this.v=this.v/g);try{b=u.formatter("",this.v,v,this)}catch(t){b=this.v}return w="<td "+u.formatCol(v,1,"")+">"+n.jgrid.format(p,b)+"</td>",!1}}),f+=w;f+="</tr>"}}),n("#"+n.jgrid.jqID(u.p.id)+" tbody:first").append(f),f=null})},groupingGroupBy:function(t,i){return this.each(function(){var f=this,u,r;for(typeof t=="string"&&(t=[t]),u=f.p.groupingView,f.p.grouping=!0,typeof u.visibiltyOnNextGrouping=="undefined"&&(u.visibiltyOnNextGrouping=[]),r=0;r<u.groupField.length;r++)!u.groupColumnShow[r]&&u.visibiltyOnNextGrouping[r]&&n(f).jqGrid("showCol",u.groupField[r]);for(r=0;r<t.length;r++)u.visibiltyOnNextGrouping[r]=n("#"+n.jgrid.jqID(f.p.id)+"_"+n.jgrid.jqID(t[r])).is(":visible");f.p.groupingView=n.extend(f.p.groupingView,i||{}),u.groupField=t,n(f).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var i=this,u,r;if(typeof t=="undefined"&&(t=!0),i.p.grouping=!1,t===!0){for(u=i.p.groupingView,r=0;r<u.groupField.length;r++)!u.groupColumnShow[r]&&u.visibiltyOnNextGrouping[r]&&n(i).jqGrid("showCol",u.groupField);n("tr.jqgroup, tr.jqfoot","#"+n.jgrid.jqID(i.p.id)+" tbody:first").remove(),n("tr.jqgrow:hidden","#"+n.jgrid.jqID(i.p.id)+" tbody:first").show()}else n(i).trigger("reloadGrid")})},groupingCalculations:{sum:function(n,t,i){return parseFloat(n||0)+parseFloat(i[t]||0)},min:function(n,t,i){return n===""?parseFloat(i[t]||0):Math.min(parseFloat(n),parseFloat(i[t]||0))},max:function(n,t,i){return n===""?parseFloat(i[t]||0):Math.max(parseFloat(n),parseFloat(i[t]||0))},count:function(n,t,i){return n===""&&(n=0),i.hasOwnProperty(t)?n+1:0},avg:function(n,t,i){return parseFloat(n||0)+parseFloat(i[t]||0)}}})}(jQuery),function(n){"use strict";n.jgrid.extend({jqGridImport:function(t){return t=n.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each(function(){var i=this,u=function(t,r){var h=n(r.xmlGrid.config,t)[0],s=n(r.xmlGrid.data,t)[0],u,f,e,o;if(xmlJsonClass.xml2json&&n.jgrid.parse){u=xmlJsonClass.xml2json(h," "),u=n.jgrid.parse(u);for(e in u)u.hasOwnProperty(e)&&(f=u[e]);s?(o=u.grid.datatype,u.grid.datatype="xmlstring",u.grid.datastr=t,n(i).jqGrid(f).jqGrid("setGridParam",{datatype:o})):n(i).jqGrid(f),u=null,f=null}else alert("xml2json or parse are not present")},f=function(t,r){var e,o,u,f,s;t&&typeof t=="string"&&(e=!1,n.jgrid.useJSON&&(n.jgrid.useJSON=!1,e=!0),o=n.jgrid.parse(t),e&&(n.jgrid.useJSON=!0),u=o[r.jsonGrid.config],f=o[r.jsonGrid.data],f?(s=u.datatype,u.datatype="jsonstring",u.datastr=f,n(i).jqGrid(u).jqGrid("setGridParam",{datatype:s})):n(i).jqGrid(u))},r;switch(t.imptype){case"xml":n.ajax(n.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(r,f){f=="success"&&(u(r.responseXML,t),n(i).triggerHandler("jqGridImportComplete",[r,t]),n.isFunction(t.importComplete)&&t.importComplete(r)),r=null}},t.ajaxOptions));break;case"xmlstring":t.impstring&&typeof t.impstring=="string"&&(r=n.jgrid.stringToDoc(t.impstring),r&&(u(r,t),n(i).triggerHandler("jqGridImportComplete",[r,t]),n.isFunction(t.importComplete)&&t.importComplete(r),t.impstring=null),r=null);break;case"json":n.ajax(n.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(r){try{f(r.responseText,t),n(i).triggerHandler("jqGridImportComplete",[r,t]),n.isFunction(t.importComplete)&&t.importComplete(r)}catch(u){}r=null}},t.ajaxOptions));break;case"jsonstring":t.impstring&&typeof t.impstring=="string"&&(f(t.impstring,t),n(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),n.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){t=n.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var i=null;return this.each(function(){var r,u;if(this.grid){if(r=n.extend(!0,{},n(this).jqGrid("getGridParam")),r.rownumbers&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.multiselect&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.subGrid&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.knv=null,r.treeGrid)for(u in r.treeReader)r.treeReader.hasOwnProperty(u)&&(r.colNames.splice(r.colNames.length-1),r.colModel.splice(r.colModel.length-1));switch(t.exptype){case"xmlstring":i="<"+t.root+">"+xmlJsonClass.json2xml(r,t.ident)+"</"+t.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(r,t.root,t.ident,!1)+"}",r.postData.filters!==undefined&&(i=i.replace(/filters":"/,'filters":'),i=i.replace(/}]}"/,"}]}"))}}}),i},excelExport:function(t){return t=n.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){var u,r,i;this.grid&&t.exptype=="remote"&&(r=n.extend({},this.p.postData),r[t.oper]=t.tag,i=jQuery.param(r),u=t.url.indexOf("?")!=-1?t.url+"&"+i:t.url+"?"+i,window.location=u)})}})}(jQuery),function(n){if(n.browser.msie&&n.browser.version==8&&(n.expr[":"].hidden=function(n){return n.offsetWidth===0||n.offsetHeight===0||n.style.display=="none"}),n.jgrid._multiselect=!1,n.ui&&n.ui.multiselect){if(n.ui.multiselect.prototype._setSelected){var t=n.ui.multiselect.prototype._setSelected;n.ui.multiselect.prototype._setSelected=function(i,r){var f=t.call(this,i,r),u;return r&&this.selectedList&&(u=this.element,this.selectedList.find("li").each(function(){n(this).data("optionLink")&&n(this).data("optionLink").remove().appendTo(u)})),f}}n.ui.multiselect.prototype.destroy&&(n.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),n.Widget===undefined?n.widget.prototype.destroy.apply(this,arguments):n.Widget.prototype.destroy.apply(this,arguments)}),n.jgrid._multiselect=!0}n.jgrid.extend({sortableColumns:function(t){return this.each(function(){function e(){i.p.disableClick=!0}var i=this,u=n.jgrid.jqID(i.p.id),r={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+u+"_cb,#jqgh_"+u+"_rn,#jqgh_"+u+"_subgrid),:hidden)",placeholder:{element:function(t){return n(document.createElement(t[0].nodeName)).addClass(t[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(n,t){t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}},update:function(t,r){var h=n(r.item).parent(),o=n(">th",h),s=i.p.colModel,f={},e=i.p.id+"_",u;n.each(s,function(n){f[this.name]=n}),u=[],o.each(function(){var t=n(">div",this).get(0).id.replace(/^jqgh_/,"").replace(e,"");t in f&&u.push(f[t])}),n(i).jqGrid("remapColumns",u,!0,!0),n.isFunction(i.p.sortable.update)&&i.p.sortable.update(u),setTimeout(function(){i.p.disableClick=!1},50)}},f;i.p.sortable.options?n.extend(r,i.p.sortable.options):n.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable}),r.start?(f=r.start,r.start=function(n,t){e(),f.call(this,n,t)}):r.start=e,i.p.sortable.exclude&&(r.items+=":not("+i.p.sortable.exclude+")"),t.sortable(r).data("sortable").floating=!0})},columnChooser:function(t){function a(n,t,i){if(t>=0){var r=n.slice(),u=r.splice(t,Math.max(n.length-t,t));return t>n.length&&(t=n.length),r[t]=i,r.concat(u)}}function f(t,i){t&&(typeof t=="string"?n.fn[t]&&n.fn[t].apply(i,n.makeArray(arguments).slice(2)):n.isFunction(t)&&t.apply(i,n.makeArray(arguments).slice(2)))}var i=this,u,r,s,h;if(!n("#colchooser_"+n.jgrid.jqID(i[0].p.id)).length){if(u=n('<div id="colchooser_'+i[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),r=n("select",u),t=n.extend({width:420,height:240,classname:null,done:function(n){n&&i.jqGrid("remapColumns",n,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(t){var i={};return i[t.bSubmit]=function(){t.apply_perm(),t.cleanup(!1)},i[t.bCancel]=function(){t.cleanup(!0)},n.extend(!0,{buttons:i,close:function(){t.cleanup(!0)},modal:t.modal?t.modal:!1,resizable:t.resizable?t.resizable:!0,width:t.width+20},t.dialog_opts||{})},apply_perm:function(){n("option",r).each(function(){this.selected?i.jqGrid("showCol",e[this.value].name):i.jqGrid("hideCol",e[this.value].name)});var u=[];n("option:selected",r).each(function(){u.push(parseInt(this.value,10))}),n.each(u,function(){delete o[e[parseInt(this,10)].name]}),n.each(o,function(){var n=parseInt(this,10);u=a(u,n,n)}),t.done&&t.done.call(i,u)},cleanup:function(n){f(t.dlog,u,"destroy"),f(t.msel,r,"destroy"),u.remove(),n&&t.done&&t.done.call(i)},msel_opts:{}},n.jgrid.col,t||{}),n.ui&&n.ui.multiselect&&t.msel=="multiselect"){if(!n.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}t.msel_opts=n.extend(n.ui.multiselect.defaults,t.msel_opts)}t.caption&&u.attr("title",t.caption),t.classname&&(u.addClass(t.classname),r.addClass(t.classname)),t.width&&(n(">div",u).css({width:t.width,margin:"0 auto"}),r.css("width",t.width)),t.height&&(n(">div",u).css("height",t.height),r.css("height",t.height-10));var e=i.jqGrid("getGridParam","colModel"),c=i.jqGrid("getGridParam","colNames"),o={},l=[];r.empty(),n.each(e,function(n){if(o[this.name]=n,this.hidedlg){this.hidden||l.push(n);return}r.append("<option value='"+n+"' "+(this.hidden?"":"selected='selected'")+">"+c[n]+"</option>")}),s=n.isFunction(t.dlog_opts)?t.dlog_opts.call(i,t):t.dlog_opts,f(t.dlog,u,s),h=n.isFunction(t.msel_opts)?t.msel_opts.call(i,t):t.msel_opts,f(t.msel,r,h)}},sortableRows:function(t){return this.each(function(){var i=this;i.grid&&(i.p.treeGrid||n.fn.sortable&&(t=n.extend({cursor:"move",axis:"y",items:".jqgrow"},t||{}),t.start&&n.isFunction(t.start)?(t._start_=t.start,delete t.start):t._start_=!1,t.update&&n.isFunction(t.update)?(t._update_=t.update,delete t.update):t._update_=!1,t.start=function(r,u){if(n(u.item).css("border-width","0px"),n("td",u.item).each(function(n){this.style.width=i.grid.cols[n].style.width}),i.p.subGrid){var f=n(u.item).attr("id");try{n(i).jqGrid("collapseSubGridRow",f)}catch(e){}}t._start_&&t._start_.apply(this,[r,u])},t.update=function(r,u){n(u.item).css("border-width",""),i.p.rownumbers===!0&&n("td.jqgrid-rownum",i.rows).each(function(t){n(this).html(t+1+(parseInt(i.p.page,10)-1)*parseInt(i.p.rowNum,10))}),t._update_&&t._update_.apply(this,[r,u])},n("tbody:first",i).sortable(t),n("tbody:first",i).disableSelection()))})},gridDnD:function(t){return this.each(function(){function f(){var t=n.data(i,"dnd");n("tr.jqgrow:not(.ui-draggable)",i).draggable(n.isFunction(t.drag)?t.drag.call(n(i),t):t.drag)}var i=this,e,r,u;if(i.grid&&!i.p.treeGrid&&n.fn.draggable&&n.fn.droppable){if(e="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>",n("#jqgrid_dnd").html()===null&&n("body").append(e),typeof t=="string"&&t=="updateDnD"&&i.p.jqgdnd===!0){f();return}if(t=n.extend({drag:function(t){return n.extend({start:function(r,u){var e,f;if(i.p.subGrid){e=n(u.helper).attr("id");try{n(i).jqGrid("collapseSubGridRow",e)}catch(o){}}for(f=0;f<n.data(i,"dnd").connectWith.length;f++)n(n.data(i,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")=="0"&&n(n.data(i,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{});u.helper.addClass("ui-state-highlight"),n("td",u.helper).each(function(n){this.style.width=i.grid.headers[n].width+"px"}),t.onstart&&n.isFunction(t.onstart)&&t.onstart.call(n(i),r,u)},stop:function(r,u){var e,f;for(u.helper.dropped&&!t.dragcopy&&(e=n(u.helper).attr("id"),e===undefined&&(e=n(this).attr("id")),n(i).jqGrid("delRowData",e)),f=0;f<n.data(i,"dnd").connectWith.length;f++)n(n.data(i,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row");t.onstop&&n.isFunction(t.onstop)&&t.onstop.call(n(i),r,u)}},t.drag_opts||{})},drop:function(t){return n.extend({accept:function(t){var i,r;return n(t).hasClass("jqgrow")?(i=n(t).closest("table.ui-jqgrid-btable"),i.length>0&&n.data(i[0],"dnd")!==undefined)?(r=n.data(i[0],"dnd").connectWith,n.inArray("#"+n.jgrid.jqID(this.id),r)!=-1?!0:!1):!1:t},drop:function(r,u){var l,f,h,e,s;if(n(u.draggable).hasClass("jqgrow")){if(l=n(u.draggable).attr("id"),f=u.draggable.parent().parent().jqGrid("getRowData",l),!t.dropbyname){var c=0,a={},o,v=n("#"+n.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(h in f)o=v[c].name,o=="cb"||o=="rn"||o=="subgrid"||f.hasOwnProperty(h)&&v[c]&&(a[o]=f[h]),c++;f=a}catch(y){}}u.helper.dropped=!0,t.beforedrop&&n.isFunction(t.beforedrop)&&(e=t.beforedrop.call(this,r,u,f,n("#"+n.jgrid.jqID(i.p.id)),n(this)),typeof e!="undefined"&&e!==null&&typeof e=="object"&&(f=e)),u.helper.dropped&&(t.autoid&&(n.isFunction(t.autoid)?s=t.autoid.call(this,f):(s=Math.ceil(Math.random()*1e3),s=t.autoidprefix+s)),n("#"+n.jgrid.jqID(this.id)).jqGrid("addRowData",s,f,t.droppos)),t.ondrop&&n.isFunction(t.ondrop)&&t.ondrop.call(this,r,u,f)}}},t.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},t||{}),t.connectWith)for(t.connectWith=t.connectWith.split(","),t.connectWith=n.map(t.connectWith,function(t){return n.trim(t)}),n.data(i,"dnd",t),i.p.reccount=="0"||i.p.jqgdnd||f(),i.p.jqgdnd=!0,r=0;r<t.connectWith.length;r++)u=t.connectWith[r],n(u).droppable(n.isFunction(t.drop)?t.drop.call(n(i),t):t.drop)}})},gridResize:function(t){return this.each(function(){var i=this,r=n.jgrid.jqID(i.p.id),u;i.grid&&n.fn.resizable&&(t=n.extend({},t||{}),t.alsoResize?(t._alsoResize_=t.alsoResize,delete t.alsoResize):t._alsoResize_=!1,t.stop&&n.isFunction(t.stop)?(t._stop_=t.stop,delete t.stop):t._stop_=!1,t.stop=function(u,f){n(i).jqGrid("setGridParam",{height:n("#gview_"+r+" .ui-jqgrid-bdiv").height()}),n(i).jqGrid("setGridWidth",f.size.width,t.shrinkToFit),t._stop_&&t._stop_.call(i,u,f)},t._alsoResize_?(u="{'#gview_"+r+" .ui-jqgrid-bdiv':true,'"+t._alsoResize_+"':true}",t.alsoResize=eval("("+u+")")):t.alsoResize=n(".ui-jqgrid-bdiv","#gview_"+r),delete t._alsoResize_,n("#gbox_"+r).resizable(t))})}})}(jQuery)